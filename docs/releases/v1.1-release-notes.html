<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.1, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../.././assets/img/favicon-32x32.png">
<title>v1.1 Release Notes Â· Blue Brain Nexus</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
v1.1 Release Notes
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../docs/getting-started/try-nexus.html" class="page">Try Nexus</a></li>
    <li><a href="../../docs/getting-started/running-nexus.html" class="page">Running Nexus</a></li>
  </ul></li>
  <li><a href="../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../docs/releases/v1.4-release-notes.html" class="page">v1.4 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.3-to-v1.4-migration.html" class="page">v1.3 To v1.4 Migration</a></li>
    <li><a href="../../docs/releases/v1.3-release-notes.html" class="page">v1.3 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.2-to-v1.3-migration.html" class="page">v1.2 To v1.3 Migration</a></li>
    <li><a href="../../docs/releases/v1.2-release-notes.html" class="page">v1.2 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html" class="active page">v1.1 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.0-to-v1.1-migration.html" class="page">v1.0 To v1.1 Migration</a></li>
    <li><a href="../../docs/releases/v1.0-release-notes.html" class="page">v1.0 Release Notes</a></li>
  </ul></li>
  <li><a href="../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../docs/fusion/plugins.html" class="page">Plugins</a></li>
    <li><a href="../../docs/fusion/studio.html" class="page">Studios</a></li>
    <li><a href="../../docs/fusion/admin.html" class="page">Admin</a></li>
    <li><a href="../../docs/fusion/add-your-own-app.html" class="page">Add your own App</a></li>
  </ul></li>
  <li><a href="../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../docs/delta/api/current/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../docs/delta/api/current/operating-on-resources.html" class="page">Operating on resources</a></li>
      <li><a href="../../docs/delta/api/current/iam-realms-api.html" class="page">Realms</a></li>
      <li><a href="../../docs/delta/api/current/authentication.html" class="page">Authentication</a></li>
      <li><a href="../../docs/delta/api/current/iam-permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../docs/delta/api/current/iam-acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../docs/delta/api/current/iam-identities.html" class="page">Identities</a></li>
      <li><a href="../../docs/delta/api/current/admin-orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../docs/delta/api/current/admin-projects-api.html" class="page">Projects</a></li>
      <li><a href="../../docs/delta/api/current/kg-schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../docs/delta/api/current/kg-resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../docs/delta/api/current/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../docs/delta/api/current/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../docs/delta/api/current/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../docs/delta/api/current/views/composite-view-api.html" class="page">CompositeView</a></li>
        <li><a href="../../docs/delta/api/current/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../docs/delta/api/current/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
      </ul></li>
      <li><a href="../../docs/delta/api/current/kg-storages-api.html" class="page">Storages</a></li>
      <li><a href="../../docs/delta/api/current/kg-files-api.html" class="page">Files</a></li>
      <li><a href="../../docs/delta/api/current/kg-archives-api.html" class="page">Archives</a></li>
      <li><a href="../../docs/delta/api/current/kg-resources-api.html" class="page">Resources</a></li>
      <li><a href="../../docs/delta/api/current/error-signaling.html" class="page">Error Signaling</a></li>
    </ul></li>
    <li><a href="../../docs/delta/benchmarks.html" class="page">Benchmarks</a></li>
  </ul></li>
  <li><a href="../../docs/utilities/index.html" class="page">Utilities</a>
  <ul>
    <li><a href="../../docs/utilities/projections.html" class="page">Indexing data in other systems</a></li>
    <li><a href="../../docs/utilities/nexus-python-cli.html" class="page">MovieLens Tutorial using the Nexus Python CLI</a></li>
  </ul></li>
  <li><a href="../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../docs/releases/v1.1-release-notes.html#v1-1-release-notes" class="header">v1.1 Release Notes</a>
  <ul>
    <li><a href="../../docs/releases/v1.1-release-notes.html#highlights" class="header">Highlights</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#service-event-logs" class="header">Service event logs</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#full-service-event-logs" class="header">Full service event logs</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-specific-event-logs" class="header">Resource specific event logs</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#configurable-storage-backends" class="header">Configurable storage backends</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#diskstorage" class="header">DiskStorage</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#remotediskstorage" class="header">RemoteDiskStorage</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#s3storage" class="header">S3Storage</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#stable-elasticsearch-views" class="header">Stable ElasticSearch views</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#configurable-sparqlview" class="header">Configurable SparqlView</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#aggregatesparqlview" class="header">AggregateSparqlView</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#index-progress" class="header">Index progress</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#other-api-improvements" class="header">Other API Improvements</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-content-negotiation" class="header">Resource content negotiation</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#additional-query-params-in-listings" class="header">Additional query params in listings</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#incoming-and-outgoing-links" class="header">Incoming and Outgoing links</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-id-resolution" class="header">Resource id resolution</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#paginate-beyond-10-000-results" class="header">Paginate beyond 10,000 results</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#organization-and-project-uuids" class="header">Organization and Project UUIDs</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#nexus-web-improvements" class="header">Nexus Web improvements</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#" class="header"><a href="https://github.com/BlueBrain/nexus-web/releases/tag/v1.1.0">v1.1 Release Notes</a></a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#feature-highlights" class="header">Feature highlights</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#other-changes" class="header">Other changes</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 51dd5463
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../docs/releases/v1.1-release-notes.html#v1-1-release-notes" class="header">v1.1 Release Notes</a>
  <ul>
    <li><a href="../../docs/releases/v1.1-release-notes.html#highlights" class="header">Highlights</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#service-event-logs" class="header">Service event logs</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#full-service-event-logs" class="header">Full service event logs</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-specific-event-logs" class="header">Resource specific event logs</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#configurable-storage-backends" class="header">Configurable storage backends</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#diskstorage" class="header">DiskStorage</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#remotediskstorage" class="header">RemoteDiskStorage</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#s3storage" class="header">S3Storage</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#stable-elasticsearch-views" class="header">Stable ElasticSearch views</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#configurable-sparqlview" class="header">Configurable SparqlView</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#aggregatesparqlview" class="header">AggregateSparqlView</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#index-progress" class="header">Index progress</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#other-api-improvements" class="header">Other API Improvements</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-content-negotiation" class="header">Resource content negotiation</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#additional-query-params-in-listings" class="header">Additional query params in listings</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#incoming-and-outgoing-links" class="header">Incoming and Outgoing links</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#resource-id-resolution" class="header">Resource id resolution</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#paginate-beyond-10-000-results" class="header">Paginate beyond 10,000 results</a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#organization-and-project-uuids" class="header">Organization and Project UUIDs</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#nexus-web-improvements" class="header">Nexus Web improvements</a>
    <ul>
      <li><a href="../../docs/releases/v1.1-release-notes.html#" class="header"><a href="https://github.com/BlueBrain/nexus-web/releases/tag/v1.1.0">v1.1 Release Notes</a></a></li>
      <li><a href="../../docs/releases/v1.1-release-notes.html#feature-highlights" class="header">Feature highlights</a></li>
    </ul></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html#other-changes" class="header">Other changes</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#v1-1-release-notes" name="v1-1-release-notes" class="anchor"><span class="anchor-link"></span></a>v1.1 Release Notes</h1>
<blockquote>
  <p>This is an incremental software release that adds several improvements across the board. The API is backwards compatible to v1.0 but the cassandra store and indices require a migration due to changes in the underlying event model and resource representation. If you are updating from v1.0 please follow the <a href="v1.0-to-v1.1-migration.html">migration instructions</a>.</p>
</blockquote>
<h2><a href="#highlights" name="highlights" class="anchor"><span class="anchor-link"></span></a>Highlights</h2>
<p>The goal of this release is to expose the event log through an API and to provide a configurable storage where to save files. These two key features enables users to </p>
<ol>
  <li>Build custom applications based on Nexus event log .</li>
  <li>Save files in different storage backends (S3, POSIX compatible, local File System).</li>
</ol>
<h2><a href="#service-event-logs" name="service-event-logs" class="anchor"><span class="anchor-link"></span></a>Service event logs</h2>
<p>Services now expose new API endpoints to replay their global event log or the virtual event logs specific to certain resource types or scope (organization, project). This new API allows building applications that integrate with Nexus to provide custom functionality for the data stored in the system. It allows applications to listen to events as they are emitted and react accordingly.</p>
<p>An example application would be a custom index for data within a project where as new resources or updates are recorded in Nexus, the application is notified and updates the appropriate index.</p>
<p>The implementation follows the <a href="https://www.w3.org/TR/eventsource/" title="Server Sent Events" target="_blank" rel="noopener noreferrer">Server Sent Events</a> specification and gives clients the responsibility of maintaining a cursor while replaying an event log. The event log is exposed over HTTP in a JSON-LD event representation.</p>
<p>The new endpoints require proof of identity by passing within the <code>Authorization</code> header a &lsquo;&lsquo;Bearer&rsquo;&rsquo; token. An <code>Anonymous</code> identity is assumed if the client does not pass a token.</p>
<p>Example:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/resources/myorg/myproj/events&quot;

data:{&quot;@context&quot;:&quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;,&quot;@type&quot;:&quot;Updated&quot;,&quot;_resourceId&quot;:&quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,&quot;_source&quot;:{&quot;@context&quot;:{&quot;@base&quot;:&quot;http://localhost/v1/resources/myorg/myproj/_/&quot;,&quot;@vocab&quot;:&quot;http://schema.org/&quot;},&quot;@id&quot;:&quot;7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,&quot;@type&quot;:&quot;Person&quot;,&quot;age&quot;:34,&quot;name&quot;:&quot;John Doe&quot;},&quot;_types&quot;:[&quot;http://schema.org/Person&quot;],&quot;_projectUuid&quot;:&quot;fadc3e6c-fca0-45d8-b65c-a984a012c689&quot;,&quot;_organizationUuid&quot;:&quot;d363ee88-5426-420a-8078-f8e9d9652fe9&quot;,&quot;_rev&quot;:2,&quot;_instant&quot;:&quot;2019-07-24T10:58:03.830114Z&quot;,&quot;_subject&quot;:&quot;http://localhost/v1/anonymous&quot;}
event:Updated
id:e8fac660-ae01-11e9-b31a-71e2858070d7

data:

^C
</code></pre>
<h3><a href="#full-service-event-logs" name="full-service-event-logs" class="anchor"><span class="anchor-link"></span></a>Full service event logs</h3>
<p>Designed primarily for applications that aim to be extensions to Nexus, the following service specific endpoints have been added. It is assumed that these endpoints would not be consumed by browsers or command line clients, but rather stateful applications that run within the same network. If that not the case, the deployment requires a proxy that does URL rewriting to avoid the path collision.</p>
<ul>
  <li><code>http(s)://{kg_service_address}/v1/events</code>; exposes the entire event log of the KG service; requires <code>events/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{admin_service_address}/v1/events</code>; exposes the entire event log of the Admin service; requires  <code>events/read</code> permission on <code>/</code>.</li>
  <li><code>http(s)://{iam_service_address}/v1/events</code>; exposes the entire event log of the KG service; requires <code>events/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/events</code>; exposes the entire event log of the KG service; requires <code>events/read</code>  permission on <code>/</code>.</li>
</ul>
<h3><a href="#resource-specific-event-logs" name="resource-specific-event-logs" class="anchor"><span class="anchor-link"></span></a>Resource specific event logs</h3>
<p>Designed primarily for applications that target a single resource type or a specific scope, the following endpoints have been added:</p>
<ul>
  <li><code>http(s)://{nexus_address}/v1/permissions/events</code>; exposes the event log for permissions; requires <code>permissions/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/realms/events</code>; exposes the event log for realms; requires <code>realms/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/acls/events</code>; exposes the event log for access control lists; requires <code>acls/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/orgs/events</code>; exposes the event log for organizations; requires <code>organizations/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/projects/events</code>; exposes the event log for projects; requires <code>projects/read</code>  permission on <code>/</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/resources/{org}/events</code>; exposes the event log for all resources in the selected  organization; requires <code>resources/read</code> permission on <code>/{org}</code>.</li>
  <li><code>http(s)://{nexus_address}/v1/resources/{org}/{project}/events</code>; exposes the event log for all resources in the  selected project; requires <code>resources/read</code> permission on <code>/{org}/{project}</code>.</li>
</ul>
<h2><a href="#configurable-storage-backends" name="configurable-storage-backends" class="anchor"><span class="anchor-link"></span></a>Configurable storage backends</h2>
<p>Prior to this release the KG service used an implicit storage medium, a filesystem directory (either local or mounted) accessible by the service. We&rsquo;ve noticed, however, both internally and through questions raised by organizations using Nexus that certain usecases require a higher degree of control on how data is stored and managed by the system.</p>
<p>An example of that is registering fairly large files into Nexus; performing a file upload just for the purpose of recording the file location and checksum is not efficient, especially in cases where the existing files are present on the same storage medium as the one mounted for use by Nexus.</p>
<p>To address this issue the new release introduces a new resource type specific to KG that controls the configuration of storage mediums in Nexus on a project basis. The new resource type is called <code>Storage</code> with three sub-types: <code>DiskStorage</code>, <code>RemoteDiskStorage</code>, <code>S3Storage</code> and uses the <code>/v1/storage</code> resource type specific endpoint.</p>
<p>Each project can be configured with multiple storage resources. Creating a storage resource requires <code>storages/write</code> permission on the target project or inherited from the parent organization or <code>/</code>.</p>
<p>See the <a href="../delta/api/current/kg-storages-api.html">storages API</a> for more information.</p>
<p>Additionally, a new file operation has been introduced that allows registering an existing file (already present on that storage) into the system just by specifying its <code>name</code>, <code>path</code>, <code>mediaType</code> and optionally a <code>storage</code> identifier to be used:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -XPUT &quot;http://localhost/v1/files/myorg/myproj/myfile.png?storage=mystorage&quot; -d \
&#39;{
    &quot;filename&quot;: &quot;myfile.png&quot;,
    &quot;path&quot;: &quot;relative/path/to/myfile.png&quot;,
    &quot;mediaType&quot;: &quot;image/png&quot;
}&#39;
</code></pre>
<h3><a href="#diskstorage" name="diskstorage" class="anchor"><span class="anchor-link"></span></a>DiskStorage</h3>
<p>When new projects are being created, a new <code>DiskStorage</code> resource is automatically created for that project and set as default, thus preserving the previous behaviour. Additionally new configuration options have been implemented:</p>
<ul>
  <li><code>default</code>: boolean, mandatory, whether the storage resource is the default one for a project</li>
  <li><code>volume</code>: string, mandatory, the root filesystem directory where Nexus can store files for this project</li>
  <li><code>maxFileSize</code>: int, optional, the maximum file size (in bytes) allowed for clients to upload</li>
  <li><code>readPermission</code>: string, optional, defaults to <code>resources/read</code>, the permission required for downloading files from  this storage medium</li>
  <li><code>writePermission</code>: string, optional, defaults to <code>files/write</code>, the permission required for uploading files to  this storage medium</li>
</ul>
<p>Arbitrary permissions can be used as values for <code>readPermission</code> and <code>writePermission</code> as long as they are defined in the global permission collection (<code>/v1/permissions</code>).</p>
<h3><a href="#remotediskstorage" name="remotediskstorage" class="anchor"><span class="anchor-link"></span></a>RemoteDiskStorage</h3>
<p>This storage type relies on a remote HTTP service that exposes basic file operations of an underlying POSIX file-system. In terms of deployment configuration it allows separating the Nexus and the storage mediums in different networks and possibly physical locations. An example usecase is running a distributed network storage (such as Ceph, Gluster, GPFS, Lustre, &hellip;) that can&rsquo;t or shouldn&rsquo;t be mounted directly on the system where Nexus runs.</p>
<p>The following configuration options are available for this storage type:</p>
<ul>
  <li><code>default</code>: boolean, mandatory, whether the storage resource is the default one for a project</li>
  <li><code>endpoint</code>: string, optional, the base address of the remote disk storage integration service, defaults to the value  set in the <a href="https://github.com/BlueBrain/nexus-kg/blob/master/src/main/resources/app.conf" title="environment variables of KG" target="_blank" rel="noopener noreferrer">environment variables of KG</a></li>
  <li><code>credentials</code>: string, optional, the oauth2 bearer token to be used for authenticating to the remote disk storage  integration service, defaults to the value set in the  <a href="https://github.com/BlueBrain/nexus-kg/blob/master/src/main/resources/app.conf" title="environment variables of KG" target="_blank" rel="noopener noreferrer">environment variables of KG</a></li>
  <li><code>folder</code>: string, mandatory, the name of the folder where files are to be stored for this project</li>
  <li><code>maxFileSize</code>: int, optional, the maximum file size (in bytes) allowed for clients to upload</li>
  <li><code>readPermission</code>: string, optional, defaults to <code>resources/read</code>, the permission required for downloading files from  this storage medium</li>
  <li><code>writePermission</code>: string, optional, defaults to <code>files/write</code>, the permission required for uploading files to  this storage medium</li>
</ul>
<h3><a href="#s3storage" name="s3storage" class="anchor"><span class="anchor-link"></span></a>S3Storage</h3>
<p>This storage type (<code>S3Storage</code>) allows the use S3 compatible object storage as a backend.</p>
<p>The following configuration options are available for this storage type:</p>
<ul>
  <li><code>default</code>: boolean, mandatory, whether the storage resource is the default one for a project</li>
  <li><code>bucket</code>: string, mandatory, the name of the s3 bucket where files are to be stored</li>
  <li><code>endpoint</code>: string, optional, the s3 storage endpoint, defaulting to <code>s3.amazonaws.com</code></li>
  <li><code>accessKey</code>: string, optional, the access key to be used for authenticating to the service</li>
  <li><code>secretKey</code>: string, optional, the secret key to be used for authenticating to the service,  defaults to the value set in the  <a href="https://github.com/BlueBrain/nexus-kg/blob/master/src/main/resources/app.conf" title="environment variables of KG" target="_blank" rel="noopener noreferrer">environment variables of KG</a></li>
  <li><code>maxFileSize</code>: int, optional, the maximum file size (in bytes) allowed for clients to upload</li>
  <li><code>readPermission</code>: string, optional, defaults to <code>resources/read</code>, the permission required for downloading files from  this storage medium</li>
  <li><code>writePermission</code>: string, optional, defaults to <code>files/write</code>, the permission required for uploading files to  this storage medium</li>
</ul>
<h2><a href="#stable-elasticsearch-views" name="stable-elasticsearch-views" class="anchor"><span class="anchor-link"></span></a>Stable ElasticSearch views</h2>
<p>Both <code>ElasticSearchView</code> and <code>AggregateElasticSearchView</code> have been promoted from <em>alpha</em> to <em>stable</em>. Creation or update no longer require the use of the <code>Alpha</code> type to be provided.</p>
<p>New configuration options have been introduced for <code>ElasticSearchView</code>: <code>resourceTypes</code> and <code>includeDeprecated</code>. These options allow a finer grain filtering of the resources considered for indexing by the view.</p>
<h2><a href="#configurable-sparqlview" name="configurable-sparqlview" class="anchor"><span class="anchor-link"></span></a>Configurable SparqlView</h2>
<p>The <code>SparqlView</code> has been promoted from <em>alpha</em> to <em>stable</em>. Creation or update no longer require the use of the <code>Alpha</code> type to be provided.</p>
<p>Configuration options have been introduced such that it is consistent with the <code>ElasticSearchView</code>:</p>
<ul>
  <li><code>resourceSchemas</code>: array of ids, optional, defaults to empty, configures the view to consider for indexing only  the resources constrained by any of the specified schemas; an empty array implies all resources.</li>
  <li><code>resourceTypes</code>: array of ids, optional, defaults to empty, configures the view to consider for indexing only the  the resources that have at least one of the specified types at the revision selected by the <code>tag</code> option; if a <code>tag</code>  is not specified, the latest revision is assumed.</li>
  <li><code>tag</code>: string, optional, selects only the resources that are tagged with the provided value; the tagged revision is  considered for indexing.</li>
  <li><code>includeMetadata</code>: boolean, optional, defaults to false, configures the view to index resources without injecting  the resource metadata in the resource graph.</li>
  <li><code>includeDeprecated</code>: boolean, optional, defaults to true, configures the view to include or exclude the deprecated  resources.</li>
</ul>
<h2><a href="#aggregatesparqlview" name="aggregatesparqlview" class="anchor"><span class="anchor-link"></span></a>AggregateSparqlView</h2>
<p>A new view type has been introduced (<code>AggregateSparqlView</code>), the dual of <code>AggregateElasticSearchView</code> that allows for query time aggregation of results. The configuration is mostly identical to the <code>AggregateElasticSearchView</code> which is merely a set of <code>SparqlView</code> references:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;@id&quot;: &quot;{someid}&quot;,
  &quot;@type&quot;: [ &quot;View&quot;, &quot;AggregateSparqlView&quot;],
  &quot;views&quot;: [
    {
        &quot;project&quot;: &quot;{project}&quot;,
        &quot;viewId&quot;: &quot;{viewId}&quot;
    },
    ...
  ]
}
</code></pre>
<p><strong>Note:</strong> this is not implemented in terms of SPARQL Federation but just simple result aggregation. The query sent to this view is dispatched to all BlazeGraph namespaces and the results are aggregated without preserving the view order. The implication is that triples in one namespace cannot be filtered using predicates from another namespace, furthermore, path traversals cannot be performed between the selected namespaces.</p>
<p>As with the <code>AggregateElasticSearchView</code> since the subject that creates an aggregate view may be different than the subject that queries the view, before dispatching the query the target namespaces are filtered based on the permissions of the caller for each individual view. This behaviour is completely transparent to the client.</p>
<h2><a href="#index-progress" name="index-progress" class="anchor"><span class="anchor-link"></span></a>Index progress</h2>
<p>Indexing in Nexus is asynchronous, meaning once a resource is created or modified the change is not immediately visible in the respective indices (maintained by the views). The reason for this asynchrony is to break the coupling between the stores (Cassandra, ElasticSearch, BlazeGraph) during a client request. This provides many benefits:</p>
<ul>
  <li>reduces the latency of write operations</li>
  <li>requests succeed regardless of the availability of the secondary stores</li>
  <li>transient failures while indexing can be retried</li>
  <li>indices can be rebuilt at will (through project, view updates or by resetting the indexing progress and restarting  the service)</li>
  <li>no synchronization is needed between view management and resource write operations</li>
</ul>
<p>Unfortunately the index progress for each view was not made available to clients which meant users had no way of knowing if their queries hit an index while it was rebuilt or stale.</p>
<p>All views have now been updated to expose a <code>statistics</code> sub-resource that provides information on the state of indexing:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/views/myorg/myproj/nxv:defaultElasticSearchIndex/statistics&quot; | jq
{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/view.json&quot;,
  &quot;delayInSeconds&quot;: 0,
  &quot;discardedEvents&quot;: 0,
  &quot;evaluatedEvents&quot;: 585721,
  &quot;lastEventDateTime&quot;: &quot;2019-08-06T08:47:20.958Z&quot;,
  &quot;lastProcessedEventDateTime&quot;: &quot;2019-08-06T08:47:20.545Z&quot;,
  &quot;processedEvents&quot;: 585721,
  &quot;remainingEvents&quot;: 1,
  &quot;totalEvents&quot;: 585722
}
</code></pre>
<p>&hellip; where:</p>
<ul>
  <li><code>totalEvents</code>: total number of events in the project</li>
  <li><code>processedEvents</code>: number of events that have been considered by the view</li>
  <li><code>remainingEvents</code>: number of events that remain to be considered by the view</li>
  <li><code>discardedEvents</code>: number of events that have been discarded (were not evaluated due to filters, e.g. did not match  schema, tag or type defined in the view)</li>
  <li><code>evaluatedEvents</code>: number of events that have been used to update an index</li>
  <li><code>lastEventDateTime</code>: timestamp of the last event in the project</li>
  <li><code>lastProcessedEventDateTime</code>: timestamp of the last event processed by the view</li>
  <li><code>delayInSeconds</code>: number of seconds between the last processed event timestamp and the last known event timestamp</li>
</ul>
<p>Additionally the service maintains and exposes counters and gauges for monitoring with Prometheus such that data ingestion and indexing velocity and global event counts can be monitored.</p>
<p>For example, the query:</p>
<pre><code>kg_indexer_gauge{project=&quot;myorg/myproj&quot;}
</code></pre>
<p>&hellip; yields:</p>
<pre><code>Element	Value
kg_indexer_gauge{instance=&quot;localhost:9095&quot;,job=&quot;kg&quot;,organization=&quot;myorg&quot;,project=&quot;myorg/myproj&quot;,type=&quot;elasticsearch&quot;,viewId=&quot;https://bluebrain.github.io/nexus/vocabulary/defaultElasticSearchIndex&quot;}	585721
kg_indexer_gauge{instance=&quot;localhost:9095&quot;,job=&quot;kg&quot;,organization=&quot;myorg&quot;,project=&quot;myorg/myproj&quot;,type=&quot;eventCount&quot;}	585722
kg_indexer_gauge{instance=&quot;localhost:9095&quot;,job=&quot;kg&quot;,organization=&quot;myorg&quot;,project=&quot;myorg/myproj&quot;,type=&quot;sparql&quot;,viewId=&quot;https://bluebrain.github.io/nexus/vocabulary/defaultSparqlIndex&quot;}	585617
</code></pre>
<h2><a href="#other-api-improvements" name="other-api-improvements" class="anchor"><span class="anchor-link"></span></a>Other API Improvements</h2>
<p>The release contains numerous improvements to the API, the most significant being the following.</p>
<h3><a href="#resource-content-negotiation" name="resource-content-negotiation" class="anchor"><span class="anchor-link"></span></a>Resource content negotiation</h3>
<p>Added DOT, n-triples formats and compacted/expanded variants for json-ld. The selection of the format is done via the <code>Accept</code> header value and in case of <code>application/ld+json</code> the query param <code>format</code> with <code>compacted</code> or <code>expanded</code> values.</p>
<p>DOT representation is requested using the <code>text/vnd.graphviz</code> value for the <code>Accept</code> header:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; \
-H &quot;Accept: text/vnd.graphviz&quot; \
&quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;

digraph {
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/outgoing&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;2019-07-24T10:58:03.830114Z&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/updatedAt&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;John Doe&quot; [label = &quot;http://schema.org/name&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/incoming&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/incoming&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;2019-02-05T12:52:05.510Z&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/createdAt&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/anonymous&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/updatedBy&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/self&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; 34 [label = &quot;http://schema.org/age&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; 2 [label = &quot;https://bluebrain.github.io/nexus/vocabulary/rev&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; false [label = &quot;https://bluebrain.github.io/nexus/vocabulary/deprecated&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;https://bluebrain.github.io/nexus/schemas/unconstrained.json&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/constrainedBy&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/anonymous&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/createdBy&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://localhost/v1/projects/myorg/myproj&quot; [label = &quot;https://bluebrain.github.io/nexus/vocabulary/project&quot;]
  &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; -&gt; &quot;http://schema.org/Person&quot; [label = &quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&quot;]
}
</code></pre>
<p>N-triples representation is requested using the <code>application/n-triples</code> value for the <code>Accept</code> header:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; \
-H &quot;Accept: application/n-triples&quot; \
&quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;

&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/updatedAt&gt; &quot;2019-07-24T10:58:03.830114Z&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/createdAt&gt; &quot;2019-02-05T12:52:05.510Z&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/createdBy&gt; &quot;http://localhost/v1/anonymous&quot; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/constrainedBy&gt; &lt;https://bluebrain.github.io/nexus/schemas/unconstrained.json&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/outgoing&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://schema.org/Person&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/updatedBy&gt; &quot;http://localhost/v1/anonymous&quot; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/deprecated&gt; &quot;false&quot;^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/project&gt; &lt;http://localhost/v1/projects/myorg/myproj&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;http://schema.org/age&gt; &quot;34&quot;^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/incoming&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/incoming&quot; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/self&gt; &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;https://bluebrain.github.io/nexus/vocabulary/rev&gt; &quot;2&quot;^^&lt;http://www.w3.org/2001/XMLSchema#long&gt; .
&lt;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&gt; &lt;http://schema.org/name&gt; &quot;John Doe&quot; .
</code></pre>
<p>The default representation for <code>application/ld+json</code> is <code>compacted</code>. Passing along the <code>?format=expanded</code> removes the context from the resource:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; \
-H &quot;Accept: application/ld+json&quot; \
&quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3?format=expanded&quot; | jq

{
  &quot;@id&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;@type&quot;: &quot;http://schema.org/Person&quot;,
  &quot;http://schema.org/age&quot;: 34,
  &quot;http://schema.org/name&quot;: &quot;John Doe&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/constrainedBy&quot;: {
    &quot;@id&quot;: &quot;https://bluebrain.github.io/nexus/schemas/unconstrained.json&quot;
  },
  &quot;https://bluebrain.github.io/nexus/vocabulary/createdAt&quot;: &quot;2019-02-05T12:52:05.510Z&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/createdBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/deprecated&quot;: false,
  &quot;https://bluebrain.github.io/nexus/vocabulary/incoming&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/incoming&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/outgoing&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/project&quot;: {
    &quot;@id&quot;: &quot;http://localhost/v1/projects/myorg/myproj&quot;
  },
  &quot;https://bluebrain.github.io/nexus/vocabulary/rev&quot;: 2,
  &quot;https://bluebrain.github.io/nexus/vocabulary/self&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/updatedAt&quot;: &quot;2019-07-24T10:58:03.830114Z&quot;,
  &quot;https://bluebrain.github.io/nexus/vocabulary/updatedBy&quot;: &quot;http://localhost/v1/anonymous&quot;
}
</code></pre>
<h3><a href="#additional-query-params-in-listings" name="additional-query-params-in-listings" class="anchor"><span class="anchor-link"></span></a>Additional query params in listings</h3>
<p>Listing resources now support additional query parameters, namely: <code>type</code>, <code>rev</code>, <code>deprecated</code>, <code>createdBy</code> and <code>updatedBy</code>. This is applies for any resource types (files, schemas, resolvers, storages, views or plain resources).</p>
<p>The general form is:</p>
<pre><code>GET /v1/resources/{org_label}/{project_label}?from={from}&amp;size={size}&amp;deprecated={deprecated}&amp;rev={rev}&amp;type={type}&amp;createdBy={createdBy}&amp;updatedBy={updatedBy}&amp;schema={schema}&amp;q={q}
</code></pre>
<p>&hellip; where:</p>
<ul>
  <li><code>{from}</code>: number, the parameter that describes the offset for the current query; defaults to 0</li>
  <li><code>{size}</code>: number, the parameter that limits the number of results; defaults to 20</li>
  <li><code>{deprecated}</code>: boolean, can be used to filter the resulting resources based on their deprecation status</li>
  <li><code>{rev}</code>: number, can be used to filter the resulting resources based on their revision value</li>
  <li><code>{type}</code>: iri, can be used to filter the resulting resources based on their @type value. This parameter can appear  multiple times, filtering further the @type value.</li>
  <li><code>{createdBy}</code>: iri, can be used to filter the resulting resources based on their creator</li>
  <li><code>{updatedBy}</code>: iri, can be used to filter the resulting resources based on the person which performed the last  update</li>
  <li><code>{schema}</code>: iri, can be used to filter the resulting resources based on the conformant schema</li>
  <li><code>{q}</code>: string, can be provided to select only the resources in the collection that have attribute values matching  (containing) the provided string</li>
</ul>
<h3><a href="#incoming-and-outgoing-links" name="incoming-and-outgoing-links" class="anchor"><span class="anchor-link"></span></a>Incoming and Outgoing links</h3>
<p>The <code>incoming</code> and <code>outgoing</code> sub-resources have been added to all resources in KG such that the provide a listing of known relationships of the current resource.</p>
<p>The general forms are:</p>
<pre><code>GET /v1/resources/{org_label}/{project_label}/{schema_id}/{resource_id}/incoming?from={from}&amp;size={size}
GET /v1/resources/{org_label}/{project_label}/{schema_id}/{resource_id}/outgoing?from={from}&amp;size={size}&amp;includeExternalLinks={includeExternalLinks}
</code></pre>
<p>&hellip; where:</p>
<ul>
  <li><code>{from}</code>: number, the parameter that describes the offset for the current query; defaults to 0</li>
  <li><code>{size}</code>: number, the parameter that limits the number of results; defaults to 20</li>
  <li><code>{includeExternalLinks}</code>: boolean, flag to decide whether or not external links are to be included; external links  are references to resources in other projects, or even resources external to Nexus; defaults to true</li>
</ul>
<p>Additionally, the resource metadata now includes links (<code>_incoming</code> and <code>_outgoing</code>) for these endpoints.</p>
<p>For example, considering the following resource:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;@context&quot;: [
    {
      &quot;@base&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/&quot;,
      &quot;@vocab&quot;: &quot;http://schema.org/&quot;,
      &quot;logo&quot;: {
        &quot;@id&quot;: &quot;http://schema.org/logo&quot;,
        &quot;@type&quot;: &quot;@id&quot;
      }
    },
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;@id&quot;: &quot;7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;@type&quot;: &quot;Person&quot;,
  &quot;age&quot;: 34,
  &quot;logo&quot;: &quot;a713b0e4-c745-4a89-a2ad-84b19c244bd5&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;_self&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/unconstrained.json&quot;,
  &quot;_project&quot;: &quot;http://localhost/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 4,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2019-02-05T12:52:05.510Z&quot;,
  &quot;_createdBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;_updatedAt&quot;: &quot;2019-08-06T09:53:02.151413Z&quot;,
  &quot;_updatedBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;_incoming&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/incoming&quot;,
  &quot;_outgoing&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot;
}
</code></pre>
<p>&hellip; the <code>outgoing</code> link will return the logo relationship along with the <code>paths</code>, <code>@type</code> and resource metadata:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; \
&quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot; | jq

{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;_total&quot;: 1,
  &quot;_results&quot;: [
    {
      &quot;@id&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/a713b0e4-c745-4a89-a2ad-84b19c244bd5&quot;,
      &quot;@type&quot;: &quot;https://bluebrain.github.io/nexus/vocabulary/File&quot;,
      &quot;paths&quot;: &quot;http://schema.org/logo&quot;,
      &quot;_self&quot;: &quot;http://localhost/v1/files/myorg/myproj/http://localhost/v1/resources/myorg/myproj/_/a713b0e4-c745-4a89-a2ad-84b19c244bd5&quot;,
      &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/file.json&quot;,
      &quot;_project&quot;: &quot;http://localhost/v1/projects/myorg/myproj&quot;,
      &quot;_rev&quot;: 1,
      &quot;_deprecated&quot;: false,
      &quot;_createdAt&quot;: &quot;2019-07-24T10:57:32.707Z&quot;,
      &quot;_createdBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
      &quot;_updatedAt&quot;: &quot;2019-07-24T10:57:32.707Z&quot;,
      &quot;_updatedBy&quot;: &quot;http://localhost/v1/anonymous&quot;
    }
  ]
}
</code></pre>
<h3><a href="#resource-id-resolution" name="resource-id-resolution" class="anchor"><span class="anchor-link"></span></a>Resource id resolution</h3>
<p>Resolvers provide means of retrieving dependent resources, but until now they offered no means to see these resources or their origin (i.e. through their metadata).</p>
<p>The release adds the ability to query resolvers or the entire collection of resolvers (respecting their priority) for resource ids such that resolved resources can be viewed.</p>
<p>The general query form is:</p>
<pre><code>GET /v1/resolvers/{org_label}/{project_label}/{resolver_id}/{resource_id}
</code></pre>
<p>Additionally, the <code>resolver_id</code> can be omitted (replaced with <code>_</code>) such that the entire collection of non-deprecated resolvers in the project is used to resolve the resource id:</p>
<pre><code>GET /v1/resolvers/{org_label}/{project_label}/_/{resource_id}
</code></pre>
<p>The desired tag or revision can be requested via the <code>tag</code> or <code>rev</code> query params. These params are mutually exclusive.</p>
<p>Example, using the default <code>InProject</code> resolver to fetch a specific resource:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; \
&quot;http://localhost/v1/resolvers/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot; | jq

{
  &quot;@context&quot;: [
    {
      &quot;@base&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/&quot;,
      &quot;@vocab&quot;: &quot;http://schema.org/&quot;,
      &quot;logo&quot;: {
        &quot;@id&quot;: &quot;http://schema.org/logo&quot;,
        &quot;@type&quot;: &quot;@id&quot;
      }
    },
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;@id&quot;: &quot;7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;@type&quot;: &quot;Person&quot;,
  &quot;age&quot;: 34,
  &quot;logo&quot;: &quot;a713b0e4-c745-4a89-a2ad-84b19c244bd5&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;_self&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3&quot;,
  &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/unconstrained.json&quot;,
  &quot;_project&quot;: &quot;http://localhost/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 4,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2019-02-05T12:52:05.510Z&quot;,
  &quot;_createdBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;_updatedAt&quot;: &quot;2019-08-06T09:53:02.151413Z&quot;,
  &quot;_updatedBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;_incoming&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/incoming&quot;,
  &quot;_outgoing&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3/outgoing&quot;
}
</code></pre>
<p>See <a href="../delta/api/current/kg-resolvers-api.html">resolvers API</a> for more details.</p>
<h3><a href="#paginate-beyond-10-000-results" name="paginate-beyond-10-000-results" class="anchor"><span class="anchor-link"></span></a>Paginate beyond 10,000 results</h3>
<p>The KG service uses ElasticSearch with a default project view to power listing of resources within a project. Due to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html#request-body-search-from-size" title="restriction" target="_blank" rel="noopener noreferrer">restriction</a> set by this store when using <code>from</code> and <code>size</code> resources could not be listed after reaching 10,000 with the applied additional filters.</p>
<p>To address this issue, a new link (<code>_next</code>) has been added to all listing results such that following this link will continue the pagination over the imposed limit; the implementation relies on the searchAfter API which does not suffer from this restriction:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/resources/myorg/myproj?size=2&quot; | jq

{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;_total&quot;: 8,
  &quot;_results&quot;: [{...}, {...}],
  &quot;_next&quot;: &quot;http://localhost/v1/resources/myorg/myproj?size=2&amp;after=%5B1549370708063,%22https://bluebrain.github.io/nexus/vocabulary/defaultSparqlIndex%22%5D&quot;
}
</code></pre>
<p>Following the <code>_next</code> link yields additional two results and a new <code>_next</code> value to continue from there:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/resources/myorg/myproj?size=2&amp;after=%5B1549370708063,%22https://bluebrain.github.io/nexus/vocabulary/defaultSparqlIndex%22%5D&quot; | jq

{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;_total&quot;: 8,
  &quot;_results&quot;: [{...}, {...}],
  &quot;_next&quot;: &quot;http://localhost/v1/resources/myorg/myproj?size=2&amp;after=%5B1549371125510,%22http://localhost/v1/resources/myorg/myproj/_/7fb43a6a-33f2-4106-8cb3-531f2d67c1e3%22%5D&quot;
}
</code></pre>
<h3><a href="#organization-and-project-uuids" name="organization-and-project-uuids" class="anchor"><span class="anchor-link"></span></a>Organization and Project UUIDs</h3>
<p>Internally, the organization and project labels are mapped to UUIDs to allow future functionality to relabel organizations and / or projects. These unique ids are exposed in the organization and project representations and in the event log through Server Sent Events, but until this release there was no way to resolve these UUIDS to organizations and / or projects.</p>
<p>The entire API now accepts UUIDs instead of organization or project segments, for example, getting the project and organization uuid:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/projects/myorg/myproj&quot; | jq

{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/admin.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;@id&quot;: &quot;http://localhost/v1/projects/myorg/myproj&quot;,
  &quot;@type&quot;: &quot;Project&quot;,
  &quot;base&quot;: &quot;http://localhost/v1/resources/myorg/myproj/_/&quot;,
  &quot;vocab&quot;: &quot;http://schema.org/&quot;,
  &quot;apiMappings&quot;: [],
  &quot;_uuid&quot;: &quot;fadc3e6c-fca0-45d8-b65c-a984a012c689&quot;,
  &quot;_label&quot;: &quot;myproj&quot;,
  &quot;_organizationUuid&quot;: &quot;d363ee88-5426-420a-8078-f8e9d9652fe9&quot;,
  &quot;_organizationLabel&quot;: &quot;myorg&quot;,
  &quot;_rev&quot;: 3,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2019-02-06T14:57:28.680Z&quot;,
  &quot;_createdBy&quot;: &quot;http://localhost/v1/anonymous&quot;,
  &quot;_updatedAt&quot;: &quot;2019-02-06T14:57:28.680Z&quot;,
  &quot;_updatedBy&quot;: &quot;http://localhost/v1/anonymous&quot;
}
</code></pre>
<p>&hellip; and using them to list resources:</p>
<pre class="prettyprint"><code class="language-bash">curl -s -H &quot;Authorization: Bearer $TOKEN&quot; &quot;http://localhost/v1/resources/d363ee88-5426-420a-8078-f8e9d9652fe9/fadc3e6c-fca0-45d8-b65c-a984a012c689?size=2&quot; | jq

{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;
  ],
  &quot;_total&quot;: 8,
  &quot;_results&quot;: [{...}, {...}],
  &quot;_next&quot;: &quot;http://localhost/v1/resources/d363ee88-5426-420a-8078-f8e9d9652fe9/fadc3e6c-fca0-45d8-b65c-a984a012c689?size=2&amp;after=%5B1549370708063,%22https://bluebrain.github.io/nexus/vocabulary/defaultSparqlIndex%22%5D&quot;
}

</code></pre>
<h2><a href="#nexus-web-improvements" name="nexus-web-improvements" class="anchor"><span class="anchor-link"></span></a>Nexus Web improvements</h2>
<p>This is the first fully supported version of Nexus Web, now freshly graduated from beta. Its v1.1 version reflects the feature set supporting the Nexus v1.1 release and will be kept in step with that project.</p>
<h4><a href="#" name="" class="anchor"><span class="anchor-link"></span></a><a href="https://github.com/BlueBrain/nexus-web/releases/tag/v1.1.0">v1.1 Release Notes</a></h4>
<h3><a href="#feature-highlights" name="feature-highlights" class="anchor"><span class="anchor-link"></span></a>Feature highlights</h3>
<p>The login page now allows users to select the OpenId Connect provider:</p><div class="half">
<p><img src="assets/img/nexus-web-login.png" alt="Select Provider" /></p></div>
<p>Ability to discriminate between Nexus specific resources (eg. Views, Resolvers) and user created resources:</p><div class="half">
<p><img src="assets/img/nexus-web-mgmt-resources.png" alt="Management Resources" /></p></div>
<p>Display the project ACLs via <em>View Project&rsquo;s permissions</em> link in the right panel:</p><div class="half">
<p><img src="assets/img/nexus-web-right-panel.png" alt="Right Panel" /></p></div><div>
<p><img src="assets/img/nexus-web-permissions.png" alt="Project Permissions" /></p></div>
<p>Ability to query user defined views, by using the drop-down presented in the query interface and additionally showing the index progress for the selected view (either as a green check if up to date, or a gauge with the percentage otherwise):</p><div class="half">
<p><img src="assets/img/nexus-web-select-view.png" alt="Select View" /></p></div>
<h2><a href="#other-changes" name="other-changes" class="anchor"><span class="anchor-link"></span></a>Other changes</h2>
<ul>
  <li>The Javascript and Python SDKs and the CLI have been updated to support the additionally introduced functionality.</li>
  <li>The http client in the Python SDK / CLI has been configured to use connection pooling which brings a 4x+ performance  boost due to removing the latency penalty for opening new connections.</li>
  <li>The CLI has been updated such that a user can login with username and password if the selected realm and provided  client id supports Direct Access Grants. By convention the CLI defaults to <code>nexus-public</code> client.</li>
  <li>ElasticSearch compatibility has been updated to 7.x, please see the  <a href="v1.0-to-v1.1-migration.html">migration instructions</a>.</li>
  <li>Other <a href="https://github.com/BlueBrain/nexus/issues?q=is%3Aissue+is%3Aclosed+milestone%3AV1.1+label%3Abug+label%3Aservices" title="Bug Fixes" target="_blank" rel="noopener noreferrer">Bug Fixes</a>.</li>
</ul>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/releases/v1.1-release-notes.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
51dd5463
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../docs/releases/v1.2-release-notes.html" title="v1.2 Release Notes" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
v1.2 Release Notes
</span>
</div>
</a>
<a href="../../docs/releases/v1.0-to-v1.1-migration.html" title="v1.0 To v1.1 Migration" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
v1.0 To v1.1 Migration
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
Â© 2017-2020 <a href="https://epfl.ch/">EPFL</a> | <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://gitter.im/BlueBrain/nexus" class="md-footer-social__link fa fa-globe"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../.././public/js/gtm.js"></script>
</body>
</html>
