<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.1, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../../.././assets/img/favicon-32x32.png">
<title>Archives Â· Blue Brain Nexus</title>
<link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../../lib/prettify/prettify.css">
<script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../../../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
Archives
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../../../docs/getting-started/nexus-concepts.html" class="page">Brief introduction of Nexus concepts</a></li>
    <li><a href="../../../../docs/getting-started/running-nexus/index.html" class="page">Running Nexus</a></li>
  </ul></li>
  <li><a href="../../../../docs/tutorial/index.html" class="page">Tutorials</a>
  <ul>
    <li><a href="../../../../docs/tutorial/getting-started/index.html" class="page">Quick Start Guide</a>
    <ul>
      <li><a href="../../../../docs/tutorial/getting-started/setup/index.html" class="page">Set up</a></li>
      <li><a href="../../../../docs/tutorial/getting-started/quick-start/index.html" class="page">Quick Start</a></li>
      <li><a href="../../../../docs/tutorial/getting-started/dataset/index.html" class="page">The MovieLens Dataset</a></li>
    </ul></li>
    <li><a href="../../../../docs/tutorial/knowledge-graph/index.html" class="page">Understanding knowledge graphs</a>
    <ul>
      <li><a href="../../../../docs/tutorial/knowledge-graph/thinking-in-graph.html" class="page">Thinking in graph</a></li>
      <li><a href="../../../../docs/tutorial/knowledge-graph/understanding-jsonld.html" class="page">Understanding JSON-LD</a></li>
      <li><a href="../../../../docs/tutorial/knowledge-graph/querying-knowledge-graph-sparql.html" class="page">Querying knowledge graph using SPARQL</a></li>
      <li><a href="../../../../docs/tutorial/knowledge-graph/querying-knowledge-graph-elasticsearch.html" class="page">Querying knowledge graph using Elasticsearch</a></li>
    </ul></li>
    <li><a href="../../../../docs/tutorial/linking-data/index.html" class="page">Linking data on the web</a></li>
    <li><a href="../../../../docs/tutorial/build-recommender/index.html" class="page">Building a Data Pipeline for a Recommender System</a></li>
  </ul></li>
  <li><a href="../../../../docs/api/current/index.html" class="page">API reference</a>
  <ul>
    <li><a href="../../../../docs/api/current/anatomy.html" class="page">Services anatomy</a></li>
    <li><a href="../../../../docs/api/current/operating-on-resources.html" class="page">Operating on resources</a></li>
    <li><a href="../../../../docs/api/current/admin/index.html" class="page">Admin API</a>
    <ul>
      <li><a href="../../../../docs/api/current/admin/admin-orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../../../docs/api/current/admin/admin-projects-api.html" class="page">Projects</a></li>
    </ul></li>
    <li><a href="../../../../docs/api/current/kg/index.html" class="page">Knowledge Graph API</a>
    <ul>
      <li><a href="../../../../docs/api/current/kg/kg-schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../../../docs/api/current/kg/kg-resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../../../docs/api/current/kg/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../../../docs/api/current/kg/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../../../docs/api/current/kg/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../../../docs/api/current/kg/views/composite-view-api.html" class="page">CompositeView</a></li>
        <li><a href="../../../../docs/api/current/kg/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../../../docs/api/current/kg/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
      </ul></li>
      <li><a href="../../../../docs/api/current/kg/kg-storages-api.html" class="page">Storages</a></li>
      <li><a href="../../../../docs/api/current/kg/kg-files-api.html" class="page">Files</a></li>
      <li><a href="../../../../docs/api/current/kg/kg-archives-api.html" class="active page">Archives</a></li>
      <li><a href="../../../../docs/api/current/kg/kg-resources-api.html" class="page">Resources</a></li>
    </ul></li>
    <li><a href="../../../../docs/api/current/iam/index.html" class="page">Identity &amp; Access Management API</a>
    <ul>
      <li><a href="../../../../docs/api/current/iam/iam-realms-api.html" class="page">Realms</a></li>
      <li><a href="../../../../docs/api/current/iam/authentication.html" class="page">Authentication</a></li>
      <li><a href="../../../../docs/api/current/iam/iam-permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../../../docs/api/current/iam/iam-acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../../../docs/api/current/iam/iam-identities.html" class="page">Identities</a></li>
    </ul></li>
    <li><a href="../../../../docs/api/current/error-signaling.html" class="page">Error Signaling</a></li>
  </ul></li>
  <li><a href="../../../../docs/nexus-web/index.html" class="page">Nexus Web</a>
  <ul>
    <li><a href="../../../../docs/nexus-web/studio/index.html" class="page">Studio</a>
    <ul>
      <li><a href="../../../../docs/nexus-web/studio/creating-a-studio.html" class="page">Creating a Studio, Step-by-step</a></li>
      <li><a href="../../../../docs/nexus-web/studio/workspaces.html" class="page">Workspaces</a></li>
      <li><a href="../../../../docs/nexus-web/studio/dashboards.html" class="page">Dashboards</a></li>
      <li><a href="../../../../docs/nexus-web/studio/plugin-development.html" class="page">Nexus Plugins development</a></li>
    </ul></li>
    <li><a href="../../../../docs/nexus-web/browse/index.html" class="page">Browsing data</a></li>
    <li><a href="../../../../docs/nexus-web/admin/index.html" class="page">Administrating Organizations &amp; Projects</a></li>
    <li><a href="../../../../docs/nexus-web/resource-view/index.html" class="page">Resource Details View</a></li>
  </ul></li>
  <li><a href="../../../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../../../docs/releases/v1.4-release-notes.html" class="page">v1.4 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.3-to-v1.4-migration.html" class="page">v1.3 To v1.4 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.3-release-notes.html" class="page">v1.3 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.2-to-v1.3-migration.html" class="page">v1.2 To v1.3 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.2-release-notes.html" class="page">v1.2 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.1-release-notes.html" class="page">v1.1 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.0-to-v1.1-migration.html" class="page">v1.0 To v1.1 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.0-release-notes.html" class="page">v1.0 Release Notes</a></li>
  </ul></li>
  <li><a href="../../../../docs/faq.html" class="page">Frequently asked questions</a></li>
  <li><a href="../../../../docs/additional-info/index.html" class="page">Additional Information</a>
  <ul>
    <li><a href="../../../../docs/additional-info/projections.html" class="page">Indexing data in other systems</a></li>
    <li><a href="../../../../docs/additional-info/sdk.html" class="page">SDKs for Nexus</a></li>
    <li><a href="../../../../docs/additional-info/architecture/index.html" class="page">System Architecture</a>
    <ul>
      <li><a href="../../../../docs/additional-info/architecture/use-cases.html" class="page">Use Cases</a></li>
      <li><a href="../../../../docs/additional-info/architecture/components.html" class="page">Components</a></li>
      <li><a href="../../../../docs/additional-info/architecture/integration.html" class="page">Integration</a></li>
    </ul></li>
    <li><a href="../../../../docs/additional-info/benchmarks/index.html" class="page">Benchmarks</a></li>
    <li><a href="../../../../docs/additional-info/web-applications-standards.html" class="page">Web applications development best practices</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archives" class="header">Archives</a>
  <ul>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archive-lifecycle" class="header">Archive lifecycle</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archive-format" class="header">Archive format</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#create-an-archive-using-post" class="header">Create an archive using POST</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#create-an-archive-using-put" class="header">Create an archive using PUT</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#fetch-an-archive" class="header">Fetch an archive</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> b02b765f
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archives" class="header">Archives</a>
  <ul>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archive-lifecycle" class="header">Archive lifecycle</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#archive-format" class="header">Archive format</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#create-an-archive-using-post" class="header">Create an archive using POST</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#create-an-archive-using-put" class="header">Create an archive using PUT</a></li>
    <li><a href="../../../../docs/api/current/kg/kg-archives-api.html#fetch-an-archive" class="header">Fetch an archive</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#archives" name="archives" class="anchor"><span class="anchor-link"></span></a>Archives</h1>
<p>An archive is a collection of resources stored inside an archive file. The archiving format chosen for this purpose is tar (or tarball). Archive resources are rooted in the <code>/v1/archives/{org_label}/{project_label}/</code> collection.</p>
<p>Each archive&hellip; </p>
<ul>
  <li>belongs to a <code>project</code> identifier by the label <code>{project_label}</code></li>
  <li>inside an <code>organization</code> identifier by the label <code>{org_label}</code></li>
</ul>
<p>Access to resources in the system depends on the access control list set for them. Depending on the access control list, a caller may need to prove its identity by means of an <strong>access token</strong> passed to the <code>Authorization</code> header (<code>Authorization: Bearer {token}</code>). Please visit <a href="../iam/authentication.html">Authentication</a> to learn more about how to retrieve an access token.</p><div class="callout note tip"><div class="callout-title">Authorization notes</div>
<p>When modifying archives, the caller must have <code>archives/write</code> permissions on the current path of the project or the ancestor paths.</p>
<p>When reading archives, the caller must have <code>resources/read</code> permissions on the current path of the project or the ancestor paths.</p></div>
<h2><a href="#archive-lifecycle" name="archive-lifecycle" class="anchor"><span class="anchor-link"></span></a>Archive lifecycle</h2>
<p>Contrarily to the rest of the platform resources, archives are not persisted resources, given their nature. Therefore there are no update, tag or deprecation operations available on archive resources.</p>
<p>An archive resource will be automatically erased from the system after certain after certain time. This time is configurable (env. variable <code>ARCHIVES_CACHE_INVALIDATE_AFTER</code>) and it defaults to 5 hours.</p>
<h2><a href="#archive-format" name="archive-format" class="anchor"><span class="anchor-link"></span></a>Archive format</h2>
<pre><code>{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;{resource_id}&quot;,
            &quot;project&quot;: &quot;{project}&quot;,
            &quot;path&quot;: &quot;{path}&quot;,
            &quot;originalSource&quot;: &quot;{originalSource}&quot;,
            &quot;rev&quot;: &quot;{rev}&quot;,
            &quot;tag&quot;: &quot;{tag}&quot;
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;{resource_id}&quot;,
            &quot;project&quot;: &quot;{project}&quot;,
            &quot;path&quot;: &quot;{path}&quot;,
            &quot;rev&quot;: &quot;{rev}&quot;,
            &quot;tag&quot;: &quot;{tag}&quot;
        },
        {...}       
    ]
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{resource_id}</code>: Iri - the @id value of the resource to be added to the archive.</li>
  <li><code>{project}</code>: String - the project (in the format &lsquo;myorg/myproject&rsquo;) where the specified resource belongs. This field is optional. It defaults to the current project.</li>
  <li><code>{path}</code>: Path - the relative path on the archive where this resource is going to stored. This field is optional. It defaults to <code>{project}/{resourceId}.json</code> for a Resource type and <code>{project}/{filename}</code> for File type.</li>
  <li><code>{originalSource}</code>: Boolean - flag to decide the whether to fetch the original payload or the payload with metadata and JSON-LD algorithm applied. This field optional and is only allowed for Resource type. It defaults to true.</li>
  <li><code>{rev}</code>: Long - the revision of the resource. This field is optional. It defaults to the latest revision.</li>
  <li><code>{tag}</code>: String - the tag of the resource. This field is optional. This field cannot be present at the same time as <code>rev</code> field.</li>
</ul>
<p>In order to decide whether we want to select a resource or a file, the <code>@type</code> discriminator is used with the following possibilities:</p>
<ul>
  <li><code>Resource</code>: targets a resource</li>
  <li><code>File</code>: targets a file</li>
</ul>
<h2><a href="#create-an-archive-using-post" name="create-an-archive-using-post" class="anchor"><span class="anchor-link"></span></a>Create an archive using POST</h2>
<p>This endpoint is used to describe the archive and to subsequently consume it.</p>
<pre><code>POST /v1/archives/{org_label}/{project_label}
</code></pre>
<p>The json payload:</p>
<ul>
  <li>If the <code>@id</code> value is found on the payload, this @id will be used.</li>
  <li>If the <code>@id</code> value is not found on the payload, an @id will be generated as follows: <code>base:{UUID}</code>. The <code>base</code> is the <code>prefix</code> defined on the resource&rsquo;s project (<code>{project_label}</code>).</li>
</ul>
<p>The response will be an HTTP 303 Location redirect, which will point to the url where to consume the archive (tarball).</p>
<p>The following diagram can help to understand the HTTP exchange <img src="../assets/archives/post-redirect-get.png" alt="post-redirect-get" title="Post/Redirect/Get archive" /></p>
<p><strong>Example</strong></p>
<p>The following example shows how to create an archive containing 3 files. 2 of them are resources and the other is a file. As a response, the tarball will be offered.</p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -L &quot;https://nexus.example.com/v1/archives/myorg/myproject&quot; -H &quot;Content-Type: application/json&quot; -H &quot;Accept: */*&quot; -d &#39;{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}
&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}</code></pre></dd>
</dl>
<h2><a href="#create-an-archive-using-put" name="create-an-archive-using-put" class="anchor"><span class="anchor-link"></span></a>Create an archive using PUT</h2>
<p>This alternative endpoint to create an archive is useful in case you want to split the creation of the archive resource and the consumption of it. </p>
<p>It can also be useful in cases where one user wants to create the definition of the archive and share the link with another user who then is going to consume it.</p>
<pre><code>PUT /v1/archives/{org_label}/{project_label}/{archive_id}
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive-put.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/archives/myorg/myproject/myarchive&quot; -H &quot;Content-Type: application/json&quot; -d &#39;{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}
&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive-created.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;,
  &quot;@id&quot;: &quot;https://nexus.example.com/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;@type&quot;: &quot;https://bluebrain.github.io/nexus/vocabulary/Archive&quot;,
  &quot;_self&quot;: &quot;https://nexus.example.com/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/archive&quot;,
  &quot;_project&quot;: &quot;https://nexus.example.com/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 1,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2018-09-17T14:54:42.939Z&quot;,
  &quot;_createdBy&quot;: &quot;https://nexus.example.com/v1/realms/myrealm/users/john&quot;,
  &quot;_updatedAt&quot;: &quot;2018-09-17T14:54:42.939Z&quot;,
  &quot;_updatedBy&quot;: &quot;https://nexus.example.com/v1/realms/myrealm/users/john&quot;
}</code></pre></dd>
</dl>
<p>Note that if the payload contains an @id different from the <code>{archive_id}</code>, the request will fail.</p>
<h2><a href="#fetch-an-archive" name="fetch-an-archive" class="anchor"><span class="anchor-link"></span></a>Fetch an archive</h2>
<p>When fetching an archive, the response format can be chosen through HTTP content negotiation, using the <strong>Accept</strong> HTTP header.</p>
<ul>
  <li><strong>application/ld+json</strong>: JSON-LD output response to retrieve the archive metadata. Further specifying the query parameter <code>format=compacted|expanded</code> will provide with the JSON-LD <a href="https://www.w3.org/TR/json-ld11/#compacted-document-form">compacted document form</a> or the <a href="https://www.w3.org/TR/json-ld11/#expanded-document-form">expanded document form</a>.</li>
  <li><strong>*/*</strong>: retrieves the archive content.</li>
  <li><strong>application/x-tar</strong>: retrieves the archive content.</li>
</ul>
<pre><code>GET /v1/archives/{org_label}/{project_label}/{archive_id}
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request (tarball)
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive-fetch.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/archives/myorg/myproject/myarchive&quot; -H &quot;Accept: application/x-tar&quot; -o output.tar</code></pre></dd>
  <dt>Request (metadata)
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive-fetch-meta.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/archives/myorg/myproject/myarchive&quot; -H &quot;Accept: application/json&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/assets/archives/archive-fetched-meta.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/resource.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/archive.json&quot;
  ],
  &quot;@id&quot;: &quot;myarchive&quot;,
  &quot;@type&quot;: &quot;Archive&quot;,
  &quot;resources&quot; : [
    {
      &quot;@type&quot;: &quot;Resource&quot;,
      &quot;resourceId&quot;: &quot;https://nexus.example.com/resource1&quot;,
      &quot;rev&quot;: 2
    },
    {
      &quot;@type&quot;: &quot;Resource&quot;,
      &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
      &quot;project&quot;: &quot;myorg/myproject2&quot;,
      &quot;originalSource&quot;: false
    },
    {
      &quot;@type&quot;: &quot;File&quot;,
      &quot;resourceId&quot;: &quot;https://nexus.example.com/resource2&quot;,
      &quot;project&quot;: &quot;myorg/myproject2&quot;,
      &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
    }
  ],
  &quot;_self&quot;: &quot;https://nexus.example.com/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/archive&quot;,
  &quot;_project&quot;: &quot;https://nexus.example.com/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 1,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2018-09-17T14:54:42.939Z&quot;,
  &quot;_createdBy&quot;: &quot;https://nexus.example.com/v1/realms/myrealm/users/john&quot;,
  &quot;_updatedAt&quot;: &quot;2018-09-17T14:54:42.939Z&quot;,
  &quot;_updatedBy&quot;: &quot;https://nexus.example.com/v1/realms/myrealm/users/john&quot;
  &quot;_expiresInSeconds&quot;: 17530
}</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/api/current/kg/kg-archives-api.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
b02b765f
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../../docs/api/current/kg/kg-files-api.html" title="Files" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Files
</span>
</div>
</a>
<a href="../../../../docs/api/current/kg/kg-resources-api.html" title="Resources" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Resources
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
Â© 2017-2020 <a href="https://epfl.ch/">EPFL</a> | <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://gitter.im/BlueBrain/nexus" class="md-footer-social__link fa fa-globe"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../../."}})</script>
<script type="text/javascript" src="../../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../../.././public/js/gtm.js"></script>
</body>
</html>
