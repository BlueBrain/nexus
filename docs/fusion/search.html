<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.1, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../.././assets/img/favicon-32x32.png">
<title>Search · Blue Brain Nexus</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
Search
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../docs/getting-started/try-nexus.html" class="page">Try Nexus</a></li>
    <li><a href="../../docs/getting-started/running-nexus/index.html" class="page">Running Nexus</a>
    <ul>
      <li><a href="../../docs/getting-started/running-nexus/configuration/index.html" class="page">Nexus configuration</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../docs/releases/v1.5-release-notes.html" class="page">v1.5 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.4-to-v1.5-migration.html" class="page">v1.4 To v1.5 Migration</a></li>
    <li><a href="../../docs/releases/v1.4-release-notes.html" class="page">v1.4 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.3-to-v1.4-migration.html" class="page">v1.3 To v1.4 Migration</a></li>
    <li><a href="../../docs/releases/v1.3-release-notes.html" class="page">v1.3 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.2-to-v1.3-migration.html" class="page">v1.2 To v1.3 Migration</a></li>
    <li><a href="../../docs/releases/v1.2-release-notes.html" class="page">v1.2 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.1-release-notes.html" class="page">v1.1 Release Notes</a></li>
    <li><a href="../../docs/releases/v1.0-to-v1.1-migration.html" class="page">v1.0 To v1.1 Migration</a></li>
    <li><a href="../../docs/releases/v1.0-release-notes.html" class="page">v1.0 Release Notes</a></li>
  </ul></li>
  <li><a href="../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../docs/fusion/plugins.html" class="page">Plugins</a></li>
    <li><a href="../../docs/fusion/studio.html" class="page">Studios</a></li>
    <li><a href="../../docs/fusion/search.html" class="active page">Search</a></li>
    <li><a href="../../docs/fusion/admin.html" class="page">Admin</a></li>
    <li><a href="../../docs/fusion/workflow.html" class="page">Workflow (alpha)</a></li>
    <li><a href="../../docs/fusion/add-your-own-app.html" class="page">Add your own App</a></li>
  </ul></li>
  <li><a href="../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../docs/delta/api/current/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../docs/delta/api/current/content-negotiation.html" class="page">Content Negotiation</a></li>
      <li><a href="../../docs/delta/api/current/error-signaling.html" class="page">Error Signaling</a></li>
      <li><a href="../../docs/delta/api/current/version.html" class="page">Version endpoint</a></li>
      <li><a href="../../docs/delta/api/current/authentication.html" class="page">Authentication &amp; Authorization</a></li>
      <li><a href="../../docs/delta/api/current/iam-identities.html" class="page">Identities</a></li>
      <li><a href="../../docs/delta/api/current/iam-permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../docs/delta/api/current/iam-realms-api.html" class="page">Realms</a></li>
      <li><a href="../../docs/delta/api/current/iam-acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../docs/delta/api/current/admin-orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../docs/delta/api/current/admin-projects-api.html" class="page">Projects</a></li>
      <li><a href="../../docs/delta/api/current/kg-schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../docs/delta/api/current/kg-resources-api.html" class="page">Resources</a></li>
      <li><a href="../../docs/delta/api/current/kg-resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../docs/delta/api/current/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../docs/delta/api/current/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../docs/delta/api/current/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../docs/delta/api/current/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../docs/delta/api/current/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
        <li><a href="../../docs/delta/api/current/views/composite-view-api.html" class="page">CompositeView</a></li>
      </ul></li>
      <li><a href="../../docs/delta/api/current/kg-storages-api.html" class="page">Storages</a></li>
      <li><a href="../../docs/delta/api/current/kg-files-api.html" class="page">Files</a></li>
      <li><a href="../../docs/delta/api/current/kg-archives-api.html" class="page">Archives</a></li>
    </ul></li>
    <li><a href="../../docs/delta/plugins/index.html" class="page">Plugins</a></li>
    <li><a href="../../docs/delta/benchmarks/index.html" class="page">Benchmarks</a>
    <ul>
      <li><a href="../../docs/delta/benchmarks/v1.4.2.html" class="page">Benchmarks v1.4.2</a></li>
      <li><a href="../../docs/delta/benchmarks/v1.2.1.html" class="page">Benchmarks v1.2.1</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../docs/utilities/index.html" class="page">Utilities</a>
  <ul>
    <li><a href="../../docs/utilities/projections.html" class="page">Indexing data in other systems</a></li>
    <li><a href="../../docs/utilities/nexus-python-cli.html" class="page">MovieLens Tutorial using the Nexus Python CLI</a></li>
  </ul></li>
  <li><a href="../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../docs/fusion/search.html#search" class="header">Search</a>
  <ul>
    <li><a href="../../docs/fusion/search.html#powered-by-elastic-search-views" class="header">Powered by Elastic Search Views</a></li>
    <li><a href="../../docs/fusion/search.html#search-config" class="header">Search Config</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#where-are-searchconfigs-stored-" class="header">Where are SearchConfigs stored?</a></li>
      <li><a href="../../docs/fusion/search.html#example-searchconfig" class="header">Example SearchConfig</a></li>
      <li><a href="../../docs/fusion/search.html#facets" class="header">Facets</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#defaults" class="header">Defaults</a></li>
      </ul></li>
      <li><a href="../../docs/fusion/search.html#fields" class="header">Fields</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#special-properties" class="header">Special properties</a></li>
        <li><a href="../../docs/fusion/search.html#defaults" class="header">Defaults</a></li>
      </ul></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#search-results" class="header">Search Results</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#result-grid" class="header">Result Grid</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#result-view-cards" class="header">Result View Cards</a></li>
      </ul></li>
      <li><a href="../../docs/fusion/search.html#result-table" class="header">Result Table</a></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#search-bar" class="header">Search Bar</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#hotkey-" class="header">Hotkey!</a></li>
      <li><a href="../../docs/fusion/search.html#caveats" class="header">Caveats</a></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#action-bar" class="header">Action Bar</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#exporting" class="header">Exporting</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#csv" class="header">CSV</a></li>
        <li><a href="../../docs/fusion/search.html#as-es-query" class="header">As ES Query</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.0.0+1-285838af*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../docs/fusion/search.html#search" class="header">Search</a>
  <ul>
    <li><a href="../../docs/fusion/search.html#powered-by-elastic-search-views" class="header">Powered by Elastic Search Views</a></li>
    <li><a href="../../docs/fusion/search.html#search-config" class="header">Search Config</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#where-are-searchconfigs-stored-" class="header">Where are SearchConfigs stored?</a></li>
      <li><a href="../../docs/fusion/search.html#example-searchconfig" class="header">Example SearchConfig</a></li>
      <li><a href="../../docs/fusion/search.html#facets" class="header">Facets</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#defaults" class="header">Defaults</a></li>
      </ul></li>
      <li><a href="../../docs/fusion/search.html#fields" class="header">Fields</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#special-properties" class="header">Special properties</a></li>
        <li><a href="../../docs/fusion/search.html#defaults" class="header">Defaults</a></li>
      </ul></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#search-results" class="header">Search Results</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#result-grid" class="header">Result Grid</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#result-view-cards" class="header">Result View Cards</a></li>
      </ul></li>
      <li><a href="../../docs/fusion/search.html#result-table" class="header">Result Table</a></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#search-bar" class="header">Search Bar</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#hotkey-" class="header">Hotkey!</a></li>
      <li><a href="../../docs/fusion/search.html#caveats" class="header">Caveats</a></li>
    </ul></li>
    <li><a href="../../docs/fusion/search.html#action-bar" class="header">Action Bar</a>
    <ul>
      <li><a href="../../docs/fusion/search.html#exporting" class="header">Exporting</a>
      <ul>
        <li><a href="../../docs/fusion/search.html#csv" class="header">CSV</a></li>
        <li><a href="../../docs/fusion/search.html#as-es-query" class="header">As ES Query</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#search" name="search" class="anchor"><span class="anchor-link"></span></a>Search</h1>
<p>The Search SubApp enables users to search or filter data stored in Nexus Delta in various projects in a configurable way. It&rsquo;s intended as a global search tool for your Nexus instance.</p>
<p><img src="assets/search-breakdown.png" alt="Search SubApp" /></p>
<p>The administrator who configures one or more <code>SearchConfigs</code> for their Search SubApp has power over what data is searchable, and how it will render in the Search interface.</p><div class="callout note "><div class="callout-title">Note</div>
<h3><a href="#powered-by-elastic-search-views" name="powered-by-elastic-search-views" class="anchor"><span class="anchor-link"></span></a>Powered by Elastic Search Views</h3>
<p>This feature leverages the Elastic Search indexing capability of Nexus Delta. It uses the <code>SearchConfig</code> to decide how to query an <a href="../delta/api/current/views/elasticsearch-view-api.html">Elastic Search View</a>. Because it depends on the <a href="../delta/api/current/views/elasticsearch-view-api.html">Elastic Search View</a> feature, make sure that your <code>mappings</code> property is properly configured to index the data in the way you expect. An incorrectly configured <code>mapping</code> property might not show the appropriate <code>Facets</code> you might expect, or it could simply result in nothing shown.</p>
<p>We recommend using an <a href="../delta/api/current/views/aggregated-es-view-api.html">Aggregate Search View</a>, so that you can query multiple projects at once. However, this feature is limited to 10 to 15 projects, depending on their index name length.</p></div>
<h2><a href="#search-config" name="search-config" class="anchor"><span class="anchor-link"></span></a>Search Config</h2>
<h3><a href="#where-are-searchconfigs-stored-" name="where-are-searchconfigs-stored-" class="anchor"><span class="anchor-link"></span></a>Where are SearchConfigs stored?</h3>
<p>Search configs are saved in a project as a simple <a href="../delta/api/current/kg-resources-api.html">Resource</a>, with a type <code>nxv:SearchConfig</code>.</p>
<p>Nexus Fusion must be made aware of which project to look for these resources, either by using the env var <code>SEARCH_CONFIG_PROJECT</code></p>
<pre class="prettyprint"><code class="language-bash">  SEARCH_CONFIG_PROJECT=my-org/my-project
</code></pre>
<p>or Nexus Fusion will use the default <code>SEARCH_CONFIG_PROJECT</code> value, <code>webapps/nexus-web</code></p>
<p>Signature:</p>
<pre><code>{
  // A unique ID
  id: string;
  // A label to show in the interface to users
  label: string;
  // Which view will be used to query against? can be of type AggregatedElasticSearchView or ElasticSearchView
  view: string;
  // An optional description
  description?: string;
  // An array of facet configurations that will drive the facet panel
  facets?: FacetConfig[];
  // An array of Result Table Fields configurations that will dictate the Result Table rendering
  fields?: ResultTableFields[];
};
</code></pre>
<h3><a href="#example-searchconfig" name="example-searchconfig" class="anchor"><span class="anchor-link"></span></a>Example SearchConfig</h3>
<pre><code>{
  &quot;@type&quot;: [
    &quot;nxv:SearchConfig&quot;
  ],
  &quot;description&quot;: &quot;global dataset search&quot;,
  &quot;facets&quot;: [
    {
      &quot;key&quot;: &quot;brainLocationLabel&quot;,
      &quot;label&quot;: &quot;Brain Region&quot;,
      &quot;propertyKey&quot;: &quot;brainLocation.brainRegion.label.raw&quot;,
      &quot;type&quot;: &quot;terms&quot;
    },
    {
      &quot;key&quot;: &quot;objectOfStudyLabel&quot;,
      &quot;label&quot;: &quot;Object of Study&quot;,
      &quot;propertyKey&quot;: &quot;objectOfStudy.label.raw&quot;,
      &quot;type&quot;: &quot;terms&quot;
    },
    {
      &quot;key&quot;: &quot;type&quot;,
      &quot;label&quot;: &quot;Type&quot;,
      &quot;propertyKey&quot;: &quot;@type&quot;,
      &quot;type&quot;: &quot;terms&quot;
    }
  ],
  &quot;fields&quot;: [
    {
      &quot;dataIndex&quot;: &quot;label&quot;,
      &quot;displayIndex&quot;: 0,
      &quot;key&quot;: &quot;label&quot;,
      &quot;title&quot;: &quot;Label&quot;
    },
    {
      &quot;dataIndex&quot;: &quot;@type&quot;,
      &quot;displayIndex&quot;: 3,
      &quot;key&quot;: &quot;@type&quot;,
      &quot;sortable&quot;: true,
      &quot;title&quot;: &quot;Type&quot;
    },
    {
      &quot;dataIndex&quot;: &quot;objectOfStudy.label&quot;,
      &quot;displayIndex&quot;: 2,
      &quot;key&quot;: &quot;objectOfStudyLabel&quot;,
      &quot;title&quot;: &quot;Object of Study&quot;
    },
    {
      &quot;dataIndex&quot;: &quot;brainLocation.brainRegion.label&quot;,
      &quot;displayIndex&quot;: 1,
      &quot;key&quot;: &quot;brain-region&quot;,
      &quot;title&quot;: &quot;Brain Region&quot;
    }
  ],
  &quot;label&quot;: &quot;MINDS&quot;,
  &quot;view&quot;: &quot;https://my-nexus-deployment.com/v1/views/webapps/nexus-web/my-view-id&quot;
}
</code></pre>
<h3><a href="#facets" name="facets" class="anchor"><span class="anchor-link"></span></a>Facets</h3>
<p>The Facet portion of the config dictates what will render in the left column of the Search interface that allows users to toggle facets or filters to narrow down their search. Each facet category is generated using an Elastic Search Aggregated query, and so far only supports <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"><code>term</code> aggregated queries</a>, but may be expanded in the future to allow filtering search against things like dates.</p>
<p>Because of the <code>terms</code> limitation, it&rsquo;s only possible to create facets with the Elastic Search Mapping type of <code>object</code> or <code>text</code> and <code>keyword</code></p>
<p>Signature:</p>
<pre><code>  {
    // The full path to target property, according to the elastic search mapping
    propertyKey: string;
    // A unique key to distinguish against other Facet objects
    key: string;
    // The label to be used in the interface
    label: string;
    // The only available facet type
    type: &quot;terms&quot;;
    // An optional value to sort the facets in the interface. A lower displayIndex value will render this option higher in the interface
    // Note, if this value is blank, the label will be used to sort alphabetically to be consistent.
    displayIndex?: number;
  }[]
</code></pre>
<h4><a href="#defaults" name="defaults" class="anchor"><span class="anchor-link"></span></a>Defaults</h4>
<p>The Facet configs are an optional field. The default will allow users to filter by project and @type.</p>
<pre><code>{
  propertyKey: &#39;_project&#39;,
  key: &#39;projects&#39;,
  label: &#39;Projects&#39;,
  type: &#39;terms&#39;,
  displayIndex: 0,
},
{
  propertyKey: &#39;@type&#39;,
  key: &#39;types&#39;,
  label: &#39;Types&#39;,
  type: &#39;terms&#39;,
  displayIndex: 1,
}
</code></pre>
<h3><a href="#fields" name="fields" class="anchor"><span class="anchor-link"></span></a>Fields</h3>
<p>The Fields property of the Search Config allows users to specify what properties to show in the Result Table. They correspond to table columns.</p>
<p>Signature:</p>
<pre><code>{
  // The table column header title
  title: string;
  // The property to access, in dot notation (eg: &quot;brainLocation.brainRegion.label&quot; )
  dataIndex: string;
  // Optionally make the field sortable
  sortable?: boolean;
  // A unique key to identify this column
  key: string;
  // Lower numbers will appear to the left of the table. If no displayIndex is given, it will sort alphabetically by the &quot;key&quot; property
  displayIndex: number;
}[]
</code></pre>
<h4><a href="#special-properties" name="special-properties" class="anchor"><span class="anchor-link"></span></a>Special properties</h4>
<p>The table will render the value found via the dataIndex property as simple text. However, there are some special rendering logic for the following keys, which will ignore the <code>dataIndex</code> property of the config.</p>
<ul>
  <li>project: Will render the org and project info</li>
  <li>@type: Will render a list of @types as pills</li>
  <li>schema: Will render the schema (<code>_constrainedBy</code>) field with a tooltip</li>
  <li>label: Will render a human-readable label using the following:  <code>
  resource.prefLabel ||
  resource.label ||
  resource.name ||
  resource[&quot;@id&quot;]
</code></li>
  <li>description: Will render a description using the enriched markdown template viewer (see <a href="admin.html#resource-descriptions">Description Viewer</a>)</li>
</ul>
<h4><a href="#defaults" name="defaults" class="anchor"><span class="anchor-link"></span></a>Defaults</h4>
<p>IF no fields property exists on the <code>SearchConfig</code>, the following default values will be used:</p>
<pre><code>{
  title: &#39;Label&#39;,
  dataIndex: &#39;label&#39;,
  key: &#39;label&#39;,
  displayIndex: 0,
},
{
  title: &#39;Project&#39;,
  dataIndex: &#39;_project&#39;,
  sortable: true,
  key: &#39;project&#39;,
  displayIndex: 1,
},
{
  title: &#39;Types&#39;,
  dataIndex: &#39;@type&#39;,
  sortable: true,
  key: &#39;@type&#39;,
  displayIndex: 3,
},
</code></pre>
<h2><a href="#search-results" name="search-results" class="anchor"><span class="anchor-link"></span></a>Search Results</h2>
<p>The Search Results body displays the resources that match the search / filtering criteria in two ways: a Results Grid or a Results Table</p>
<h3><a href="#result-grid" name="result-grid" class="anchor"><span class="anchor-link"></span></a>Result Grid</h3>
<p>The Result Grid displays matched <code>Resources</code> in preview cards, to show off visual content of Data stored in Nexus Delta. These preview cards can be used to show snippets of code or preview images, for example.</p>
<p><img src="assets/search-grid.png" alt="Results Grid" /></p>
<h4><a href="#result-view-cards" name="result-view-cards" class="anchor"><span class="anchor-link"></span></a>Result View Cards</h4>
<p>Each result card is rendered using an expanded version of the markdown + handlebars rendering used elsewhere in Nexus Fusion, but with some expanded functionality.</p>
<p>The Search SubApp will attempt to render a card using a markdown + handlebar template string found in the <code>previewTemplate</code> property of that <code>Resource</code>. If no <code>previewTemplate</code> property is found, it will render using the default template string:</p>
<pre><code>&lt;div style=&quot;display: block&quot;&gt;
    &lt;h3 class=&quot;title&quot;&gt;{{ resourceLabel }}&lt;/h3&gt;
    {{#if description}}
    &lt;div class=&quot;description&quot;&gt;
        &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
        {{{ description }}}
    &lt;/div&gt;
    {{/if}}
    &lt;div style=&quot;display:flex;&quot; class=&quot;types&quot;&gt;
        {{#each type}}
            &lt;li&gt;
                &lt;span class=&quot;ant-tag&quot;&gt;{{this}}&lt;/span&gt;
            &lt;/li&gt;
        {{/each}}
    &lt;/div&gt;
     {{#if fileData }}
        &lt;div class=&quot;file-data&quot;&gt;
           &lt;span&gt;name: &lt;b&gt;{{ _filename }}&lt;/b&gt;&lt;/span&gt;&lt;br/&gt;
           &lt;span&gt;size: &lt;b&gt;{{ fileData.humanReadableFileSize }}&lt;/b&gt;&lt;/span&gt;&lt;br/&gt;
           &lt;span&gt;type: &lt;b&gt;{{ _mediaType }}&lt;/b&gt;&lt;/span&gt;&lt;br/&gt;
        &lt;/div&gt;
    {{/if}}
    &lt;div&gt;
    &lt;span&gt;{{ resourceAdminData.org }}&lt;/span&gt; | &lt;span&gt;{{ resourceAdminData.project }}&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>As you can see above, instead of just passing the <code>Resource</code> object to the template, the template has access to a few more properties:</p>
<pre><code>// Properties offered in the Preview Template
{
  ...resource,
  // a human-readable label created from these values:
  // resource.prefLabel ||
  // resource.label ||
  // resource.name ||
  // resource[&quot;@id&quot;]
  resourceLabel: string,
  // Useful metadat about the resource
  resourceAdminData: {
    url: string,
    deployment: string,
    apiVersion: string,
    entityType: string, // Corresponds to Schema
    org: string,
    project: string,
    id: string,
  },
  // if the resource is a file, a human-readable label
  // will show off the size of the file.
  fileData: {
    humanReadableFileSize: string
  } | null
}
</code></pre>
<h3><a href="#result-table" name="result-table" class="anchor"><span class="anchor-link"></span></a>Result Table</h3>
<p>The Result Table shows off data in a table, where each row corresponds to a <code>Resource</code> that matched the search and query criteria. The columns are defined by the <code>SearchConfig</code>.</p>
<p><img src="assets/search-table.png" alt="Results Table Example" /></p>
<h2><a href="#search-bar" name="search-bar" class="anchor"><span class="anchor-link"></span></a>Search Bar</h2>
<p>The Search Bar enables users to use full text search across their configured view, as well as navigate to matching <code>Resources</code>.</p>
<p><img src="assets/search-bar.png" alt="Search Bar" /></p><div class="callout note "><div class="callout-title">Note</div>
<h3><a href="#hotkey-" name="hotkey-" class="anchor"><span class="anchor-link"></span></a>Hotkey!</h3>
<p>You can press <code>/</code> on most screens to focus the Search Bar for convenience.</p></div><div class="callout note "><div class="callout-title">Note</div>
<h3><a href="#caveats" name="caveats" class="anchor"><span class="anchor-link"></span></a>Caveats</h3>
<p>Full text search is powered using the Elastic Search Mapping property called <code>__original_source</code>, and <em>must</em> be add to your view&rsquo;s mapping to be useful, otherwise no results will show. The proper mapping is as follows:</p>
<pre><code>{
  ...rest of mapping,
  &quot;_all_fields&quot;: {
    &quot;analyzer&quot;: &quot;nexus&quot;,
    &quot;type&quot;: &quot;text&quot;
  },
  &quot;_original_source&quot;: {
    &quot;analyzer&quot;: &quot;nexus&quot;,
    &quot;copy_to&quot;: &quot;_all_fields&quot;,
    &quot;type&quot;: &quot;text&quot;
  },
}

</code></pre>
<p>This uses a specially developed analyzer, and also requires the <code>__all_fields</code> property to exist. Simply copying these two properties should be sufficient.</p></div>
<h2><a href="#action-bar" name="action-bar" class="anchor"><span class="anchor-link"></span></a>Action Bar</h2>
<p>The action bar allows users to deselect filters, toggle between <code>SearchConfigs</code>, and export their search resuts.</p>
<h3><a href="#exporting" name="exporting" class="anchor"><span class="anchor-link"></span></a>Exporting</h3>
<h4><a href="#csv" name="csv" class="anchor"><span class="anchor-link"></span></a>CSV</h4>
<p>This option will generate a CSV, whose columns are configured from the <code>fields</code> property of the <code>SearchConfig</code></p>
<h4><a href="#as-es-query" name="as-es-query" class="anchor"><span class="anchor-link"></span></a>As ES Query</h4>
<p>This option will copy the Elastic Search query used to generate the results, excluding the pagination properties <code>from</code> and <code>size</code>. You can then use this query that is in your clipboard to create an Elastic Search Studio, or query for yourself in the Query Elastic Search View of a project in the <a href="admin.html">Admin</a> SubApp.</p>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/fusion/search.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.0.0+1-285838af*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../docs/fusion/studio.html" title="Studios" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Studios
</span>
</div>
</a>
<a href="../../docs/fusion/admin.html" title="Admin" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Admin
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
© 2017-2021 <a href="https://epfl.ch/">EPFL</a> | <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../.././public/js/gtm.js"></script>
</body>
</html>
