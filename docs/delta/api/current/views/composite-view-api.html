<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.1, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../../../.././assets/img/favicon-32x32.png">
<title>CompositeView Â· Blue Brain Nexus</title>
<link rel="stylesheet" href="../../../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../../../lib/prettify/prettify.css">
<script src="../../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../../../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../../../../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
CompositeView
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../../../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../../../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../../../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../../../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../../../../docs/getting-started/try-nexus.html" class="page">Try Nexus</a></li>
    <li><a href="../../../../../docs/getting-started/running-nexus.html" class="page">Running Nexus</a></li>
  </ul></li>
  <li><a href="../../../../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../../../../docs/releases/v1.4-release-notes.html" class="page">v1.4 Release Notes</a></li>
    <li><a href="../../../../../docs/releases/v1.3-to-v1.4-migration.html" class="page">v1.3 To v1.4 Migration</a></li>
    <li><a href="../../../../../docs/releases/v1.3-release-notes.html" class="page">v1.3 Release Notes</a></li>
    <li><a href="../../../../../docs/releases/v1.2-to-v1.3-migration.html" class="page">v1.2 To v1.3 Migration</a></li>
    <li><a href="../../../../../docs/releases/v1.2-release-notes.html" class="page">v1.2 Release Notes</a></li>
    <li><a href="../../../../../docs/releases/v1.1-release-notes.html" class="page">v1.1 Release Notes</a></li>
    <li><a href="../../../../../docs/releases/v1.0-to-v1.1-migration.html" class="page">v1.0 To v1.1 Migration</a></li>
    <li><a href="../../../../../docs/releases/v1.0-release-notes.html" class="page">v1.0 Release Notes</a></li>
  </ul></li>
  <li><a href="../../../../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../../../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../../../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../../../docs/fusion/plugins.html" class="page">Plugins</a></li>
    <li><a href="../../../../../docs/fusion/studio.html" class="page">Studios</a></li>
    <li><a href="../../../../../docs/fusion/admin.html" class="page">Admin</a></li>
    <li><a href="../../../../../docs/fusion/add-your-own-app.html" class="page">Add your own App</a></li>
  </ul></li>
  <li><a href="../../../../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../../../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../../../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../../../docs/delta/api/current/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/operating-on-resources.html" class="page">Operating on resources</a></li>
      <li><a href="../../../../../docs/delta/api/current/iam-realms-api.html" class="page">Realms</a></li>
      <li><a href="../../../../../docs/delta/api/current/authentication.html" class="page">Authentication</a></li>
      <li><a href="../../../../../docs/delta/api/current/iam-permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../../../../docs/delta/api/current/iam-acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../../../../docs/delta/api/current/iam-identities.html" class="page">Identities</a></li>
      <li><a href="../../../../../docs/delta/api/current/admin-orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../../../../docs/delta/api/current/admin-projects-api.html" class="page">Projects</a></li>
      <li><a href="../../../../../docs/delta/api/current/kg-schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../../../../docs/delta/api/current/kg-resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../../../../docs/delta/api/current/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../../../../docs/delta/api/current/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html" class="active page">CompositeView</a></li>
        <li><a href="../../../../../docs/delta/api/current/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../../../../docs/delta/api/current/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
      </ul></li>
      <li><a href="../../../../../docs/delta/api/current/kg-storages-api.html" class="page">Storages</a></li>
      <li><a href="../../../../../docs/delta/api/current/kg-files-api.html" class="page">Files</a></li>
      <li><a href="../../../../../docs/delta/api/current/kg-archives-api.html" class="page">Archives</a></li>
      <li><a href="../../../../../docs/delta/api/current/kg-resources-api.html" class="page">Resources</a></li>
      <li><a href="../../../../../docs/delta/api/current/error-signaling.html" class="page">Error Signaling</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/benchmarks.html" class="page">Benchmarks</a></li>
  </ul></li>
  <li><a href="../../../../../docs/utilities/index.html" class="page">Utilities</a>
  <ul>
    <li><a href="../../../../../docs/utilities/projections.html" class="page">Indexing data in other systems</a></li>
    <li><a href="../../../../../docs/utilities/nexus-python-cli.html" class="page">MovieLens Tutorial using the Nexus Python CLI</a></li>
  </ul></li>
  <li><a href="../../../../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#compositeview" class="header">CompositeView</a>
  <ul>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#processing-pipeline" class="header">Processing pipeline</a></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sources" class="header">Sources</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#projecteventstream" class="header">ProjectEventStream</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#crossprojecteventstream" class="header">CrossProjectEventStream</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#remoteprojecteventstream" class="header">RemoteProjectEventStream</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#intermediate-sparql-space" class="header">Intermediate Sparql space</a></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#projections" class="header">Projections</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#elasticsearchprojection" class="header">ElasticSearchProjection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparqlprojection" class="header">SparqlProjection</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#payload" class="header">Payload</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#example" class="header">Example</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#endpoints" class="header">Endpoints</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#search-documents-in-a-projection" class="header">Search Documents in a projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#search-documents-in-all-projections" class="header">Search Documents in all projections</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-a-projection" class="header">SPARQL query in a projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-all-projections" class="header">SPARQL query in all projections</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-the-intermediate-space" class="header">SPARQL query in the intermediate space</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-statistics" class="header">Fetch statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-source-statistics" class="header">Fetch source statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-all-sources-statistics" class="header">Fetch all sources statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-projection-statistics" class="header">Fetch projection statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-all-projections-statistics" class="header">Fetch all projections statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-view" class="header">Restart view</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-projection" class="header">Restart projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-all-projections" class="header">Restart all projections</a></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> b4da8032
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#compositeview" class="header">CompositeView</a>
  <ul>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#processing-pipeline" class="header">Processing pipeline</a></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sources" class="header">Sources</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#projecteventstream" class="header">ProjectEventStream</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#crossprojecteventstream" class="header">CrossProjectEventStream</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#remoteprojecteventstream" class="header">RemoteProjectEventStream</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#intermediate-sparql-space" class="header">Intermediate Sparql space</a></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#projections" class="header">Projections</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#elasticsearchprojection" class="header">ElasticSearchProjection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparqlprojection" class="header">SparqlProjection</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#payload" class="header">Payload</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#example" class="header">Example</a></li>
    </ul></li>
    <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#endpoints" class="header">Endpoints</a>
    <ul>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#search-documents-in-a-projection" class="header">Search Documents in a projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#search-documents-in-all-projections" class="header">Search Documents in all projections</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-a-projection" class="header">SPARQL query in a projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-all-projections" class="header">SPARQL query in all projections</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#sparql-query-in-the-intermediate-space" class="header">SPARQL query in the intermediate space</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-statistics" class="header">Fetch statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-source-statistics" class="header">Fetch source statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-all-sources-statistics" class="header">Fetch all sources statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-projection-statistics" class="header">Fetch projection statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#fetch-all-projections-statistics" class="header">Fetch all projections statistics</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-view" class="header">Restart view</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-projection" class="header">Restart projection</a></li>
      <li><a href="../../../../../docs/delta/api/current/views/composite-view-api.html#restart-all-projections" class="header">Restart all projections</a></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#compositeview" name="compositeview" class="anchor"><span class="anchor-link"></span></a>CompositeView</h1>
<p>This view is composed by multiple <code>sources</code> and <code>projections</code>.</p>
<h2><a href="#processing-pipeline" name="processing-pipeline" class="anchor"><span class="anchor-link"></span></a>Processing pipeline</h2>
<p>An asynchronous process gets trigger for every view. This process can be visualized as a pipeline with different stages. </p>
<p>The first stage is the input of the pipeline: a stream of sources.</p>
<p>The last stage takes the resulting output from the pipeline and index it on the configured projection.</p>
<p><a href="../assets/views/compositeview_pipeline.png"><img src="../assets/views/compositeview_pipeline.png" alt="CompositeView pipeline" title="CompositeView pipeline" /></a></p>
<h2><a href="#sources" name="sources" class="anchor"><span class="anchor-link"></span></a>Sources</h2>
<p>A source defines the location where to retrieve the resources. It is the input of the pipeline.</p>
<p>There are 3 types of sources available.</p>
<h3><a href="#projecteventstream" name="projecteventstream" class="anchor"><span class="anchor-link"></span></a>ProjectEventStream</h3>
<p>This source reads events in a streaming fashion from the current project event log.</p>
<p>The events are offered to the projections stage.</p>
<pre class="prettyprint"><code class="language-json">{
   &quot;sources&quot;: [
      {
         &quot;@id&quot;: &quot;{sourceId},
         &quot;@type&quot;: &quot;ProjectEventStream&quot;,
         &quot;resourceSchemas&quot;: [ &quot;{resourceSchema}&quot;, ...],
         &quot;resourceTypes&quot;: [ &quot;{resourceType}&quot;, ...],
         &quot;resourceTag&quot;: &quot;{tag}&quot;
      }
   ],
   ...
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{sourceId}</code>: Iri - The identifier of the source. This field is optional. When missing, a randomly generated Iri will be assigned.</li>
  <li><code>{resourceSchema}</code>: Iri - Selects only resources that are validated against the provided schema Iri. This field is optional.</li>
  <li><code>{resourceType}</code>: Iri - Select only resources of the provided type Iri. This field is optional.</li>
  <li><code>{tag}</code>: String - Selects only resources with the provided tag. This field is optional.</li>
</ul>
<h3><a href="#crossprojecteventstream" name="crossprojecteventstream" class="anchor"><span class="anchor-link"></span></a>CrossProjectEventStream</h3>
<p>This source reads events in a streaming fashion from the defined project event log in the current Nexus deployment.</p>
<p>The specified list of identities will be used to retrieve the resources from the project. The target project must have <code>resources/read</code> permissions in order to read events.</p>
<p>The events are offered to the projections stage.</p>
<pre class="prettyprint"><code class="language-json">{
   &quot;sources&quot;: [
      {
         &quot;@id&quot;: &quot;{sourceId}&quot;,
         &quot;@type&quot;: &quot;CrossProjectEventStream&quot;,
         &quot;project&quot;: &quot;{project}&quot;,
         &quot;identities&quot;: [ {_identity_}, {...} ],
         &quot;resourceSchemas&quot;: [ &quot;{resourceSchema}&quot;, ...],
         &quot;resourceTypes&quot;: [ &quot;{resourceType}&quot;, ...],
         &quot;resourceTag&quot;: &quot;{tag}&quot;
      }
   ],
   ...
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{sourceId}</code>: Iri - The identifier of the source. This field is optional. When missing, a randomly generated Iri  will be assigned.</li>
  <li><code>{project}</code>: String - the target project (in the format &lsquo;myorg/myproject&rsquo;).</li>
  <li><code>_identity_</code>: Json object - the identity against which to enforce ACLs during the resource retrieval process.</li>
  <li><code>{resourceSchema}</code>: Iri - Selects only resources that are validated against the provided schema Iri. This field is  optional.</li>
  <li><code>{resourceType}</code>: Iri - Select only resources of the provided type Iri. This field is optional.</li>
  <li><code>{tag}</code>: String - Selects only resources with the provided tag. This field is optional.</li>
</ul>
<h3><a href="#remoteprojecteventstream" name="remoteprojecteventstream" class="anchor"><span class="anchor-link"></span></a>RemoteProjectEventStream</h3>
<p>This source reads events in a streaming fashion from the defined project event log in a remote Nexus deployment.</p>
<p>The events are offered to the projections stage.</p>
<pre class="prettyprint"><code class="language-json">{
   &quot;sources&quot;: [
      {
         &quot;@id&quot;: &quot;{sourceId}&quot;,
         &quot;@type&quot;: &quot;RemoteProjectEventStream&quot;,
         &quot;project&quot;: &quot;{project}&quot;,
         &quot;endpoint&quot;: &quot;{endpoint}&quot;,
         &quot;token&quot;: &quot;{token}&quot;,
         &quot;resourceSchemas&quot;: [ &quot;{resourceSchema}&quot;, ...],
         &quot;resourceTypes&quot;: [ &quot;{resourceType}&quot;, ...],
         &quot;resourceTag&quot;: &quot;{tag}&quot;
      }
   ],
   ...
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{sourceId}</code>: Iri - The identifier of the source. This field is optional. When missing, a randomly generated Iri  will be assigned.</li>
  <li><code>{project}</code>: String - the remote project (in the format &lsquo;myorg/myproject&rsquo;).</li>
  <li><code>{endpoint}</code>: Iri - the Nexus deployment endpoint.</li>
  <li><code>{token}</code>: String - the Nexus deployment token. This field is optional. When missing, the Nexus endpoint will be  accessed without authentication.</li>
  <li><code>{resourceSchema}</code>: Iri - Selects only resources that are validated against the provided schema Iri. This field is  optional.</li>
  <li><code>{resourceType}</code>: Iri - Select only resources of the provided type Iri. This field is optional.</li>
  <li><code>{tag}</code>: String - Selects only resources with the provided tag. This field is optional.</li>
</ul>
<h2><a href="#intermediate-sparql-space" name="intermediate-sparql-space" class="anchor"><span class="anchor-link"></span></a>Intermediate Sparql space</h2>
<p>After the events are gathered from each source, the following steps are executed:</p>
<ol>
  <li>Convert event into a resource.</li>
  <li>Discard undesired resources.</li>
  <li>Store the RDF triple representation of a resource in an intermediate Sparql space. This space will be used by the  projections in the following pipeline steps.</li>
</ol>
<h2><a href="#projections" name="projections" class="anchor"><span class="anchor-link"></span></a>Projections</h2>
<p>A projection defines the type of indexing and a query to transform the data. It is the output of the pipeline.</p>
<p>There are 2 types of projections available</p>
<h3><a href="#elasticsearchprojection" name="elasticsearchprojection" class="anchor"><span class="anchor-link"></span></a>ElasticSearchProjection</h3>
<p>This projection executes the following steps:</p>
<ol>
  <li>Discard undesired resources.</li>
  <li>Transform the resource by executing an SPARQL construct query against the intermediate Sparql space.</li>
  <li>Convert the resulting RDF triples into JSON using the provided JSON-LD context.</li>
  <li>Stores the resulting JSON as a Document in an ElasticSearch index.</li>
</ol>
<pre class="prettyprint"><code class="language-json">{
   &quot;projections&quot;: [
      {
         &quot;@id&quot;: &quot;{projectionId}&quot;,
         &quot;@type&quot;: &quot;ElasticSearchProjection&quot;,
         &quot;mapping&quot;: _elasticsearch mapping_,
         &quot;query&quot;: &quot;{query}&quot;,
         &quot;context&quot;: _context_,
         &quot;resourceSchemas&quot;: [ &quot;{resourceSchema}&quot;, ...],
         &quot;resourceTypes&quot;: [ &quot;{resourceType}&quot;, ...],
         &quot;resourceTag&quot;: &quot;{tag}&quot;,
         &quot;includeMetadata&quot;: {includeMetadata},
         &quot;includeDeprecated&quot;: {includeDeprecated}
      }
   ],
   ...
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{projectionId}</code>: Iri - The identifier of the projection. This field is optional. When missing, a randomly generated  Iri will be assigned.</li>
  <li><code>_elasticsearch mapping_</code>: Json object - Defines the value types for the Json keys, as stated at the  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-put-mapping.html#indices-put-mapping" title="ElasticSearch mapping documentation" target="_blank" rel="noopener noreferrer">ElasticSearch mapping documentation</a>.</li>
  <li><code>{resourceSchema}</code>: Iri - Selects only resources that are validated against the provided schema Iri to perform the  query. This field is optional.</li>
  <li><code>{resourceType}</code>: Iri - Select only resources of the provided type Iri to perform the query. This field is optional.</li>
  <li><code>{tag}</code>: String - Selects only resources with the provided tag to perform the query. This field is optional.</li>
  <li><code>{includeMetadata}</code>: Boolean - If true, the resource&rsquo;s nexus metadata (<code>_constrainedBy</code>, <code>_deprecated</code>, &hellip;) will be  stored in the ElasticSearch document. Otherwise it won&rsquo;t. The default value is <code>false</code>.</li>
  <li><code>{includeDeprecated}</code>: Boolean - If true, deprecated resources are also indexed. The default value is <code>false</code>.</li>
  <li><code>{query}</code>: <a href="https://www.w3.org/TR/rdf-sparql-query/">Sparql Query</a> - Defines the Sparql query to execute against the  intermediate Sparql space for each target resource.</li>
  <li><code>_context_</code>: Json - the JSON-LD context value applied to the query results.</li>
</ul>
<h3><a href="#sparqlprojection" name="sparqlprojection" class="anchor"><span class="anchor-link"></span></a>SparqlProjection</h3>
<p>This projection executes the following steps:</p>
<ol>
  <li>Discard undesired resources.</li>
  <li>Transform the resource by executing an Sparql construct query against the intermediate Sparql space.</li>
  <li>Stores the resulting RDF Triple in a Blazegraph namespace.</li>
</ol>
<pre class="prettyprint"><code class="language-json">{
   &quot;projections&quot;: [
      {
         &quot;@id&quot;: &quot;{projectionId}&quot;,
         &quot;@type&quot;: &quot;SparqlProjection&quot;,
         &quot;query&quot;: &quot;{query}&quot;,
         &quot;resourceSchemas&quot;: [ &quot;{resourceSchema}&quot;, ...],
         &quot;resourceTypes&quot;: [ &quot;{resourceType}&quot;, ...],
         &quot;resourceTag&quot;: &quot;{tag}&quot;,
         &quot;includeMetadata&quot;: {includeMetadata},
         &quot;includeDeprecated&quot;: {includeDeprecated}
      }
   ],
   ...
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{projectionId}</code>: Iri - The identifier of the projection. This field is optional. When missing, a randomly generated  Iri will be assigned.</li>
  <li><code>{resourceSchema}</code>: Iri - Selects only resources that are validated against the provided schema Iri to perform the  query. This field is optional.</li>
  <li><code>{resourceType}</code>: Iri - Select only resources of the provided type Iri to perform the query. This field is optional.</li>
  <li><code>{tag}</code>: String - Selects only resources with the provided tag to perform the query. This field is optional.</li>
  <li><code>{includeMetadata}</code>: Boolean - If true, the resource&rsquo;s nexus metadata (<code>_constrainedBy</code>, <code>_deprecated</code>, &hellip;) will be  stored in the ElasticSearch document. Otherwise it won&rsquo;t. The default value is <code>false</code>.</li>
  <li><code>{includeDeprecated}</code>: Boolean - If true, deprecated resources are also indexed. The default value is <code>false</code>.</li>
  <li><code>{query}</code>: <a href="https://www.w3.org/TR/rdf-sparql-query/" title="Sparql Query" target="_blank" rel="noopener noreferrer">Sparql Query</a> - Defines the Sparql query to  execute against the intermediate Sparql space for each target resource.</li>
</ul>
<h2><a href="#payload" name="payload" class="anchor"><span class="anchor-link"></span></a>Payload</h2>
<pre class="prettyprint"><code class="language-json">{
  &quot;@id&quot;: &quot;{someid}&quot;,
  &quot;@type&quot;: [&quot;CompositeView&quot;, &quot;Beta&quot;],
  &quot;sources&quot;: [ _source_, ...],
  &quot;projections&quot;: [ _projection_, ...],
  &quot;rebuildStrategy&quot;: {
    &quot;@type&quot;: &quot;Interval&quot;,
    &quot;value&quot;: &quot;{interval_value}&quot;
  }
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>_source_</code>: Json - The source definition.</li>
  <li><code>_projection_</code>: Json - The projection definition.</li>
  <li><code>{interval_value}</code>: String - The maximum interval delay for a resource to be present in a projection, in a human  readable format (e.g.: 10 minutes).</li>
</ul>
<p>Note: The <code>rebuildStrategy</code> block is optional. If missing, the view won&rsquo;t be automatically restarted.</p>
<h3><a href="#example" name="example" class="anchor"><span class="anchor-link"></span></a>Example</h3>
<p>The following example creates a Composite view containing 3 sources and 2 projections.</p>
<p>The incoming data from each of the sources is stored as RDF triples in the intermediate Sparql space . </p>
<p>The ElasticSearch projection <code>http://music.com/bands</code> is only going to query the Sparql space with the provided query when the current resource in the pipeline has the type <code>http://music.com/Band</code>.</p>
<p>The ElasticSearch projection <code>http://music.com/albums</code> is only going to query the Sparql space with the provided query when the current resource in the pipeline has the type <code>http://music.com/Album</code>.</p>
<p>The view is going to be restarted every 10 minutes if there are new resources in any of the sources since the last time the view was restarted. This allows to deal with partial graph visibility issues.</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;@type&quot;: [&quot;CompositeView&quot;, &quot;Beta&quot;],
  &quot;sources&quot;: [
    {
      &quot;@id&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;@type&quot;: &quot;ProjectEventStream&quot;
    },
    {
      &quot;@id&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;@type&quot;: &quot;CrossProjectEventStream&quot;,
      &quot;project&quot;: &quot;demo/albums&quot;,
      &quot;identities&quot;: {
          &quot;realm&quot;: &quot;myrealm&quot;,
          &quot;group&quot;: &quot;mygroup&quot;
      }
    },
    {
      &quot;@id&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;@type&quot;: &quot;RemoteProjectEventStream&quot;,
      &quot;project&quot;: &quot;remote_demo/songs&quot;,
      &quot;endpoint&quot;: &quot;https://example2.nexus.com&quot;,
      &quot;token&quot;: &quot;mytoken&quot;
    }    
  ],
  &quot;projections&quot;: [
    {
      &quot;@id&quot;: &quot;http://music.com/bands&quot;,
      &quot;@type&quot;: &quot;ElasticSearchProjection&quot;,
      &quot;mapping&quot;: {
        &quot;properties&quot;: {
          &quot;@type&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;@id&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;name&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;genre&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;album&quot;: {
            &quot;type&quot;: &quot;nested&quot;,
            &quot;properties&quot;: {
              &quot;title&quot;: {
                &quot;type&quot;: &quot;keyword&quot;,
                &quot;copy_to&quot;: &quot;_all_fields&quot;
              },
              &quot;released&quot;: {
                &quot;type&quot;: &quot;date&quot;,
                &quot;copy_to&quot;: &quot;_all_fields&quot;
              },
              &quot;song&quot;: {
                &quot;type&quot;: &quot;nested&quot;,
                &quot;properties&quot;: {
                  &quot;title&quot;: {
                    &quot;type&quot;: &quot;keyword&quot;,
                    &quot;copy_to&quot;: &quot;_all_fields&quot;
                  },
                  &quot;number&quot;: {
                    &quot;type&quot;: &quot;long&quot;,
                    &quot;copy_to&quot;: &quot;_all_fields&quot;
                  },
                  &quot;length&quot;: {
                    &quot;type&quot;: &quot;long&quot;,
                    &quot;copy_to&quot;: &quot;_all_fields&quot;
                  }
                }
              }
            }
          },
          &quot;_all_fields&quot;: {
            &quot;type&quot;: &quot;text&quot;
          }
        },
        &quot;dynamic&quot;: false
      },
      &quot;query&quot;: &quot;prefix music: &lt;http://music.com/&gt; prefix nxv: &lt;https://bluebrain.github.io/nexus/vocabulary/&gt; CONSTRUCT {{resource_id}   music:name       ?bandName ; music:genre      ?bandGenre ; music:album      ?albumId . ?albumId        music:released   ?albumReleaseDate ; music:song       ?songId . ?songId         music:title      ?songTitle ; music:number     ?songNumber ; music:length     ?songLength } WHERE {{resource_id}   music:name       ?bandName ; music:genre      ?bandGenre . OPTIONAL {{resource_id} ^music:by        ?albumId . ?albumId        music:released   ?albumReleaseDate . OPTIONAL {?albumId         ^music:on        ?songId . ?songId          music:title      ?songTitle ; music:number     ?songNumber ; music:length     ?songLength } } } ORDER BY(?songNumber)&quot;,
      &quot;context&quot;: {
        &quot;@base&quot;: &quot;http://music.com/&quot;,
        &quot;@vocab&quot;: &quot;http://music.com/&quot;
      },
      &quot;resourceTypes&quot;: [
        &quot;http://music.com/Band&quot;
      ]
    },
    {
      &quot;@id&quot;: &quot;http://music.com/albums&quot;,
      &quot;@type&quot;: &quot;ElasticSearchProjection&quot;,
      &quot;mapping&quot;: {
        &quot;properties&quot;: {
          &quot;@type&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;@id&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;name&quot;: {
            &quot;type&quot;: &quot;keyword&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;length&quot;: {
            &quot;type&quot;: &quot;long&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;numberOfSongs&quot;: {
            &quot;type&quot;: &quot;long&quot;,
            &quot;copy_to&quot;: &quot;_all_fields&quot;
          },
          &quot;_all_fields&quot;: {
            &quot;type&quot;: &quot;text&quot;
          }
        },
        &quot;dynamic&quot;: false
      },
      &quot;query&quot;: &quot;prefix music: &lt;http://music.com/&gt; prefix nxv: &lt;https://bluebrain.github.io/nexus/vocabulary/&gt; CONSTRUCT {{resource_id}             music:name               ?albumTitle ; music:length             ?albumLength ; music:numberOfSongs      ?numberOfSongs } WHERE {SELECT ?albumReleaseDate ?albumTitle (sum(?songLength) as ?albumLength) (count(?albumReleaseDate) as ?numberOfSongs) WHERE {OPTIONAL { {resource_id}           ^music:on / music:length   ?songLength } {resource_id} music:released             ?albumReleaseDate ; music:title                ?albumTitle . } GROUP BY ?albumReleaseDate ?albumTitle }&quot;,
      &quot;context&quot;: {
        &quot;@base&quot;: &quot;http://music.com/&quot;,
        &quot;@vocab&quot;: &quot;http://music.com/&quot;
      },
      &quot;resourceTypes&quot;: [
        &quot;http://music.com/Album&quot;
      ]
    }
  ],
  &quot;rebuildStrategy&quot;: {
    &quot;@type&quot;: &quot;Interval&quot;,
    &quot;value&quot;: &quot;10 minutes&quot;
  }  
}
</code></pre>
<h2><a href="#endpoints" name="endpoints" class="anchor"><span class="anchor-link"></span></a>Endpoints</h2>
<p>The following sections describe the endpoints that are specific to a CompositeView.</p>
<p>The general view endpoints are described on the <a href="index.html#endpoints">parent page</a>.</p>
<h3><a href="#search-documents-in-a-projection" name="search-documents-in-a-projection" class="anchor"><span class="anchor-link"></span></a>Search Documents in a projection</h3>
<pre><code>POST /v1/views/{org_label}/{project_label}/{view_id}/projections/{projection_id}/_search
  {...}
</code></pre>
<p>where <code>{projection_id}</code> is the @id value of the target <code>ElasticSearch</code> projection. </p>
<p>The supported payload is defined on the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html" title="ElasticSearch documentation" target="_blank" rel="noopener noreferrer">ElasticSearch documentation</a></p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-id-search.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XPOST -H &quot;Content-Type: application/json&quot; &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/nxv:myprojection/_search&quot; -d \
&#39;{
    &quot;query&quot;: {
        &quot;term&quot;: {
            &quot;name&quot;: {
                &quot;value&quot;: &quot;Muse&quot;
            }
        }
    }
}&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-search-payload.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
    &quot;query&quot;: {
        &quot;term&quot;: {
            &quot;name&quot;: {
                &quot;value&quot;: &quot;Muse&quot;
            }
        }
    }
}</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-search.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;_shards&quot;: {
    &quot;failed&quot;: 0,
    &quot;skipped&quot;: 0,
    &quot;successful&quot;: 0,
    &quot;total&quot;: 0
  },
  &quot;hits&quot;: {
    &quot;hits&quot;: [
      {
        &quot;_score&quot;: 0.6931472,
        &quot;_id&quot;: &quot;http://music.com/muse&quot;,
        &quot;_index&quot;: &quot;kg_2d4b3208-63ad-441b-9eb1-831722b5df88_24a0220e-c546-456f-b904-8770132f8e12_1&quot;,
        &quot;_source&quot;: {
          &quot;@id&quot;: &quot;muse&quot;,
          &quot;album&quot;: [
            {
              &quot;@id&quot;: &quot;absolution&quot;,
              &quot;released&quot;: &quot;2003-09-15&quot;,
              &quot;song&quot;: [
                {
                  &quot;@id&quot;: &quot;absolution/1.json&quot;,
                  &quot;length&quot;: 252,
                  &quot;number&quot;: 1,
                  &quot;title&quot;: &quot;Apocalypse Please&quot;
                },
                {
                  &quot;@id&quot;: &quot;absolution/2.json&quot;,
                  &quot;length&quot;: 236,
                  &quot;number&quot;: 2,
                  &quot;title&quot;: &quot;Time Is Running Out&quot;
                },
                {
                  &quot;@id&quot;: &quot;absolution/3.json&quot;,
                  &quot;length&quot;: 294,
                  &quot;number&quot;: 3,
                  &quot;title&quot;: &quot;Sing for Absolution&quot;
                }
              ]
            },
            {
              &quot;@id&quot;: &quot;black_holes_and_revelations&quot;,
              &quot;released&quot;: &quot;2006-07-03&quot;,
              &quot;song&quot;: [
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/1.json&quot;,
                  &quot;length&quot;: 275,
                  &quot;number&quot;: 1,
                  &quot;title&quot;: &quot;Take a Bow&quot;
                },
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/2.json&quot;,
                  &quot;length&quot;: 239,
                  &quot;number&quot;: 2,
                  &quot;title&quot;: &quot;Starlight&quot;
                },
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/3.json&quot;,
                  &quot;length&quot;: 209,
                  &quot;number&quot;: 3,
                  &quot;title&quot;: &quot;Supermassive Black Hole&quot;
                }
              ]
            }
          ],
          &quot;genre&quot;: [
            &quot;progressive rock&quot;,
            &quot;alternative rock&quot;,
            &quot;space rock&quot;,
            &quot;art rock&quot;,
            &quot;electronica&quot;,
            &quot;hard rock&quot;
          ],
          &quot;name&quot;: &quot;Muse&quot;
        },
        &quot;_type&quot;: &quot;_doc&quot;
      }
    ],
    &quot;max_score&quot;: 0.6931472,
    &quot;total&quot;: {
      &quot;relation&quot;: &quot;eq&quot;,
      &quot;value&quot;: 1
    }
  },
  &quot;timed_out&quot;: false,
  &quot;took&quot;: 0
}</code></pre></dd>
</dl>
<h3><a href="#search-documents-in-all-projections" name="search-documents-in-all-projections" class="anchor"><span class="anchor-link"></span></a>Search Documents in all projections</h3>
<pre><code>POST /v1/views/{org_label}/{project_label}/{view_id}/projections/_/_search
  {...}
</code></pre>
<p>The supported payload is defined on the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html" title="ElasticSearch documentation" target="_blank" rel="noopener noreferrer">ElasticSearch documentation</a></p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-search.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XPOST -H &quot;Content-Type: application/json&quot; &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/_/_search&quot; -d \
&#39;{
    &quot;query&quot;: {
        &quot;term&quot;: {
            &quot;name&quot;: {
                &quot;value&quot;: &quot;Muse&quot;
            }
        }
    }
}&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-search-payload.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
    &quot;query&quot;: {
        &quot;term&quot;: {
            &quot;name&quot;: {
                &quot;value&quot;: &quot;Muse&quot;
            }
        }
    }
}</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-es-search.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;_shards&quot;: {
    &quot;failed&quot;: 0,
    &quot;skipped&quot;: 0,
    &quot;successful&quot;: 0,
    &quot;total&quot;: 0
  },
  &quot;hits&quot;: {
    &quot;hits&quot;: [
      {
        &quot;_score&quot;: 0.6931472,
        &quot;_id&quot;: &quot;http://music.com/muse&quot;,
        &quot;_index&quot;: &quot;kg_2d4b3208-63ad-441b-9eb1-831722b5df88_24a0220e-c546-456f-b904-8770132f8e12_1&quot;,
        &quot;_source&quot;: {
          &quot;@id&quot;: &quot;muse&quot;,
          &quot;album&quot;: [
            {
              &quot;@id&quot;: &quot;absolution&quot;,
              &quot;released&quot;: &quot;2003-09-15&quot;,
              &quot;song&quot;: [
                {
                  &quot;@id&quot;: &quot;absolution/1.json&quot;,
                  &quot;length&quot;: 252,
                  &quot;number&quot;: 1,
                  &quot;title&quot;: &quot;Apocalypse Please&quot;
                },
                {
                  &quot;@id&quot;: &quot;absolution/2.json&quot;,
                  &quot;length&quot;: 236,
                  &quot;number&quot;: 2,
                  &quot;title&quot;: &quot;Time Is Running Out&quot;
                },
                {
                  &quot;@id&quot;: &quot;absolution/3.json&quot;,
                  &quot;length&quot;: 294,
                  &quot;number&quot;: 3,
                  &quot;title&quot;: &quot;Sing for Absolution&quot;
                }
              ]
            },
            {
              &quot;@id&quot;: &quot;black_holes_and_revelations&quot;,
              &quot;released&quot;: &quot;2006-07-03&quot;,
              &quot;song&quot;: [
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/1.json&quot;,
                  &quot;length&quot;: 275,
                  &quot;number&quot;: 1,
                  &quot;title&quot;: &quot;Take a Bow&quot;
                },
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/2.json&quot;,
                  &quot;length&quot;: 239,
                  &quot;number&quot;: 2,
                  &quot;title&quot;: &quot;Starlight&quot;
                },
                {
                  &quot;@id&quot;: &quot;black_holes_and_revelations/3.json&quot;,
                  &quot;length&quot;: 209,
                  &quot;number&quot;: 3,
                  &quot;title&quot;: &quot;Supermassive Black Hole&quot;
                }
              ]
            }
          ],
          &quot;genre&quot;: [
            &quot;progressive rock&quot;,
            &quot;alternative rock&quot;,
            &quot;space rock&quot;,
            &quot;art rock&quot;,
            &quot;electronica&quot;,
            &quot;hard rock&quot;
          ],
          &quot;name&quot;: &quot;Muse&quot;
        },
        &quot;_type&quot;: &quot;_doc&quot;
      }
    ],
    &quot;max_score&quot;: 0.6931472,
    &quot;total&quot;: {
      &quot;relation&quot;: &quot;eq&quot;,
      &quot;value&quot;: 1
    }
  },
  &quot;timed_out&quot;: false,
  &quot;took&quot;: 0
}</code></pre></dd>
</dl>
<h3><a href="#sparql-query-in-a-projection" name="sparql-query-in-a-projection" class="anchor"><span class="anchor-link"></span></a>SPARQL query in a projection</h3>
<pre><code>POST /v1/views/{org_label}/{project_label}/{view_id}/projections/{projection_id}/sparql
  {query}
</code></pre>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/projections/{projection_id}/sparql?query={query}
</code></pre>
<p>In both endpoints, <code>{query}</code> is defined by the <a href="https://www.w3.org/TR/rdf-sparql-query/#basicpatterns" title="SPARQL documentation" target="_blank" rel="noopener noreferrer">SPARQL documentation</a></p>
<p>where <code>{projection_id}</code> is the @id value of the target <code>Sparql</code> projection.</p>
<p>The <code>Content-Type</code> HTTP header for POST request is <code>application/sparql-query</code>.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-sparql-id-search.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XPOST -H &quot;Content-Type: application/sparql-query&quot; &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/nxv:album/sparql&quot; -d \
&#39;SELECT ?s where {?s ?p ?o} LIMIT 2&#39;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-sparql-search.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;head&quot;: {
    &quot;vars&quot;: [
      &quot;s&quot;
    ]
  },
  &quot;results&quot;: {
    &quot;bindings&quot;: [
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/myview&quot;
        }
      },
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/other&quot;
        }
      }
    ]
  }
}</code></pre></dd>
</dl>
<h3><a href="#sparql-query-in-all-projections" name="sparql-query-in-all-projections" class="anchor"><span class="anchor-link"></span></a>SPARQL query in all projections</h3>
<pre><code>POST /v1/views/{org_label}/{project_label}/{view_id}/projections/_/sparql
  {query}
</code></pre>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/projections/_/sparql?query={query}
</code></pre>
<p>In both endpoints, <code>{query}</code> is defined by the <a href="https://www.w3.org/TR/rdf-sparql-query/#basicpatterns" title="SPARQL documentation" target="_blank" rel="noopener noreferrer">SPARQL documentation</a></p>
<p>The <code>Content-Type</code> HTTP header for POST request is <code>application/sparql-query</code>.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-sparql-projections-search.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XPOST -H &quot;Content-Type: application/sparql-query&quot; &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/_/sparql&quot; -d \
&#39;SELECT ?s where {?s ?p ?o} LIMIT 2&#39;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-sparql-search.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;head&quot;: {
    &quot;vars&quot;: [
      &quot;s&quot;
    ]
  },
  &quot;results&quot;: {
    &quot;bindings&quot;: [
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/myview&quot;
        }
      },
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/other&quot;
        }
      }
    ]
  }
}</code></pre></dd>
</dl>
<h3><a href="#sparql-query-in-the-intermediate-space" name="sparql-query-in-the-intermediate-space" class="anchor"><span class="anchor-link"></span></a>SPARQL query in the intermediate space</h3>
<pre><code>POST /v1/views/{org_label}/{project_label}/{view_id}/sparql
  {query}
</code></pre>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/sparql?query={query}
</code></pre>
<p>In both endpoints, <code>{query}</code> is defined by the <a href="https://www.w3.org/TR/rdf-sparql-query/#basicpatterns" title="SPARQL documentation" target="_blank" rel="noopener noreferrer">SPARQL documentation</a></p>
<p>The <code>Content-Type</code> HTTP header for POST request is <code>application/sparql-query</code>.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-intermediate-sparql-search.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XPOST -H &quot;Content-Type: application/sparql-query&quot; &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/sparql&quot; -d \
&#39;SELECT ?s where {?s ?p ?o} LIMIT 2&#39;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-sparql-search.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;head&quot;: {
    &quot;vars&quot;: [
      &quot;s&quot;
    ]
  },
  &quot;results&quot;: {
    &quot;bindings&quot;: [
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/myview&quot;
        }
      },
      {
        &quot;s&quot;: {
          &quot;type&quot;: &quot;uri&quot;,
          &quot;value&quot;: &quot;http://example.com/other&quot;
        }
      }
    ]
  }
}</code></pre></dd>
</dl>
<h3><a href="#fetch-statistics" name="fetch-statistics" class="anchor"><span class="anchor-link"></span></a>Fetch statistics</h3>
<p>This endpoint displays statistical information about the intermediate Sparql space.</p>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/statistics
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-intermediate-stats.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/statistics&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-stats.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/statistics.json&quot;,
  &quot;@type&quot;: &quot;https://bluebrain.github.io/nexus/vocabulary/CompositeViewStatistics&quot;,
  &quot;totalEvents&quot;: 34,
  &quot;processedEvents&quot;: 34,
  &quot;evaluatedEvents&quot;: 4,
  &quot;remainingEvents&quot;: 0,
  &quot;discardedEvents&quot;: 30,
  &quot;failedEvents&quot;: 0,
  &quot;delayInSeconds&quot;: 0,
  &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
  &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
  &quot;values&quot;: [
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 9,
      &quot;processedEvents&quot;: 9,
      &quot;evaluatedEvents&quot;: 4,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 5,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 17,
      &quot;processedEvents&quot;: 17,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 17,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 8,
      &quot;processedEvents&quot;: 8,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 8,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;
    }
  ]
}</code></pre></dd>
</dl>
<p>where:</p>
<ul>
  <li><code>totalEvents</code> - sum of total number of events from each source</li>
  <li><code>processedEvents</code> - sum of number of events that have been considered by each source</li>
  <li><code>remainingEvents</code> - sum of number of events that remain to be considered by each source</li>
  <li><code>discardedEvents</code> - sum of number of events that have been discarded by each source (were not evaluated due to  filters, e.g. did not match schema, tag or type defined in the source)</li>
  <li><code>evaluatedEvents</code> - sum of number of events that have been used to update the intermediate Sparql space of each source</li>
  <li><code>lastEventDateTime</code> - timestamp of the last event in the sources</li>
  <li><code>lastProcessedEventDateTime</code> - timestamp of the last event processed by the sources</li>
  <li><code>delayInSeconds</code> - number of seconds between the last processed event timestamp and the last known event timestamp</li>
  <li><code>sourceId</code> - the @id unique value of the source</li>
</ul>
<h3><a href="#fetch-source-statistics" name="fetch-source-statistics" class="anchor"><span class="anchor-link"></span></a>Fetch source statistics</h3>
<p>This endpoint displays statistical information about the provided source.</p>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/sources/{source_id}/statistics
</code></pre>
<p>where <code>{source_id}</code> is the @id value of the source.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-source-id-stats.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/sources/nxv:mysource/statistics&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-source-stat.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/statistics.json&quot;,
  &quot;@type&quot;: &quot;ViewStatistics&quot;,
  &quot;totalEvents&quot;: 9,
  &quot;processedEvents&quot;: 9,
  &quot;evaluatedEvents&quot;: 9,
  &quot;remainingEvents&quot;: 0,
  &quot;discardedEvents&quot;: 0,
  &quot;failedEvents&quot;: 0,
  &quot;delayInSeconds&quot;: 0,
  &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
  &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
}</code></pre></dd>
</dl>
<p>where:</p>
<ul>
  <li><code>totalEvents</code> - total number of events for the provided source</li>
  <li><code>processedEvents</code> - number of events that have been considered by the provided source</li>
  <li><code>remainingEvents</code> - number of events that remain to be considered by the provided source</li>
  <li><code>discardedEvents</code> - number of events that have been discarded by the provided source (were not evaluated due to  filters, e.g. did not match schema, tag or type defined in the source)</li>
  <li><code>evaluatedEvents</code> - number of events that have been used to update the intermediate Sparql of the provided source</li>
  <li><code>lastEventDateTime</code> - timestamp of the last event from the provided source</li>
  <li><code>lastProcessedEventDateTime</code> - timestamp of the last event processed by the provided source</li>
  <li><code>delayInSeconds</code> - number of seconds between the last processed event timestamp and the last known event timestamp</li>
</ul>
<h3><a href="#fetch-all-sources-statistics" name="fetch-all-sources-statistics" class="anchor"><span class="anchor-link"></span></a>Fetch all sources statistics</h3>
<p>This endpoint displays statistical information about all the sources.</p>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/sources/_/statistics
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-sources-stats.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/sources/_/statistics&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-sources-stat.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/statistics.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;
  ],
  &quot;_total&quot;: 3,
  &quot;_results&quot;: [
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;totalEvents&quot;: 9,
      &quot;processedEvents&quot;: 9,
      &quot;evaluatedEvents&quot;: 9,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 0,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;totalEvents&quot;: 8,
      &quot;processedEvents&quot;: 8,
      &quot;evaluatedEvents&quot;: 8,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 0,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;totalEvents&quot;: 17,
      &quot;processedEvents&quot;: 17,
      &quot;evaluatedEvents&quot;: 17,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 0,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;
    }
  ]
}</code></pre></dd>
</dl>
<p>where:</p>
<ul>
  <li><code>sourceId</code> - the @id unique value of the source</li>
  <li><code>totalEvents</code> - total number of events for the provided source</li>
  <li><code>processedEvents</code> - number of events that have been considered by the provided source</li>
  <li><code>remainingEvents</code> - number of events that remain to be considered by the provided source</li>
  <li><code>discardedEvents</code> - number of events that have been discarded by the provided source (were not evaluated due to  filters, e.g. did not match schema, tag or type defined in the source)</li>
  <li><code>evaluatedEvents</code> - number of events that have been used to update the intermediate Sparql of the provided source</li>
  <li><code>lastEventDateTime</code> - timestamp of the last event from the provided source</li>
  <li><code>lastProcessedEventDateTime</code> - timestamp of the last event processed by the provided source</li>
  <li><code>delayInSeconds</code> - number of seconds between the last processed event timestamp and the last known event timestamp</li>
</ul>
<h3><a href="#fetch-projection-statistics" name="fetch-projection-statistics" class="anchor"><span class="anchor-link"></span></a>Fetch projection statistics</h3>
<p>This endpoint displays statistical information about the provided projection.</p>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/projections/{projection_id}/statistics
</code></pre>
<p>where <code>{projection_id}</code> is the @id value of the projection.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-id-stats.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/nxv:albums/statistics&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-stats.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/statistics.json&quot;,
  &quot;@type&quot;: &quot;https://bluebrain.github.io/nexus/vocabulary/CompositeViewStatistics&quot;,
  &quot;totalEvents&quot;: 34,
  &quot;processedEvents&quot;: 34,
  &quot;evaluatedEvents&quot;: 4,
  &quot;remainingEvents&quot;: 0,
  &quot;discardedEvents&quot;: 30,
  &quot;failedEvents&quot;: 0,
  &quot;delayInSeconds&quot;: 0,
  &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
  &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
  &quot;values&quot;: [
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 9,
      &quot;processedEvents&quot;: 9,
      &quot;evaluatedEvents&quot;: 4,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 5,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 17,
      &quot;processedEvents&quot;: 17,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 17,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 8,
      &quot;processedEvents&quot;: 8,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 8,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;
    }
  ]
}</code></pre></dd>
</dl>
<p>where:</p>
<ul>
  <li><code>sourceId</code> - the @id unique value of the source</li>
  <li><code>projectionId</code> - the @id unique value of the projection</li>
  <li><code>totalEvents</code> - total number of events for the provided source</li>
  <li><code>processedEvents</code> - number of events that have been considered by the projection</li>
  <li><code>remainingEvents</code> - number of events that remain to be considered by the projection</li>
  <li><code>discardedEvents</code> - number of events that have been discarded (were not evaluated due to filters, e.g. did not match  schema, tag or type defined in the projection)</li>
  <li><code>evaluatedEvents</code> - number of events that have been used to update the projection index</li>
  <li><code>lastEventDateTime</code> - timestamp of the last event in the source</li>
  <li><code>lastProcessedEventDateTime</code> - timestamp of the last event processed by the projection</li>
  <li><code>delayInSeconds</code> - number of seconds between the last processed event timestamp and the last known event timestamp</li>
</ul>
<h3><a href="#fetch-all-projections-statistics" name="fetch-all-projections-statistics" class="anchor"><span class="anchor-link"></span></a>Fetch all projections statistics</h3>
<p>This endpoint displays statistical information about the all projections.</p>
<pre><code>GET /v1/views/{org_label}/{project_label}/{view_id}/projections/_/statistics
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-stats.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/_/statistics&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/compositeview-fetch-all-stats.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/statistics.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;
  ],
  &quot;_total&quot;: 6,
  &quot;_results&quot;: [
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 9,
      &quot;processedEvents&quot;: 9,
      &quot;evaluatedEvents&quot;: 4,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 5,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;totalEvents&quot;: 9,
      &quot;processedEvents&quot;: 9,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 9,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:31:41.400Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 8,
      &quot;processedEvents&quot;: 8,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 8,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;totalEvents&quot;: 8,
      &quot;processedEvents&quot;: 8,
      &quot;evaluatedEvents&quot;: 2,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 6,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-02-14T09:32:44.650Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;totalEvents&quot;: 17,
      &quot;processedEvents&quot;: 17,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 17,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;
    },
    {
      &quot;@type&quot;: &quot;ViewStatistics&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;totalEvents&quot;: 17,
      &quot;processedEvents&quot;: 17,
      &quot;evaluatedEvents&quot;: 0,
      &quot;remainingEvents&quot;: 0,
      &quot;discardedEvents&quot;: 17,
      &quot;failedEvents&quot;: 0,
      &quot;delayInSeconds&quot;: 0,
      &quot;lastEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;lastProcessedEventDateTime&quot;: &quot;2020-01-24T13:41:42.177Z&quot;
    }
  ]
}</code></pre></dd>
</dl>
<p>where:</p>
<ul>
  <li><code>sourceId</code> - the @id unique value of the source</li>
  <li><code>projectionId</code> - the @id unique value of the projection</li>
  <li><code>totalEvents</code> - total number of events for the provided source</li>
  <li><code>processedEvents</code> - number of events that have been considered by the projection</li>
  <li><code>remainingEvents</code> - number of events that remain to be considered by the projection</li>
  <li><code>discardedEvents</code> - number of events that have been discarded (were not evaluated due to filters, e.g. did not match  schema, tag or type defined in the projection)</li>
  <li><code>evaluatedEvents</code> - number of events that have been used to update the projection index</li>
  <li><code>lastEventDateTime</code> - timestamp of the last event in the source</li>
  <li><code>lastProcessedEventDateTime</code> - timestamp of the last event processed by the projection</li>
  <li><code>delayInSeconds</code> - number of seconds between the last processed event timestamp and the last known event timestamp</li>
</ul>
<h3><a href="#restart-view" name="restart-view" class="anchor"><span class="anchor-link"></span></a>Restart view</h3>
<p>This endpoint restarts the view indexing process. It does not delete the created indices/namespaces but it overrides the graphs/documents when going through the event log.</p>
<pre><code>DELETE /v1/views/{org_label}/{project_label}/{view_id}/offset
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/view-restart.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XDELETE &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/offset&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-restart.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/offset.json&quot;,
  &quot;@type&quot;: &quot;CompositeViewOffset&quot;,
  &quot;values&quot;: [
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;
    },
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;
    },
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;
    }
  ]
}</code></pre></dd>
</dl>
<h3><a href="#restart-projection" name="restart-projection" class="anchor"><span class="anchor-link"></span></a>Restart projection</h3>
<p>This endpoint restarts indexing process for the provided projection while keeping the sources (and the intermediate Sparql space) progress.</p>
<pre><code>DELETE /v1/views/{org_label}/{project_label}/{view_id}/projections/{projection_id}/offset
</code></pre>
<p>where <code>{projection_id}</code> is the @id value of the projection.</p>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-projection-id-restart.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XDELETE &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/nxv:album/offset&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-projection-id-restart.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/offset.json&quot;,
  &quot;@type&quot;: &quot;CompositeViewOffset&quot;,
  &quot;values&quot;: [
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;
    },
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;
    },
    {
      &quot;@type&quot;: &quot;NoOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;
    }
  ]
}</code></pre></dd>
</dl>
<h3><a href="#restart-all-projections" name="restart-all-projections" class="anchor"><span class="anchor-link"></span></a>Restart all projections</h3>
<p>This endpoint restarts indexing process for all projections while keeping the sources (and the intermediate Sparql space) progress.</p>
<pre><code>DELETE /v1/views/{org_label}/{project_label}/{view_id}/projections/_/offset
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-projection-restart.sh" target="_blank" title="Go to snippet source"></a><code class="language-sh">curl -XDELETE &quot;https://nexus.example.com/v1/views/myorg/myproj/nxv:myview/projections/_/offset&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/assets/views/composite-view-projection-restart.json" target="_blank" title="Go to snippet source"></a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/offset.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/search.json&quot;
  ],
  &quot;_total&quot;: 6,
  &quot;_results&quot;: [
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;instant&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;value&quot;: &quot;ceaf0580-4f0c-11ea-98d9-dff6b2cf55b4&quot;
    },
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/albums&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;instant&quot;: &quot;2020-02-14T09:31:41.400Z&quot;,
      &quot;value&quot;: &quot;ceaf0580-4f0c-11ea-98d9-dff6b2cf55b4&quot;
    },
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;instant&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;value&quot;: &quot;f46234a0-4f0c-11ea-98d9-dff6b2cf55b4&quot;
    },
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/local&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;instant&quot;: &quot;2020-02-14T09:32:44.650Z&quot;,
      &quot;value&quot;: &quot;f46234a0-4f0c-11ea-98d9-dff6b2cf55b4&quot;
    },
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/albums&quot;,
      &quot;instant&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;value&quot;: &quot;412b3110-3eaf-11ea-8415-9b8aa8c49858&quot;
    },
    {
      &quot;@type&quot;: &quot;TimeBasedOffset&quot;,
      &quot;sourceId&quot;: &quot;http://music.com/sources/songs&quot;,
      &quot;projectionId&quot;: &quot;http://music.com/bands&quot;,
      &quot;instant&quot;: &quot;2020-01-24T13:41:42.177Z&quot;,
      &quot;value&quot;: &quot;412b3110-3eaf-11ea-8415-9b8aa8c49858&quot;
    }
  ]
}</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/current/views/composite-view-api.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
b4da8032
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../../../docs/delta/api/current/views/sparql-view-api.html" title="SparqlView" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
SparqlView
</span>
</div>
</a>
<a href="../../../../../docs/delta/api/current/views/aggregated-es-view-api.html" title="AggregateElasticSearchView" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
AggregateElasticSearchView
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
Â© 2017-2020 <a href="https://epfl.ch/">EPFL</a> | <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://gitter.im/BlueBrain/nexus" class="md-footer-social__link fa fa-globe"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../../../."}})</script>
<script type="text/javascript" src="../../../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../../../.././public/js/gtm.js"></script>
</body>
</html>
