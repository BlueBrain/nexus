{"version":3,"sources":["../../src/utils/page-html.ts"],"names":["checkForHtmlSuffix","pagePath","test","getPageHtmlFilePath","dir","outputPath","outputFileName","replace","path","join","remove","publicDir","filePath","fs","existsSync","Promise","resolve"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,kBAAkB,GAAIC,QAAD,IACzB,CAAC,cAAcC,IAAd,CAAmBD,QAAnB,CADH,C,CAGA;;;AACO,MAAME,mBAAmB,GAAG,CACjCC,GADiC,EAEjCC,UAFiC,KAGtB;AACX,MAAIC,cAAc,GAAGD,UAAU,CAACE,OAAX,CAAmB,UAAnB,EAAgC,EAAhC,CAArB,CADW,CAC6C;;AAExD,MAAIP,kBAAkB,CAACK,UAAD,CAAtB,EAAoC;AAClCC,IAAAA,cAAc,GAAGE,cAAKC,IAAL,CAAUH,cAAV,EAA2B,YAA3B,CAAjB;AACD;;AAED,SAAOE,cAAKC,IAAL,CAAUL,GAAV,EAAeE,cAAf,CAAP;AACD,CAXM;;;;AAaA,MAAMI,MAAM,GAAG,OACpB;AAAEC,EAAAA;AAAF,CADoB,EAEpBV,QAFoB,KAGF;AAClB,QAAMW,QAAQ,GAAGT,mBAAmB,CAACQ,SAAD,EAAYV,QAAZ,CAApC;;AACA,MAAIY,iBAAGC,UAAH,CAAcF,QAAd,CAAJ,EAA6B;AAC3B,WAAO,MAAMC,iBAAGH,MAAH,CAAUE,QAAV,CAAb;AACD;;AACD,SAAOG,OAAO,CAACC,OAAR,EAAP;AACD,CATM","sourcesContent":["import fs from \"fs-extra\"\nimport path from \"path\"\n\nconst checkForHtmlSuffix = (pagePath: string): boolean =>\n  !/\\.(html?)$/i.test(pagePath)\n\n// copied from https://github.com/markdalgleish/static-site-generator-webpack-plugin/blob/master/index.js#L161\nexport const getPageHtmlFilePath = (\n  dir: string,\n  outputPath: string\n): string => {\n  let outputFileName = outputPath.replace(/^(\\/|\\\\)/, ``) // Remove leading slashes for webpack-dev-server\n\n  if (checkForHtmlSuffix(outputPath)) {\n    outputFileName = path.join(outputFileName, `index.html`)\n  }\n\n  return path.join(dir, outputFileName)\n}\n\nexport const remove = async (\n  { publicDir }: { publicDir: string },\n  pagePath: string\n): Promise<void> => {\n  const filePath = getPageHtmlFilePath(publicDir, pagePath)\n  if (fs.existsSync(filePath)) {\n    return await fs.remove(filePath)\n  }\n  return Promise.resolve()\n}\n"],"file":"page-html.js"}