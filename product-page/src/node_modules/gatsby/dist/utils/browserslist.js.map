{"version":3,"sources":["../../src/utils/browserslist.ts"],"names":["installedGatsbyVersion","directory","version","require","path","join","parseInt","split","e","undefined","getBrowsersList","fallback","config","browserslist","findConfig","defaults"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,sBAAsB,GAAIC,SAAD,IAA2C;AACxE,MAAI;AACF;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAcC,OAAO,CAACC,cAAKC,IAAL,CAC1BJ,SAD0B,EAEzB,cAFyB,EAGzB,QAHyB,EAIzB,cAJyB,CAAD,CAA3B;;AAMA,WAAOK,QAAQ,CAACJ,OAAO,CAACK,KAAR,CAAe,GAAf,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAf;AACD,GATD,CASE,OAAOC,CAAP,EAAU;AACV,WAAOC,SAAP;AACD;AACF,CAbD;;AAeO,MAAMC,eAAe,GAAIT,SAAD,IAAiC;AAC9D,QAAMU,QAAQ,GACZX,sBAAsB,CAACC,SAAD,CAAtB,KAAsC,CAAtC,GACI,CAAE,KAAF,EAAS,iBAAT,EAA4B,SAA5B,CADJ,GAEI,CAAE,QAAF,EAAY,UAAZ,CAHN;;AAKA,QAAMW,MAAM,GAAGC,cAAaC,UAAb,CAAwBb,SAAxB,CAAf;;AAEA,MAAIW,MAAM,IAAIA,MAAM,CAACG,QAArB,EAA+B;AAC7B,WAAOH,MAAM,CAACG,QAAd;AACD;;AAED,SAAOJ,QAAP;AACD,CAbM","sourcesContent":["import path from \"path\"\nimport browserslist from \"browserslist/node\"\n\nconst installedGatsbyVersion = (directory: string): number | undefined => {\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const { version } = require(path.join(\n      directory,\n      `node_modules`,\n      `gatsby`,\n      `package.json`\n    ))\n    return parseInt(version.split(`.`)[0], 10)\n  } catch (e) {\n    return undefined\n  }\n}\n\nexport const getBrowsersList = (directory: string): string[] => {\n  const fallback =\n    installedGatsbyVersion(directory) === 1\n      ? [`>1%`, `last 2 versions`, `IE >= 9`]\n      : [`>0.25%`, `not dead`]\n\n  const config = browserslist.findConfig(directory)\n\n  if (config && config.defaults) {\n    return config.defaults\n  }\n\n  return fallback\n}\n"],"file":"browserslist.js"}