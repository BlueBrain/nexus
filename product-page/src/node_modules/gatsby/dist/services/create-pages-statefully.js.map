{"version":3,"sources":["../../src/services/create-pages-statefully.ts"],"names":["createPagesStatefully","parentSpan","gatsbyNodeGraphQLFunction","deferNodeMutation","activity","reporter","activityTimer","start","graphql","traceId","waitForCascadingActions","span","end"],"mappings":";;;;;;;AAAA;;AACA;;AAGO,eAAeA,qBAAf,CAAqC;AAC1CC,EAAAA,UAD0C;AAE1CC,EAAAA,yBAF0C;AAG1CC,EAAAA;AAH0C,CAArC,EAIuC;AAC5C;AACA;AACA;AACA;AACA,QAAMC,QAAQ,GAAGC,kBAASC,aAAT,CAAwB,uBAAxB,EAAgD;AAC/DL,IAAAA;AAD+D,GAAhD,CAAjB;;AAGAG,EAAAA,QAAQ,CAACG,KAAT;AACA,QAAM,4BACH,uBADG,EAEJ;AACEC,IAAAA,OAAO,EAAEN,yBADX;AAEEO,IAAAA,OAAO,EAAG,+BAFZ;AAGEC,IAAAA,uBAAuB,EAAE,IAH3B;AAIET,IAAAA,UAAU,EAAEG,QAAQ,CAACO,IAJvB;AAKER,IAAAA;AALF,GAFI,EASJ;AACEC,IAAAA;AADF,GATI,CAAN;AAaAA,EAAAA,QAAQ,CAACQ,GAAT;AACD","sourcesContent":["import reporter from \"gatsby-cli/lib/reporter\"\nimport apiRunnerNode from \"../utils/api-runner-node\"\nimport { IDataLayerContext } from \"../state-machines/data-layer/types\"\n\nexport async function createPagesStatefully({\n  parentSpan,\n  gatsbyNodeGraphQLFunction,\n  deferNodeMutation,\n}: Partial<IDataLayerContext>): Promise<void> {\n  // A variant on createPages for plugins that want to\n  // have full control over adding/removing pages. The normal\n  // \"createPages\" API is called every time (during development)\n  // that data changes.\n  const activity = reporter.activityTimer(`createPagesStatefully`, {\n    parentSpan,\n  })\n  activity.start()\n  await apiRunnerNode(\n    `createPagesStatefully`,\n    {\n      graphql: gatsbyNodeGraphQLFunction,\n      traceId: `initial-createPagesStatefully`,\n      waitForCascadingActions: true,\n      parentSpan: activity.span,\n      deferNodeMutation,\n    },\n    {\n      activity,\n    }\n  )\n  activity.end()\n}\n"],"file":"create-pages-statefully.js"}