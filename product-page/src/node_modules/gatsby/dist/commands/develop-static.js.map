{"version":3,"sources":["../../src/commands/develop-static.ts"],"names":["developStatic","root","options","expressStatic","express","static","req","res","next","includes","method","path","pathname","parsedPath","sysPath","parse","ext"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEO,SAASA,aAAT,CACLC,IADK,EAELC,OAFK,EAGY;AACjB,QAAMC,aAAa,GAAGC,iBAAQC,MAAR,CAAeJ,IAAf,EAAqBC,OAArB,CAAtB;;AAEA,SAAO,UACLI,GADK,EAELC,GAFK,EAGLC,IAHK,EAIwB;AAC7B,QAAI,CAAE,KAAF,EAAS,MAAT,EAAgBC,QAAhB,CAAyBH,GAAG,CAACI,MAA7B,CAAJ,EAA0C;AACxC,YAAMC,IAAI,GAAG,uBAASL,GAAT,EAAcM,QAA3B;;AACA,YAAMC,UAAU,GAAGC,cAAQC,KAAR,CAAcJ,IAAd,CAAnB;;AACA,UAAI,CAAE,MAAF,EAAU,OAAV,EAAkBF,QAAlB,CAA2BI,UAAU,CAACG,GAAtC,CAAJ,EAAgD;AAC9C,eAAOR,IAAI,EAAX;AACD;AACF;;AAED,WAAOL,aAAa,CAACG,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAApB;AACD,GAdD;AAeD","sourcesContent":["import sysPath from \"path\"\nimport express from \"express\"\nimport { ServeStaticOptions } from \"serve-static\"\nimport parseUrl from \"parseurl\"\n\nexport function developStatic(\n  root: string,\n  options: ServeStaticOptions\n): express.Handler {\n  const expressStatic = express.static(root, options)\n\n  return function (\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ): typeof expressStatic | void {\n    if ([`GET`, `HEAD`].includes(req.method)) {\n      const path = parseUrl(req).pathname\n      const parsedPath = sysPath.parse(path)\n      if ([`.htm`, `.html`].includes(parsedPath.ext)) {\n        return next()\n      }\n    }\n\n    return expressStatic(req, res, next)\n  }\n}\n"],"file":"develop-static.js"}