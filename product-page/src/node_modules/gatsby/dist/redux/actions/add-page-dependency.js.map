{"version":3,"sources":["../../../src/redux/actions/add-page-dependency.ts"],"names":["createPageDependency","path","nodeId","connection","componentDataDependencies","store","getState","nodeDependencyExists","connectionDependencyExists","nodes","has","get","connections","dispatch"],"mappings":";;;;;AAAA;;AAEA;;AAEO,MAAMA,oBAAoB,GAAG,CAAC;AACnCC,EAAAA,IADmC;AAEnCC,EAAAA,MAFmC;AAGnCC,EAAAA;AAHmC,CAAD,KAQxB;AACV,QAAM;AAAEC,IAAAA;AAAF,MAAgCC,QAAMC,QAAN,EAAtC,CADU,CAGV;AACA;;;AACA,MAAIC,oBAAoB,GAAG,KAA3B;AACA,MAAIC,0BAA0B,GAAG,KAAjC;;AACA,MAAI,CAACN,MAAL,EAAa;AACXK,IAAAA,oBAAoB,GAAG,IAAvB;AACD;;AACD,MACEL,MAAM,IACNE,yBAAyB,CAACK,KAA1B,CAAgCC,GAAhC,CAAoCR,MAApC,CADA,IAEAE,yBAAyB,CAACK,KAA1B,CAAgCE,GAAhC,CAAoCT,MAApC,EAA6CQ,GAA7C,CAAiDT,IAAjD,CAHF,EAIE;AACAM,IAAAA,oBAAoB,GAAG,IAAvB;AACD;;AACD,MAAI,CAACJ,UAAL,EAAiB;AACfK,IAAAA,0BAA0B,GAAG,IAA7B;AACD;;AACD,MACEL,UAAU,IACVC,yBAAyB,CAACQ,WAA1B,CAAsCF,GAAtC,CAA0CP,UAA1C,CADA,IAEAC,yBAAyB,CAACQ,WAA1B,CAAsCD,GAAtC,CAA0CR,UAA1C,EAAuDO,GAAvD,CAA2DT,IAA3D,CAHF,EAIE;AACAO,IAAAA,0BAA0B,GAAG,IAA7B;AACD;;AACD,MAAID,oBAAoB,IAAIC,0BAA5B,EAAwD;AACtD;AACD,GA7BS,CA+BV;;;AACAH,UAAMQ,QAAN,CAAe,oCAA6B;AAAEZ,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA;AAAhB,GAA7B,CAAf;AACD,CAzCM","sourcesContent":["import { store } from \"../\"\n\nimport { createPageDependency as internalCreatePageDependency } from \"./internal\"\n\nexport const createPageDependency = ({\n  path,\n  nodeId,\n  connection,\n}: {\n  path: string\n  nodeId: string\n  connection?: string\n}): void => {\n  const { componentDataDependencies } = store.getState()\n\n  // Check that the dependencies aren't already recorded so we\n  // can avoid creating lots of very noisy actions.\n  let nodeDependencyExists = false\n  let connectionDependencyExists = false\n  if (!nodeId) {\n    nodeDependencyExists = true\n  }\n  if (\n    nodeId &&\n    componentDataDependencies.nodes.has(nodeId) &&\n    componentDataDependencies.nodes.get(nodeId)!.has(path)\n  ) {\n    nodeDependencyExists = true\n  }\n  if (!connection) {\n    connectionDependencyExists = true\n  }\n  if (\n    connection &&\n    componentDataDependencies.connections.has(connection) &&\n    componentDataDependencies.connections.get(connection)!.has(path)\n  ) {\n    connectionDependencyExists = true\n  }\n  if (nodeDependencyExists && connectionDependencyExists) {\n    return\n  }\n\n  // It's new, let's dispatch it\n  store.dispatch(internalCreatePageDependency({ path, nodeId, connection }))\n}\n"],"file":"add-page-dependency.js"}