{"version":3,"sources":["../../src/schema/context.ts"],"names":["withResolverContext","schema","schemaComposer","context","customContext","nodeModel","stats","tracer","LocalNodeModel","createPageDependency","defaultFieldResolver","withContext","path","undefined","module","exports"],"mappings":";;;;;AAGA;;AACA;;AACA;;AAIe,SAASA,mBAAT,CAA6C;AAC1DC,EAAAA,MAD0D;AAE1DC,EAAAA,cAF0D;AAG1DC,EAAAA,OAH0D;AAI1DC,EAAAA,aAJ0D;AAK1DC,EAAAA,SAL0D;AAM1DC,EAAAA,KAN0D;AAO1DC,EAAAA;AAP0D,CAA7C,EAgB4B;AACzC,MAAI,CAACF,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAG,IAAIG,yBAAJ,CAAmB;AAC7BP,MAAAA,MAD6B;AAE7BC,MAAAA,cAF6B;AAG7BO,MAAAA,oBAAoB,EAApBA;AAH6B,KAAnB,CAAZ;AAKD;;AAED,SAAO,EACL,IAAIN,OAAO,IAAI,EAAf,CADK;AAEL,QAAIC,aAAa,IAAI,EAArB,CAFK;AAGLM,IAAAA,oBAAoB,EAApBA,+BAHK;AAILL,IAAAA,SAAS,EAAEA,SAAS,CAACM,WAAV,CAAsB;AAC/BC,MAAAA,IAAI,EAAET,OAAO,GAAGA,OAAO,CAACS,IAAX,GAAkBC;AADA,KAAtB,CAJN;AAOLP,IAAAA,KAAK,EAAEA,KAAK,IAAI,IAPX;AAQLC,IAAAA,MAAM,EAAEA,MAAM,IAAI;AARb,GAAP;AAUD;;AAEDO,MAAM,CAACC,OAAP,GAAiBf,mBAAjB","sourcesContent":["import { GraphQLSchema } from \"graphql\"\nimport { SchemaComposer } from \"graphql-compose\"\n\nimport { createPageDependency } from \"../redux/actions/add-page-dependency\"\nimport { LocalNodeModel } from \"./node-model\"\nimport { defaultFieldResolver } from \"./resolvers\"\nimport { IGraphQLRunnerStats } from \"../query/types\"\nimport { IGatsbyResolverContext, IGraphQLSpanTracer } from \"./type-definitions\"\n\nexport default function withResolverContext<TSource, TArgs>({\n  schema,\n  schemaComposer,\n  context,\n  customContext,\n  nodeModel,\n  stats,\n  tracer,\n}: {\n  schema: GraphQLSchema\n  schemaComposer: SchemaComposer<IGatsbyResolverContext<TSource, TArgs>> | null\n  context?: Record<string, any>\n  customContext?: Record<string, any>\n  nodeModel?: any\n  stats?: IGraphQLRunnerStats | null\n  tracer?: IGraphQLSpanTracer\n}): IGatsbyResolverContext<TSource, TArgs> {\n  if (!nodeModel) {\n    nodeModel = new LocalNodeModel({\n      schema,\n      schemaComposer,\n      createPageDependency,\n    })\n  }\n\n  return {\n    ...(context || {}),\n    ...(customContext || {}),\n    defaultFieldResolver,\n    nodeModel: nodeModel.withContext({\n      path: context ? context.path : undefined,\n    }),\n    stats: stats || null,\n    tracer: tracer || null,\n  }\n}\n\nmodule.exports = withResolverContext\n"],"file":"context.js"}