{"version":3,"sources":["../../../src/internal-plugins/load-babel-config/gatsby-node.js"],"names":["fs","require","apiRunnerNode","exports","onPreBootstrap","store","parentSpan","directory","browserslist","getState","program","directoryPath","stage","babelState","JSON","stringify","babelrc","writeFile"],"mappings":";;AAKA;;AAHA,MAAMA,EAAE,GAAGC,OAAO,CAAE,UAAF,CAAlB;;AAEA,MAAMC,aAAa,GAAGD,OAAO,CAAE,6BAAF,CAA7B;;AAGAE,OAAO,CAACC,cAAR,GAAyB,OAAO;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAP,KAAiC;AACxD,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA8BH,KAAK,CAACI,QAAN,GAAiBC,OAArD;AACA,QAAMC,aAAa,GAAG,wBAAaJ,SAAb,CAAtB;AAEA,QAAML,aAAa,CAAE,qBAAF,EAAwB;AACzCU,IAAAA,KAAK,EAAG,SADiC;AAEzCN,IAAAA;AAFyC,GAAxB,CAAnB;AAIA,QAAMJ,aAAa,CAAE,qBAAF,EAAwB;AACzCU,IAAAA,KAAK,EAAG,cADiC;AAEzCN,IAAAA;AAFyC,GAAxB,CAAnB;AAIA,QAAMJ,aAAa,CAAE,qBAAF,EAAwB;AACzCU,IAAAA,KAAK,EAAG,kBADiC;AAEzCN,IAAAA;AAFyC,GAAxB,CAAnB;AAIA,QAAMJ,aAAa,CAAE,qBAAF,EAAwB;AACzCU,IAAAA,KAAK,EAAG,YADiC;AAEzCN,IAAAA;AAFyC,GAAxB,CAAnB;AAKA,QAAMO,UAAU,GAAGC,IAAI,CAACC,SAAL,CACjB,EACE,GAAGV,KAAK,CAACI,QAAN,GAAiBO,OADtB;AAEER,IAAAA;AAFF,GADiB,EAKjB,IALiB,EAMjB,CANiB,CAAnB;AASA,QAAMR,EAAE,CAACiB,SAAH,CAAaN,aAAa,CAAE,wBAAF,CAA1B,EAAsDE,UAAtD,CAAN;AACD,CA/BD","sourcesContent":["/* @flow */\n\nconst fs = require(`fs-extra`)\n\nconst apiRunnerNode = require(`../../utils/api-runner-node`)\nimport { withBasePath } from \"../../utils/path\"\n\nexports.onPreBootstrap = async ({ store, parentSpan }) => {\n  const { directory, browserslist } = store.getState().program\n  const directoryPath = withBasePath(directory)\n\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop-html`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-javascript`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-html`,\n    parentSpan,\n  })\n\n  const babelState = JSON.stringify(\n    {\n      ...store.getState().babelrc,\n      browserslist,\n    },\n    null,\n    2\n  )\n\n  await fs.writeFile(directoryPath(`.cache/babelState.json`), babelState)\n}\n"],"file":"gatsby-node.js"}