var e=require("@urql/core"),t=require("react"),r=require("wonka"),n=e.createClient({url:"/graphql"}),u=t.createContext(n),o=u.Provider,a=u.Consumer,c=function(){return t.useContext(u)};function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0};function f(n){var u=t.useRef(!0),o=c(),a=t.useState(s),f=a[0],l=a[1];function p(e){return u.current&&l({fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}),e}var v=t.useCallback((function(t,u){return l(i({},s,{fetching:!0})),r.toPromise(o.executeMutation(e.createRequest(n,t),u||{})).then(p)}),[o,n,l]);function x(){u.current=!1}return t.useEffect((function(){return x}),[]),[f,v]}var l=!1;function p(e,n){var u=t.useRef(!0),o=t.useState((function(){l=!0;var t=n;return r.publish(r.onPush((function(e){t=e}))(e)).unsubscribe(),l=!1,t})),a=o[0],c=o[1];function i(){u.current=!1}function s(e){!l&&u.current&&c(e)}return t.useEffect((function(){return i}),[]),t.useEffect((function(){return r.subscribe(s)(e).unsubscribe}),[e]),a}function v(e){var n=c(),u=t.useMemo((function(){var t=e,n=r.makeSubject(),u=r.map((function(){return t}))(r.fromValue(e));return[r.concat([u,n.source]),function(e){e!==t&&n.next(t=e)}]}),[]);return t.useEffect((function(){n.suspense||u[1](e)}),[u,e]),n.suspense&&u[1](e),u}function x(r,n){var u=t.useRef(void 0);return t.useMemo((function(){var t=e.createRequest(r,n);return void 0!==u.current&&u.current.key===t.key?u.current:(u.current=t,t)}),[r,n])}function d(e,t){return i({},e,t)}function h(e){return{fetching:!1,stale:!!e.stale,data:e.data,error:e.error,operation:e.operation,extensions:e.extensions}}function b(e){return e?r.concat([r.fromValue({fetching:!0,stale:!1}),r.map(h)(e),r.fromValue({fetching:!1,stale:!1})]):r.fromValue({fetching:!1,stale:!1})}function m(e){var n=c(),u=x(e.query,e.variables),o=t.useCallback((function(t){return n.executeQuery(u,i({},{requestPolicy:e.requestPolicy,pollInterval:e.pollInterval},e.context,t))}),[n,u,e.requestPolicy,e.pollInterval,e.context]),a=v(t.useMemo((function(){return e.pause?null:o()}),[e.pause,o])),f=a[0],l=a[1];return[p(t.useMemo((function(){return r.scan(d,s)(r.switchMap(b)(f))}),[f]),s),t.useCallback((function(e){return l(o(e))}),[l,o])]}function y(e){return{fetching:!0,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}}function g(e){return e?r.concat([r.fromValue({fetching:!0,stale:!1}),r.map(y)(e),r.fromValue({fetching:!1,stale:!1})]):r.fromValue({fetching:!1})}function q(e,n){var u=c(),o=t.useRef(n);o.current=n;var a=x(e.query,e.variables),f=t.useCallback((function(t){return u.executeSubscription(a,i({},e.context,t))}),[u,a,e.context]),l=v(t.useMemo((function(){return e.pause?null:f()}),[e.pause,f])),d=l[0],h=l[1];function b(e,t){var r=o.current;return i({},e,t,{data:void 0!==t.data?"function"==typeof r?r(e.data,t.data):t.data:e.data})}return[p(t.useMemo((function(){return r.scan(b,s)(r.switchMap(g)(d))}),[d]),s),t.useCallback((function(e){return h(f(e))}),[h,f])]}Object.keys(e).forEach((function(t){"default"!==t&&(exports[t]=e[t])})),exports.Consumer=a,exports.Context=u,exports.Mutation=function(e){var t=f(e.query);return e.children(i({},t[0],{executeMutation:t[1]}))},exports.Provider=o,exports.Query=function(e){var t=m(e);return e.children(i({},t[0],{executeQuery:t[1]}))},exports.Subscription=function(e){var t=q(e,e.handler);return e.children(i({},t[0],{executeSubscription:t[1]}))},exports.useClient=c,exports.useMutation=f,exports.useQuery=m,exports.useSubscription=q;
//# sourceMappingURL=urql.min.js.map
