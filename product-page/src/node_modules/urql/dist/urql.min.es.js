import{createClient as n,createRequest as r}from"@urql/core";export*from"@urql/core";import{createContext as t,useContext as e,useRef as u,useState as o,useCallback as i,useEffect as c,useMemo as a}from"react";import{toPromise as f,publish as s,onPush as l,subscribe as v,makeSubject as p,map as d,fromValue as h,concat as x,scan as g,switchMap as y}from"wonka";var b=t(n({url:"/graphql"})),q=b.Provider,m=b.Consumer,P=function(){return e(b)};function k(){return(k=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}var I={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0};function O(n){var t=u(!0),e=P(),a=o(I),s=a[0],l=a[1];function v(n){return t.current&&l({fetching:!1,stale:!!n.stale,data:n.data,error:n.error,extensions:n.extensions,operation:n.operation}),n}var p=i((function(t,u){return l(k({},I,{fetching:!0})),f(e.executeMutation(r(n,t),u||{})).then(v)}),[e,n,l]);function d(){t.current=!1}return c((function(){return d}),[]),[s,p]}var j=!1;function w(n,r){var t=u(!0),e=o((function(){j=!0;var t=r;return s(l((function(n){t=n}))(n)).unsubscribe(),j=!1,t})),i=e[0],a=e[1];function f(){t.current=!1}function p(n){!j&&t.current&&a(n)}return c((function(){return f}),[]),c((function(){return v(p)(n).unsubscribe}),[n]),i}function M(n){var r=P(),t=a((function(){var r=n,t=p(),e=d((function(){return r}))(h(n));return[x([e,t.source]),function(n){n!==r&&t.next(r=n)}]}),[]);return c((function(){r.suspense||t[1](n)}),[t,n]),r.suspense&&t[1](n),t}function Q(n,t){var e=u(void 0);return a((function(){var u=r(n,t);return void 0!==e.current&&e.current.key===u.key?e.current:(e.current=u,u)}),[n,t])}function S(n,r){return k({},n,r)}function C(n){return{fetching:!1,stale:!!n.stale,data:n.data,error:n.error,operation:n.operation,extensions:n.extensions}}function z(n){return n?x([h({fetching:!0,stale:!1}),d(C)(n),h({fetching:!1,stale:!1})]):h({fetching:!1,stale:!1})}function A(n){var r=P(),t=Q(n.query,n.variables),e=i((function(e){return r.executeQuery(t,k({},{requestPolicy:n.requestPolicy,pollInterval:n.pollInterval},n.context,e))}),[r,t,n.requestPolicy,n.pollInterval,n.context]),u=M(a((function(){return n.pause?null:e()}),[n.pause,e])),o=u[0],c=u[1];return[w(a((function(){return g(S,I)(y(z)(o))}),[o]),I),i((function(n){return c(e(n))}),[c,e])]}function B(n){return{fetching:!0,stale:!!n.stale,data:n.data,error:n.error,extensions:n.extensions,operation:n.operation}}function D(n){return n?x([h({fetching:!0,stale:!1}),d(B)(n),h({fetching:!1,stale:!1})]):h({fetching:!1})}function E(n,r){var t=P(),e=u(r);e.current=r;var o=Q(n.query,n.variables),c=i((function(r){return t.executeSubscription(o,k({},n.context,r))}),[t,o,n.context]),f=M(a((function(){return n.pause?null:c()}),[n.pause,c])),s=f[0],l=f[1];function v(n,r){var t=e.current;return k({},n,r,{data:void 0!==r.data?"function"==typeof t?t(n.data,r.data):r.data:n.data})}return[w(a((function(){return g(v,I)(y(D)(s))}),[s]),I),i((function(n){return l(c(n))}),[l,c])]}function F(n){var r=O(n.query);return n.children(k({},r[0],{executeMutation:r[1]}))}function G(n){var r=A(n);return n.children(k({},r[0],{executeQuery:r[1]}))}function H(n){var r=E(n,n.handler);return n.children(k({},r[0],{executeSubscription:r[1]}))}export{m as Consumer,b as Context,F as Mutation,q as Provider,G as Query,H as Subscription,P as useClient,O as useMutation,A as useQuery,E as useSubscription};
//# sourceMappingURL=urql.min.es.js.map
