{"version":3,"file":"index.umd.js","sources":["../src/jsx.js","../src/merge.js","../src/styled.js","../src/themed.js","../src/components.js","../src/context.js","../src/custom-properties.js","../src/color-modes.js","../src/provider.js","../src/layout.js","../src/base-styles.js"],"sourcesContent":["import { jsx as emotion } from '@emotion/core'\nimport css from '@styled-system/css'\n\nconst getCSS = props => {\n  if (!props.sx && !props.css) return undefined\n  return theme => {\n    const styles = css(props.sx)(theme)\n    const raw = typeof props.css === 'function' ? props.css(theme) : props.css\n    return [styles, raw]\n  }\n}\n\nconst parseProps = props => {\n  if (!props) return null\n  const next = {}\n  for (let key in props) {\n    if (key === 'sx') continue\n    next[key] = props[key]\n  }\n  const css = getCSS(props)\n  if (css) next.css = css\n  return next\n}\n\nexport const jsx = (type, props, ...children) =>\n  emotion.apply(undefined, [type, parseProps(props), ...children])\n\nexport default jsx\n","import deepmerge from 'deepmerge'\n\nconst canUseSymbol = typeof Symbol === 'function' && Symbol.for\n\nconst REACT_ELEMENT = canUseSymbol ? Symbol.for('react.element') : 0xeac7\nconst FORWARD_REF = canUseSymbol ? Symbol.for('react.forward_ref') : 0xeac7\n\nconst isMergeableObject = n => {\n  return (\n    !!n &&\n    typeof n === 'object' &&\n    n.$$typeof !== REACT_ELEMENT &&\n    n.$$typeof !== FORWARD_REF\n  )\n}\n\nconst arrayMerge = (destinationArray, sourceArray, options) => sourceArray\n\nexport const merge = (a, b) =>\n  deepmerge(a, b, { isMergeableObject, arrayMerge })\n\nmerge.all = (...args) => deepmerge.all(args, { isMergeableObject, arrayMerge })\n\nexport default merge\n","import { forwardRef, useContext } from 'react'\nimport { ThemeContext } from '@emotion/core'\nimport isPropValid from '@emotion/is-prop-valid'\nimport jsx from './jsx'\n\nexport const styled = tag => (...args) => {\n  const Styled = forwardRef(({ as, ...props }, ref) => {\n    const shouldForwardProps =\n      typeof tag !== 'string' || (as && typeof as !== 'string')\n    const theme = useContext(ThemeContext)\n    let nextProps = shouldForwardProps ? props : {}\n    let styles = {}\n    args.forEach(arg => {\n      const style = typeof arg === 'function' ? arg({ theme, ...props }) : arg\n      Object.assign(styles, style)\n    })\n\n    if (!shouldForwardProps) {\n      for (let key in props) {\n        if (!isPropValid(key)) continue\n        nextProps[key] = props[key]\n      }\n    }\n\n    return jsx(as || tag, {\n      ...nextProps,\n      ref,\n      css: styles,\n    })\n  })\n  return Styled\n}\n\nexport default styled\n","import { css, get } from '@styled-system/css'\n\nexport const themed = key => props =>\n  css(get(props.theme, `styles.${key}`))(props.theme)\n\nexport default themed\n","import styled from './styled'\nimport themed from './themed'\n\nconst tags = [\n  'p',\n  'b',\n  'i',\n  'a',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'img',\n  'pre',\n  'code',\n  'ol',\n  'ul',\n  'li',\n  'blockquote',\n  'hr',\n  'em',\n  'table',\n  'tr',\n  'th',\n  'td',\n  'em',\n  'strong',\n  'delete',\n  // mdx\n  'inlineCode',\n  'thematicBreak',\n  // other\n  'div',\n  // theme-ui\n  'root',\n]\n\nconst aliases = {\n  inlineCode: 'code',\n  thematicBreak: 'hr',\n  root: 'div',\n}\n\nconst alias = n => aliases[n] || n\n\nexport const Styled = styled('div')(themed('div'))\n\nexport const components = {}\n\ntags.forEach(tag => {\n  components[tag] = styled(alias(tag))(themed(tag))\n  Styled[tag] = components[tag]\n})\n\nexport const createComponents = (components = {}) => {\n  const next = {}\n  Object.keys(components).forEach(key => {\n    next[key] = styled(components[key])(themed(key))\n  })\n  return next\n}\n","import { createContext, useContext } from 'react'\nimport { components } from './components'\nimport { version as emotionVersion } from '@emotion/core/package.json'\n\nexport const Context = createContext({\n  emotionVersion,\n  theme: null,\n  components,\n})\n\nexport const useThemeUI = () => useContext(Context)\n","// convert theme and style objects to CSS custom properties\nimport { css } from '@styled-system/css'\n\nconst toVarName = key => `--theme-ui-${key}`\nconst toVarValue = (key, value) => `var(${toVarName(key)}, ${value})`\n\nconst join = (...args) => args.filter(Boolean).join('-')\n\nconst numberScales = {\n  fontWeights: true,\n  lineHeights: true,\n}\nconst reservedKeys = {\n  useCustomProperties: true,\n  initialColorModeName: true,\n  initialColorMode: true,\n}\n\nconst toPixel = (key, value) => {\n  if (typeof value !== 'number') return value\n  if (numberScales[key]) return value\n  return value + 'px'\n}\n\n// convert theme values to custom properties\nexport const toCustomProperties = (obj, parent, themeKey) => {\n  const next = Array.isArray(obj) ? [] : {}\n\n  for (let key in obj) {\n    const value = obj[key]\n    const name = join(parent, key)\n    if (value && typeof value === 'object') {\n      next[key] = toCustomProperties(value, name, key)\n      continue\n    }\n    if (reservedKeys[key]) {\n      next[key] = value\n      continue\n    }\n    const val = toPixel(themeKey || key, value)\n    next[key] = toVarValue(name, val)\n  }\n\n  return next\n}\n\nexport const objectToVars = (parent, obj) => {\n  let vars = {}\n  for (let key in obj) {\n    if (key === 'modes') continue\n    const name = join(parent, key)\n    const value = obj[key]\n    if (value && typeof value === 'object') {\n      vars = {\n        ...vars,\n        ...objectToVars(name, value),\n      }\n    } else {\n      vars[toVarName(name)] = value\n    }\n  }\n  return vars\n}\n\n// create body styles for color modes\nexport const createColorStyles = theme => {\n  if (!theme.colors || !theme.colors.modes) return {}\n  if (theme.useCustomProperties === false) {\n    return css({\n      color: 'text',\n      bg: 'background',\n    })(theme)\n  }\n  const { modes } = theme.colors\n  const styles = objectToVars('colors', theme.colors)\n\n  Object.keys(modes).forEach(mode => {\n    const key = `&.theme-ui-${mode}`\n    styles[key] = objectToVars('colors', modes[mode])\n  })\n\n  return css({\n    ...styles,\n    color: t => `var(--theme-ui-colors-text, ${t.colors.text})`,\n    bg: t => `var(--theme-ui-colors-background, ${t.colors.background})`,\n  })(theme)\n}\n","import React, { useState, useEffect } from 'react'\nimport { css } from '@styled-system/css'\nimport { Global } from '@emotion/core'\nimport { useThemeUI } from './context'\nimport { createColorStyles } from './custom-properties'\n\nconst STORAGE_KEY = 'theme-ui-color-mode'\nconst HAS_STORAGE = typeof Storage !== 'undefined'\n\nconst storage = {\n  get: init => HAS_STORAGE && window.localStorage.getItem(STORAGE_KEY) || init,\n  set: value => HAS_STORAGE && window.localStorage.setItem(STORAGE_KEY, value),\n}\n\nexport const getMediaQuery = () => {\n  const darkQuery = '(prefers-color-scheme: dark)'\n  const mql = window.matchMedia ? window.matchMedia(darkQuery) : {}\n  const dark = mql.media === darkQuery\n  return dark && mql.matches\n}\n\nconst getName = theme =>\n  theme.initialColorModeName || theme.initialColorMode || 'default'\n\nexport const useColorState = theme => {\n  const [mode, setMode] = useState(getName(theme))\n\n  useEffect(() => {\n    // initialize\n    const stored = storage.get()\n    document.body.classList.remove('theme-ui-' + stored)\n    const dark = getMediaQuery()\n    if (!stored && dark && theme.useColorSchemeMediaQuery)\n      return setMode('dark')\n    if (!stored || stored === mode) return\n    setMode(stored)\n  }, [])\n\n  useEffect(() => {\n    if (!mode) return\n    storage.set(mode)\n  }, [mode])\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (\n      theme.colors &&\n      theme.colors.modes &&\n      Object.keys(theme.colors.modes).indexOf(getName(theme)) > -1\n    ) {\n      console.warn(\n        'The `initialColorMode` value should be a unique name' +\n          ' and cannot reference a key in `theme.colors.modes`.'\n      )\n    }\n  }\n\n  return [mode, setMode]\n}\n\nexport const useColorMode = () => {\n  const { colorMode, setColorMode } = useThemeUI()\n\n  if (typeof setColorMode !== 'function') {\n    throw new Error(`[useColorMode] requires the ThemeProvider component`)\n  }\n\n  return [colorMode, setColorMode]\n}\n\nconst bodyColor = theme => ({\n  body: createColorStyles(theme),\n})\n\nexport const ColorMode = () => <Global styles={bodyColor} />\n\nexport const InitializeColorMode = () => (\n  <script\n    key=\"theme-ui-no-flash\"\n    dangerouslySetInnerHTML={{\n      __html: `(function() { try {\n        var mode = localStorage.getItem('theme-ui-color-mode');\n        if (!mode) return\n        document.body.classList.add('theme-ui-' + mode);\n      } catch (e) {} })();`,\n    }}\n  />\n)\n\nexport default useColorMode\n","import { useEffect, useReducer } from 'react'\nimport { ThemeContext as EmotionContext } from '@emotion/core'\nimport { version as emotionVersion } from '@emotion/core/package.json'\nimport { MDXProvider } from '@mdx-js/react'\nimport { get } from '@styled-system/css'\nimport merge from './merge'\nimport jsx from './jsx'\nimport { Context, useThemeUI } from './context'\nimport { useColorState } from './color-modes'\nimport { createComponents } from './components'\nimport { toCustomProperties } from './custom-properties'\n\nconst mergeState = (state = {}, next) => merge.all({}, state, next)\n\nconst applyColorMode = (theme, mode) => {\n  if (!mode) return theme\n  const modes = get(theme, 'colors.modes', {})\n  return merge.all({}, theme, {\n    colors: get(modes, mode, {}),\n  })\n}\n\nconst BaseProvider = ({ context, components, children }) => {\n  const theme = { ...context.theme }\n  if (theme.useCustomProperties !== false) {\n    theme.colors = toCustomProperties(theme.colors, 'colors')\n  }\n  return jsx(\n    EmotionContext.Provider,\n    { value: theme },\n    jsx(\n      MDXProvider,\n      { components },\n      jsx(Context.Provider, { value: context, children })\n    )\n  )\n}\n\nconst RootProvider = ({ theme: propsTheme = {}, components, children }) => {\n  // components are provided in the default Context\n  const outer = useThemeUI()\n  const propsThemeObject =\n    typeof propsTheme === 'function' ? propsTheme({}) : propsTheme\n  const [colorMode, setColorMode] = useColorState(\n    outer.theme || propsThemeObject\n  )\n\n  const theme = applyColorMode(outer.theme || propsThemeObject, colorMode)\n\n  const context = {\n    ...outer,\n    __THEME_UI__: true,\n    colorMode,\n    setColorMode,\n    components: { ...outer.components, ...createComponents(components) },\n    theme,\n  }\n\n  useEffect(() => {\n    window.__THEME_UI__ = context\n  }, [context.theme, context.colorMode])\n\n  return jsx(BaseProvider, {\n    context,\n    components: context.components,\n    children,\n  })\n}\n\nconst NestedProvider = ({ theme, components, children }) => {\n  const outer = useThemeUI()\n  const context =\n    typeof theme === 'function'\n      ? { ...outer, theme: theme(outer.theme) }\n      : merge.all({}, outer, { theme })\n\n  return jsx(BaseProvider, {\n    context,\n    components: createComponents(components),\n    children,\n  })\n}\n\nexport const ThemeProvider = props => {\n  const outer = useThemeUI()\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (outer.emotionVersion !== emotionVersion) {\n      console.warn(\n        'Multiple versions of Emotion detected,',\n        'and theming might not work as expected.',\n        'Please ensure there is only one copy of @emotion/core installed in your application.'\n      )\n    }\n  }\n\n  if (!props.scoped && outer.__THEME_UI__) {\n    return jsx(NestedProvider, props)\n  }\n  return jsx(RootProvider, props)\n}\n\nexport const ThemeStateProvider = ({ theme, children }) => {\n  const outer = useThemeUI()\n  const [state, setTheme] = useReducer(mergeState, theme)\n  const context = {\n    ...outer,\n    theme: state,\n    setTheme,\n  }\n\n  return jsx(Context.Provider, {\n    value: context,\n    children,\n  })\n}\n","import jsx from './jsx'\nimport styled from './styled'\n\nexport const Box = styled('div')({\n  boxSizing: 'border-box',\n  minWidth: 0,\n})\n\nexport const Flex = styled(Box)({\n  display: 'flex',\n})\n\n// root/page layout\nexport const Layout = props =>\n  jsx(Box, {\n    ...props,\n    sx: {\n      minHeight: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      variant: 'styles.Layout',\n    },\n  })\n\nexport const Header = props =>\n  jsx(Box, {\n    as: 'header',\n    ...props,\n    sx: {\n      display: 'flex',\n      variant: 'styles.Header',\n    },\n  })\n\nexport const Main = props =>\n  jsx(Box, {\n    as: 'main',\n    ...props,\n    sx: {\n      flex: '1 1 auto',\n      variant: 'styles.Main',\n    },\n  })\n\nexport const Container = props =>\n  jsx(Box, {\n    ...props,\n    sx: {\n      width: '100%',\n      minWidth: 0,\n      maxWidth: 1024,\n      mx: 'auto',\n      p: 4,\n      variant: 'styles.Container',\n    },\n  })\n\nexport const Footer = props =>\n  jsx(Box, {\n    as: 'footer',\n    ...props,\n    sx: {\n      display: 'flex',\n      variant: 'styles.Footer',\n    },\n  })\n","/** @jsx jsx */\nimport jsx from './jsx'\n\nexport const BaseStyles = props =>\n  <div\n    {...props}\n    sx={{\n      fontFamily: 'body',\n      lineHeight: 'body',\n      fontWeight: 'body',\n      variant: 'styles',\n    }}\n  />\n\nexport default BaseStyles\n"],"names":["getCSS","props","sx","css","undefined","theme","styles","raw","parseProps","next","key","jsx","type","children","emotion","apply","canUseSymbol","Symbol","REACT_ELEMENT","FORWARD_REF","isMergeableObject","n","$$typeof","arrayMerge","destinationArray","sourceArray","options","merge","a","b","deepmerge","all","args","styled","tag","Styled","forwardRef","ref","as","shouldForwardProps","useContext","ThemeContext","nextProps","forEach","arg","style","Object","assign","isPropValid","themed","get","tags","aliases","inlineCode","thematicBreak","root","alias","components","createComponents","keys","Context","createContext","emotionVersion","useThemeUI","toVarName","toVarValue","value","join","filter","Boolean","numberScales","fontWeights","lineHeights","reservedKeys","useCustomProperties","initialColorModeName","initialColorMode","toPixel","toCustomProperties","obj","parent","themeKey","Array","isArray","name","val","objectToVars","vars","createColorStyles","colors","modes","color","bg","mode","t","text","background","STORAGE_KEY","HAS_STORAGE","Storage","storage","init","window","localStorage","getItem","set","setItem","getMediaQuery","darkQuery","mql","matchMedia","dark","media","matches","getName","useColorState","useState","setMode","useEffect","stored","document","body","classList","remove","useColorSchemeMediaQuery","process","env","NODE_ENV","indexOf","console","warn","useColorMode","colorMode","setColorMode","Error","bodyColor","ColorMode","React","Global","InitializeColorMode","__html","mergeState","state","applyColorMode","BaseProvider","context","EmotionContext","Provider","MDXProvider","RootProvider","propsTheme","outer","propsThemeObject","__THEME_UI__","NestedProvider","ThemeProvider","scoped","ThemeStateProvider","useReducer","setTheme","Box","boxSizing","minWidth","Flex","display","Layout","minHeight","flexDirection","variant","Header","Main","flex","Container","width","maxWidth","mx","p","Footer","BaseStyles","fontFamily","lineHeight","fontWeight"],"mappings":";;;;;;;;;;EAGA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK,EAAI;QAClB,CAACA,KAAK,CAACC,EAAP,IAAa,CAACD,KAAK,CAACE,GAAxB,IAA6B,OAAOC,SAAP;WACtB,UAAAC,KAAK,EAAI;UACRC,MAAM,GAAGH,YAAG,CAACF,KAAK,CAACC,EAAP,CAAH,CAAcG,KAAd,CAAf;UACME,GAAG,GAAG,OAAON,KAAK,CAACE,GAAb,KAAqB,UAArB,GAAkCF,KAAK,CAACE,GAAN,CAAUE,KAAV,CAAlC,GAAqDJ,KAAK,CAACE,GAAvE;aACO,CAACG,MAAD,EAASC,GAAT,CAAP;KAHF;GAFF;;EASA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAP,KAAK,EAAI;QACtB,CAACA,KAAL,IAAY,OAAO,IAAP;QACNQ,IAAI,GAAG,EAAb;;SACK,IAAIC,GAAT,IAAgBT,KAAhB,EAAuB;UACjBS,GAAG,KAAK,IAAZ,IAAkB;MAClBD,IAAI,CAACC,GAAD,CAAJ,GAAYT,KAAK,CAACS,GAAD,CAAjB;;;QAEIP,MAAG,GAAGH,MAAM,CAACC,KAAD,CAAlB;QACIE,MAAJ,IAASM,IAAI,CAACN,GAAL,GAAWA,MAAX;WACFM,IAAP;GATF;;AAYA,MAAaE,GAAG,GAAG,SAANA,GAAM,CAACC,IAAD,EAAOX,KAAP;;;sCAAiBY,QAAjB;MAAiBA,QAAjB;;;WACjBC,QAAO,CAACC,KAAR,CAAcX,SAAd,GAA0BQ,IAA1B,EAAgCJ,UAAU,CAACP,KAAD,CAA1C,SAAsDY,QAAtD,EADiB;GAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECtBP,IAAMG,YAAY,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,OAA3D;EAEA,IAAMC,aAAa,GAAGF,YAAY,GAAGC,MAAM,OAAN,CAAW,eAAX,CAAH,GAAiC,MAAnE;EACA,IAAME,WAAW,GAAGH,YAAY,GAAGC,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAArE;;EAEA,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,CAAC,EAAI;WAE3B,CAAC,CAACA,CAAF,IACA,QAAOA,CAAP,MAAa,QADb,IAEAA,CAAC,CAACC,QAAF,KAAeJ,aAFf,IAGAG,CAAC,CAACC,QAAF,KAAeH,WAJjB;GADF;;EASA,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAACC,gBAAD,EAAmBC,WAAnB,EAAgCC,OAAhC;WAA4CD,WAA5C;GAAnB;;AAEA,EAAO,IAAME,KAAK,GAAG,SAARA,KAAQ,CAACC,CAAD,EAAIC,CAAJ;WACnBC,SAAS,CAACF,CAAD,EAAIC,CAAJ,EAAO;MAAET,iBAAiB,EAAjBA,iBAAF;MAAqBG,UAAU,EAAVA;KAA5B,CADU;GAAd;;EAGPI,KAAK,CAACI,GAAN,GAAY;;;sCAAIC,IAAJ;MAAIA,IAAJ;;;WAAaF,SAAS,CAACC,GAAV,CAAcC,IAAd,EAAoB;MAAEZ,iBAAiB,EAAjBA,iBAAF;MAAqBG,UAAU,EAAVA;KAAzC,CAAb;GAAZ;;EChBO,IAAMU,MAAM,GAAG,SAATA,MAAS,CAAAC,GAAG;WAAI,YAAa;;;wCAATF,IAAS;QAATA,IAAS;;;UAClCG,MAAM,GAAGC,gBAAU,CAAC,gBAAmBC,GAAnB,EAA2B;YAAxBC,EAAwB,QAAxBA,EAAwB;YAAjBrC,KAAiB;;YAC7CsC,kBAAkB,GACtB,OAAOL,GAAP,KAAe,QAAf,IAA4BI,EAAE,IAAI,OAAOA,EAAP,KAAc,QADlD;YAEMjC,KAAK,GAAGmC,gBAAU,CAACC,iBAAD,CAAxB;YACIC,SAAS,GAAGH,kBAAkB,GAAGtC,KAAH,GAAW,EAA7C;YACIK,MAAM,GAAG,EAAb;QACA0B,IAAI,CAACW,OAAL,CAAa,UAAAC,GAAG,EAAI;cACZC,KAAK,GAAG,OAAOD,GAAP,KAAe,UAAf,GAA4BA,GAAG;YAAGvC,KAAK,EAALA;aAAUJ,KAAb,EAA/B,GAAuD2C,GAArE;UACAE,MAAM,CAACC,MAAP,CAAczC,MAAd,EAAsBuC,KAAtB;SAFF;;YAKI,CAACN,kBAAL,EAAyB;eAClB,IAAI7B,GAAT,IAAgBT,KAAhB,EAAuB;gBACjB,CAAC+C,WAAW,CAACtC,GAAD,CAAhB,IAAuB;YACvBgC,SAAS,CAAChC,GAAD,CAAT,GAAiBT,KAAK,CAACS,GAAD,CAAtB;;;;eAIGC,GAAG,CAAC2B,EAAE,IAAIJ,GAAP,qBACLQ,SADK;UAERL,GAAG,EAAHA,GAFQ;UAGRlC,GAAG,EAAEG;WAHP;OAlBuB,CAAzB;aAwBO6B,MAAP;KAzBuB;GAAlB;;ECHA,IAAMc,MAAM,GAAG,SAATA,MAAS,CAAAvC,GAAG;WAAI,UAAAT,KAAK;aAChCE,OAAG,CAAC+C,OAAG,CAACjD,KAAK,CAACI,KAAP,mBAAwBK,GAAxB,EAAJ,CAAH,CAAuCT,KAAK,CAACI,KAA7C,CADgC;KAAT;GAAlB;;ECCP,IAAM8C,IAAI,GAAG,CACX,GADW,EAEX,GAFW,EAGX,GAHW,EAIX,GAJW,EAKX,IALW,EAMX,IANW,EAOX,IAPW,EAQX,IARW,EASX,IATW,EAUX,IAVW,EAWX,KAXW,EAYX,KAZW,EAaX,MAbW,EAcX,IAdW,EAeX,IAfW,EAgBX,IAhBW,EAiBX,YAjBW,EAkBX,IAlBW,EAmBX,IAnBW,EAoBX,OApBW,EAqBX,IArBW,EAsBX,IAtBW,EAuBX,IAvBW,EAwBX,IAxBW,EAyBX,QAzBW,EA0BX,QA1BW;EA4BX,YA5BW,EA6BX,eA7BW;EA+BX,KA/BW;EAiCX,MAjCW,CAAb;EAoCA,IAAMC,OAAO,GAAG;IACdC,UAAU,EAAE,MADE;IAEdC,aAAa,EAAE,IAFD;IAGdC,IAAI,EAAE;GAHR;;EAMA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAnC,CAAC;WAAI+B,OAAO,CAAC/B,CAAD,CAAP,IAAcA,CAAlB;GAAf;;AAEA,MAAac,MAAM,GAAGF,MAAM,CAAC,KAAD,CAAN,CAAcgB,MAAM,CAAC,KAAD,CAApB,CAAf;AAEP,MAAaQ,UAAU,GAAG,EAAnB;EAEPN,IAAI,CAACR,OAAL,CAAa,UAAAT,GAAG,EAAI;IAClBuB,UAAU,CAACvB,GAAD,CAAV,GAAkBD,MAAM,CAACuB,KAAK,CAACtB,GAAD,CAAN,CAAN,CAAmBe,MAAM,CAACf,GAAD,CAAzB,CAAlB;IACAC,MAAM,CAACD,GAAD,CAAN,GAAcuB,UAAU,CAACvB,GAAD,CAAxB;GAFF;AAKA,EAAO,IAAMwB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAqB;QAApBD,UAAoB,uEAAP,EAAO;QAC7ChD,IAAI,GAAG,EAAb;IACAqC,MAAM,CAACa,IAAP,CAAYF,UAAZ,EAAwBd,OAAxB,CAAgC,UAAAjC,GAAG,EAAI;MACrCD,IAAI,CAACC,GAAD,CAAJ,GAAYuB,MAAM,CAACwB,UAAU,CAAC/C,GAAD,CAAX,CAAN,CAAwBuC,MAAM,CAACvC,GAAD,CAA9B,CAAZ;KADF;WAGOD,IAAP;GALK;;MCpDMmD,OAAO,GAAGC,mBAAa,CAAC;IACnCC,cAAc,EAAdA,oBADmC;IAEnCzD,KAAK,EAAE,IAF4B;IAGnCoD,UAAU,EAAVA;GAHkC,CAA7B;AAMP,MAAaM,UAAU,GAAG,SAAbA,UAAa;WAAMvB,gBAAU,CAACoB,OAAD,CAAhB;GAAnB;;ECPP,IAAMI,SAAS,GAAG,SAAZA,SAAY,CAAAtD,GAAG;gCAAkBA,GAAlB;GAArB;;EACA,IAAMuD,UAAU,GAAG,SAAbA,UAAa,CAACvD,GAAD,EAAMwD,KAAN;yBAAuBF,SAAS,CAACtD,GAAD,CAAhC,eAA0CwD,KAA1C;GAAnB;;EAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO;;;sCAAInC,IAAJ;MAAIA,IAAJ;;;WAAaA,IAAI,CAACoC,MAAL,CAAYC,OAAZ,EAAqBF,IAArB,CAA0B,GAA1B,CAAb;GAAb;;EAEA,IAAMG,YAAY,GAAG;IACnBC,WAAW,EAAE,IADM;IAEnBC,WAAW,EAAE;GAFf;EAIA,IAAMC,YAAY,GAAG;IACnBC,mBAAmB,EAAE,IADF;IAEnBC,oBAAoB,EAAE,IAFH;IAGnBC,gBAAgB,EAAE;GAHpB;;EAMA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACnE,GAAD,EAAMwD,KAAN,EAAgB;QAC1B,OAAOA,KAAP,KAAiB,QAArB,IAA+B,OAAOA,KAAP;QAC3BI,YAAY,CAAC5D,GAAD,CAAhB,IAAuB,OAAOwD,KAAP;WAChBA,KAAK,GAAG,IAAf;GAHF;;;AAOA,EAAO,IAAMY,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,GAAD,EAAMC,MAAN,EAAcC,QAAd,EAA2B;QACrDxE,IAAI,GAAGyE,KAAK,CAACC,OAAN,CAAcJ,GAAd,IAAqB,EAArB,GAA0B,EAAvC;;SAEK,IAAIrE,GAAT,IAAgBqE,GAAhB,EAAqB;UACbb,KAAK,GAAGa,GAAG,CAACrE,GAAD,CAAjB;UACM0E,IAAI,GAAGjB,IAAI,CAACa,MAAD,EAAStE,GAAT,CAAjB;;UACIwD,KAAK,IAAI,QAAOA,KAAP,MAAiB,QAA9B,EAAwC;QACtCzD,IAAI,CAACC,GAAD,CAAJ,GAAYoE,kBAAkB,CAACZ,KAAD,EAAQkB,IAAR,EAAc1E,GAAd,CAA9B;;;;UAGE+D,YAAY,CAAC/D,GAAD,CAAhB,EAAuB;QACrBD,IAAI,CAACC,GAAD,CAAJ,GAAYwD,KAAZ;;;;UAGImB,GAAG,GAAGR,OAAO,CAACI,QAAQ,IAAIvE,GAAb,EAAkBwD,KAAlB,CAAnB;MACAzD,IAAI,CAACC,GAAD,CAAJ,GAAYuD,UAAU,CAACmB,IAAD,EAAOC,GAAP,CAAtB;;;WAGK5E,IAAP;GAlBK;AAqBP,EAAO,IAAM6E,YAAY,GAAG,SAAfA,YAAe,CAACN,MAAD,EAASD,GAAT,EAAiB;QACvCQ,IAAI,GAAG,EAAX;;SACK,IAAI7E,GAAT,IAAgBqE,GAAhB,EAAqB;UACfrE,GAAG,KAAK,OAAZ,IAAqB;UACf0E,IAAI,GAAGjB,IAAI,CAACa,MAAD,EAAStE,GAAT,CAAjB;UACMwD,KAAK,GAAGa,GAAG,CAACrE,GAAD,CAAjB;;UACIwD,KAAK,IAAI,QAAOA,KAAP,MAAiB,QAA9B,EAAwC;QACtCqB,IAAI,sBACCA,IADD,MAECD,YAAY,CAACF,IAAD,EAAOlB,KAAP,CAFb,CAAJ;OADF,MAKO;QACLqB,IAAI,CAACvB,SAAS,CAACoB,IAAD,CAAV,CAAJ,GAAwBlB,KAAxB;;;;WAGGqB,IAAP;GAfK;;AAmBP,EAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAnF,KAAK,EAAI;QACpC,CAACA,KAAK,CAACoF,MAAP,IAAiB,CAACpF,KAAK,CAACoF,MAAN,CAAaC,KAAnC,IAA0C,OAAO,EAAP;;QACtCrF,KAAK,CAACqE,mBAAN,KAA8B,KAAlC,EAAyC;aAChCvE,OAAG,CAAC;QACTwF,KAAK,EAAE,MADE;QAETC,EAAE,EAAE;OAFI,CAAH,CAGJvF,KAHI,CAAP;;;QAKMqF,KARgC,GAQtBrF,KAAK,CAACoF,MARgB,CAQhCC,KARgC;QASlCpF,MAAM,GAAGgF,YAAY,CAAC,QAAD,EAAWjF,KAAK,CAACoF,MAAjB,CAA3B;IAEA3C,MAAM,CAACa,IAAP,CAAY+B,KAAZ,EAAmB/C,OAAnB,CAA2B,UAAAkD,IAAI,EAAI;UAC3BnF,GAAG,wBAAiBmF,IAAjB,CAAT;MACAvF,MAAM,CAACI,GAAD,CAAN,GAAc4E,YAAY,CAAC,QAAD,EAAWI,KAAK,CAACG,IAAD,CAAhB,CAA1B;KAFF;WAKO1F,OAAG,oBACLG,MADK;MAERqF,KAAK,EAAE,eAAAG,CAAC;qDAAmCA,CAAC,CAACL,MAAF,CAASM,IAA5C;OAFA;MAGRH,EAAE,EAAE,YAAAE,CAAC;2DAAyCA,CAAC,CAACL,MAAF,CAASO,UAAlD;;OAHA,CAIJ3F,KAJI,CAAP;GAhBK;;EC3DP,IAAM4F,WAAW,GAAG,qBAApB;EACA,IAAMC,WAAW,GAAG,OAAOC,OAAP,KAAmB,WAAvC;EAEA,IAAMC,OAAO,GAAG;IACdlD,GAAG,EAAE,aAAAmD,IAAI;aAAIH,WAAW,IAAII,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BP,WAA5B,CAAf,IAA2DI,IAA/D;KADK;IAEdI,GAAG,EAAE,aAAAvC,KAAK;aAAIgC,WAAW,IAAII,MAAM,CAACC,YAAP,CAAoBG,OAApB,CAA4BT,WAA5B,EAAyC/B,KAAzC,CAAnB;;GAFZ;AAKA,EAAO,IAAMyC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;QAC3BC,SAAS,GAAG,8BAAlB;QACMC,GAAG,GAAGP,MAAM,CAACQ,UAAP,GAAoBR,MAAM,CAACQ,UAAP,CAAkBF,SAAlB,CAApB,GAAmD,EAA/D;QACMG,IAAI,GAAGF,GAAG,CAACG,KAAJ,KAAcJ,SAA3B;WACOG,IAAI,IAAIF,GAAG,CAACI,OAAnB;GAJK;;EAOP,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAA7G,KAAK;WACnBA,KAAK,CAACsE,oBAAN,IAA8BtE,KAAK,CAACuE,gBAApC,IAAwD,SADrC;GAArB;;AAGA,EAAO,IAAMuC,aAAa,GAAG,SAAhBA,aAAgB,CAAA9G,KAAK,EAAI;oBACZ+G,cAAQ,CAACF,OAAO,CAAC7G,KAAD,CAAR,CADI;;QAC7BwF,IAD6B;QACvBwB,OADuB;;IAGpCC,eAAS,CAAC,YAAM;;UAERC,MAAM,GAAGnB,OAAO,CAAClD,GAAR,EAAf;MACAsE,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,MAAxB,CAA+B,cAAcJ,MAA7C;UACMR,IAAI,GAAGJ,aAAa,EAA1B;UACI,CAACY,MAAD,IAAWR,IAAX,IAAmB1G,KAAK,CAACuH,wBAA7B,IACE,OAAOP,OAAO,CAAC,MAAD,CAAd;UACE,CAACE,MAAD,IAAWA,MAAM,KAAK1B,IAA1B,IAAgC;MAChCwB,OAAO,CAACE,MAAD,CAAP;KARO,EASN,EATM,CAAT;IAWAD,eAAS,CAAC,YAAM;UACV,CAACzB,IAAL,IAAW;MACXO,OAAO,CAACK,GAAR,CAAYZ,IAAZ;KAFO,EAGN,CAACA,IAAD,CAHM,CAAT;;QAKIgC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;UAEvC1H,KAAK,CAACoF,MAAN,IACApF,KAAK,CAACoF,MAAN,CAAaC,KADb,IAEA5C,MAAM,CAACa,IAAP,CAAYtD,KAAK,CAACoF,MAAN,CAAaC,KAAzB,EAAgCsC,OAAhC,CAAwCd,OAAO,CAAC7G,KAAD,CAA/C,IAA0D,CAAC,CAH7D,EAIE;QACA4H,OAAO,CAACC,IAAR,CACE,yDACE,sDAFJ;;;;WAOG,CAACrC,IAAD,EAAOwB,OAAP,CAAP;GAhCK;AAmCP,MAAac,YAAY,GAAG,SAAfA,YAAe,GAAM;sBACIpE,UAAU,EADd;QACxBqE,SADwB,eACxBA,SADwB;QACbC,YADa,eACbA,YADa;;QAG5B,OAAOA,YAAP,KAAwB,UAA5B,EAAwC;YAChC,IAAIC,KAAJ,uDAAN;;;WAGK,CAACF,SAAD,EAAYC,YAAZ,CAAP;GAPK;;EAUP,IAAME,SAAS,GAAG,SAAZA,SAAY,CAAAlI,KAAK;WAAK;MAC1BoH,IAAI,EAAEjC,iBAAiB,CAACnF,KAAD;KADF;GAAvB;;AAIA,MAAamI,SAAS,GAAG,SAAZA,SAAY;WAAMC,6BAACC,WAAD;MAAQ,MAAM,EAAEH;MAAtB;GAAlB;AAEP,MAAaI,mBAAmB,GAAG,SAAtBA,mBAAsB;WACjCF;MACE,GAAG,EAAC,mBADN;MAEE,uBAAuB,EAAE;QACvBG,MAAM;;MAJuB;GAA5B;;EC/DP,IAAMC,UAAU,GAAG,SAAbA,UAAa;QAACC,KAAD,uEAAS,EAAT;QAAarI,IAAb;WAAsBkB,KAAK,CAACI,GAAN,CAAU,EAAV,EAAc+G,KAAd,EAAqBrI,IAArB,CAAtB;GAAnB;;EAEA,IAAMsI,cAAc,GAAG,SAAjBA,cAAiB,CAAC1I,KAAD,EAAQwF,IAAR,EAAiB;QAClC,CAACA,IAAL,IAAW,OAAOxF,KAAP;QACLqF,KAAK,GAAGxC,OAAG,CAAC7C,KAAD,EAAQ,cAAR,EAAwB,EAAxB,CAAjB;WACOsB,KAAK,CAACI,GAAN,CAAU,EAAV,EAAc1B,KAAd,EAAqB;MAC1BoF,MAAM,EAAEvC,OAAG,CAACwC,KAAD,EAAQG,IAAR,EAAc,EAAd;KADN,CAAP;GAHF;;EAQA,IAAMmD,YAAY,GAAG,SAAfA,YAAe,OAAuC;QAApCC,OAAoC,QAApCA,OAAoC;QAA3BxF,aAA2B,QAA3BA,UAA2B;QAAf5C,QAAe,QAAfA,QAAe;;QACpDR,KAAK,sBAAQ4I,OAAO,CAAC5I,KAAhB,CAAX;;QACIA,KAAK,CAACqE,mBAAN,KAA8B,KAAlC,EAAyC;MACvCrE,KAAK,CAACoF,MAAN,GAAeX,kBAAkB,CAACzE,KAAK,CAACoF,MAAP,EAAe,QAAf,CAAjC;;;WAEK9E,GAAG,CACRuI,iBAAc,CAACC,QADP,EAER;MAAEjF,KAAK,EAAE7D;KAFD,EAGRM,GAAG,CACDyI,iBADC,EAED;MAAE3F,UAAU,EAAVA;KAFD,EAGD9C,GAAG,CAACiD,OAAO,CAACuF,QAAT,EAAmB;MAAEjF,KAAK,EAAE+E,OAAT;MAAkBpI,QAAQ,EAARA;KAArC,CAHF,CAHK,CAAV;GALF;;EAgBA,IAAMwI,YAAY,GAAG,SAAfA,YAAe,QAAsD;4BAAnDhJ,KAAmD;QAA5CiJ,UAA4C,4BAA/B,EAA+B;QAA3B7F,aAA2B,SAA3BA,UAA2B;QAAf5C,QAAe,SAAfA,QAAe;;QAEnE0I,KAAK,GAAGxF,UAAU,EAAxB;QACMyF,gBAAgB,GACpB,OAAOF,UAAP,KAAsB,UAAtB,GAAmCA,UAAU,CAAC,EAAD,CAA7C,GAAoDA,UADtD;;yBAEkCnC,aAAa,CAC7CoC,KAAK,CAAClJ,KAAN,IAAemJ,gBAD8B,CAL0B;;QAKlEpB,SALkE;QAKvDC,YALuD;;QASnEhI,KAAK,GAAG0I,cAAc,CAACQ,KAAK,CAAClJ,KAAN,IAAemJ,gBAAhB,EAAkCpB,SAAlC,CAA5B;;QAEMa,OAAO,sBACRM,KADQ;MAEXE,YAAY,EAAE,IAFH;MAGXrB,SAAS,EAATA,SAHW;MAIXC,YAAY,EAAZA,YAJW;MAKX5E,UAAU,qBAAO8F,KAAK,CAAC9F,UAAb,MAA4BC,gBAAgB,CAACD,aAAD,CAA5C,CALC;MAMXpD,KAAK,EAALA;MANF;;IASAiH,eAAS,CAAC,YAAM;MACdhB,MAAM,CAACmD,YAAP,GAAsBR,OAAtB;KADO,EAEN,CAACA,OAAO,CAAC5I,KAAT,EAAgB4I,OAAO,CAACb,SAAxB,CAFM,CAAT;WAIOzH,GAAG,CAACqI,YAAD,EAAe;MACvBC,OAAO,EAAPA,OADuB;MAEvBxF,UAAU,EAAEwF,OAAO,CAACxF,UAFG;MAGvB5C,QAAQ,EAARA;KAHQ,CAAV;GAxBF;;EA+BA,IAAM6I,cAAc,GAAG,SAAjBA,cAAiB,QAAqC;QAAlCrJ,KAAkC,SAAlCA,KAAkC;QAA3BoD,aAA2B,SAA3BA,UAA2B;QAAf5C,QAAe,SAAfA,QAAe;QACpD0I,KAAK,GAAGxF,UAAU,EAAxB;QACMkF,OAAO,GACX,OAAO5I,KAAP,KAAiB,UAAjB,sBACSkJ,KADT;MACgBlJ,KAAK,EAAEA,KAAK,CAACkJ,KAAK,CAAClJ,KAAP;SACxBsB,KAAK,CAACI,GAAN,CAAU,EAAV,EAAcwH,KAAd,EAAqB;MAAElJ,KAAK,EAALA;KAAvB,CAHN;WAKOM,GAAG,CAACqI,YAAD,EAAe;MACvBC,OAAO,EAAPA,OADuB;MAEvBxF,UAAU,EAAEC,gBAAgB,CAACD,aAAD,CAFL;MAGvB5C,QAAQ,EAARA;KAHQ,CAAV;GAPF;;AAcA,MAAa8I,aAAa,GAAG,SAAhBA,aAAgB,CAAA1J,KAAK,EAAI;QAC9BsJ,KAAK,GAAGxF,UAAU,EAAxB;;QAEI8D,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;UACrCwB,KAAK,CAACzF,cAAN,KAAyBA,oBAA7B,EAA6C;QAC3CmE,OAAO,CAACC,IAAR,CACE,wCADF,EAEE,yCAFF,EAGE,sFAHF;;;;QAQA,CAACjI,KAAK,CAAC2J,MAAP,IAAiBL,KAAK,CAACE,YAA3B,EAAyC;aAChC9I,GAAG,CAAC+I,cAAD,EAAiBzJ,KAAjB,CAAV;;;WAEKU,GAAG,CAAC0I,YAAD,EAAepJ,KAAf,CAAV;GAhBK;AAmBP,MAAa4J,kBAAkB,GAAG,SAArBA,kBAAqB,QAAyB;QAAtBxJ,KAAsB,SAAtBA,KAAsB;QAAfQ,QAAe,SAAfA,QAAe;QACnD0I,KAAK,GAAGxF,UAAU,EAAxB;;sBAC0B+F,gBAAU,CAACjB,UAAD,EAAaxI,KAAb,CAFqB;;QAElDyI,KAFkD;QAE3CiB,QAF2C;;QAGnDd,OAAO,sBACRM,KADQ;MAEXlJ,KAAK,EAAEyI,KAFI;MAGXiB,QAAQ,EAARA;MAHF;;WAMOpJ,GAAG,CAACiD,OAAO,CAACuF,QAAT,EAAmB;MAC3BjF,KAAK,EAAE+E,OADoB;MAE3BpI,QAAQ,EAARA;KAFQ,CAAV;GATK;;MCnGMmJ,GAAG,GAAG/H,MAAM,CAAC,KAAD,CAAN,CAAc;IAC/BgI,SAAS,EAAE,YADoB;IAE/BC,QAAQ,EAAE;GAFO,CAAZ;AAKP,MAAaC,IAAI,GAAGlI,MAAM,CAAC+H,GAAD,CAAN,CAAY;IAC9BI,OAAO,EAAE;GADS,CAAb;;AAKP,MAAaC,MAAM,GAAG,SAATA,MAAS,CAAApK,KAAK;WACzBU,GAAG,CAACqJ,GAAD,qBACE/J,KADF;MAEDC,EAAE,EAAE;QACFoK,SAAS,EAAE,OADT;QAEFF,OAAO,EAAE,MAFP;QAGFG,aAAa,EAAE,QAHb;QAIFC,OAAO,EAAE;;OAPY;GAApB;AAWP,MAAaC,MAAM,GAAG,SAATA,MAAS,CAAAxK,KAAK;WACzBU,GAAG,CAACqJ,GAAD;MACD1H,EAAE,EAAE;OACDrC,KAFF;MAGDC,EAAE,EAAE;QACFkK,OAAO,EAAE,MADP;QAEFI,OAAO,EAAE;;OANY;GAApB;AAUP,MAAaE,IAAI,GAAG,SAAPA,IAAO,CAAAzK,KAAK;WACvBU,GAAG,CAACqJ,GAAD;MACD1H,EAAE,EAAE;OACDrC,KAFF;MAGDC,EAAE,EAAE;QACFyK,IAAI,EAAE,UADJ;QAEFH,OAAO,EAAE;;OANU;GAAlB;AAUP,MAAaI,SAAS,GAAG,SAAZA,SAAY,CAAA3K,KAAK;WAC5BU,GAAG,CAACqJ,GAAD,qBACE/J,KADF;MAEDC,EAAE,EAAE;QACF2K,KAAK,EAAE,MADL;QAEFX,QAAQ,EAAE,CAFR;QAGFY,QAAQ,EAAE,IAHR;QAIFC,EAAE,EAAE,MAJF;QAKFC,CAAC,EAAE,CALD;QAMFR,OAAO,EAAE;;OATe;GAAvB;AAaP,MAAaS,MAAM,GAAG,SAATA,MAAS,CAAAhL,KAAK;WACzBU,GAAG,CAACqJ,GAAD;MACD1H,EAAE,EAAE;OACDrC,KAFF;MAGDC,EAAE,EAAE;QACFkK,OAAO,EAAE,MADP;QAEFI,OAAO,EAAE;;OANY;GAApB;;MCtDMU,UAAU,GAAG,SAAbA,UAAa,CAAAjL,KAAK;WAC7B,wBACMA,KADN;MAEE,EAAE,EAAE;QACFkL,UAAU,EAAE,MADV;QAEFC,UAAU,EAAE,MAFV;QAGFC,UAAU,EAAE,MAHV;QAIFb,OAAO,EAAE;;OAPgB;GAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;"}