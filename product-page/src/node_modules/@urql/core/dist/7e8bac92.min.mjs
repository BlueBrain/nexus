import{Kind as r}from"graphql/language/kinds";import{print as e}from"graphql/language/printer";import{GraphQLError as t}from"graphql/error/GraphQLError";import{make as n}from"wonka";function o(){return(o=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t,n=arguments[e];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r}).apply(this,arguments)}function i(r){return"string"==typeof r?new t(r):"object"==typeof r&&r.message?new t(r.message,r.nodes,r.source,r.positions,r.path,r,r.extensions||{}):r}function a(){return this.message}var s=function(r){function e(e){var t=e.networkError,n=e.response,o=function(r,e){var t="";return void 0!==r?t="[Network] "+r.message:(void 0!==e&&e.forEach((function(r){t+="[GraphQL] "+r.message+"\n"})),t.trim())}(t,e=(e.graphQLErrors||[]).map(i));r.call(this,o),this.name="CombinedError",this.message=o,this.graphQLErrors=e,this.networkError=t,this.response=n}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e.prototype.toString=a,e}(Error),u=new Set,c=new WeakMap;function p(r){return u.clear(),function r(e){if(null===e||u.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return r(e.toJSON());if(Array.isArray(e)){for(var t="[",n=0,o=e.length;n<o;n++){0<n&&(t+=",");var i=r(e[n]);t+=0<i.length?i:"null"}return t+"]"}if(!(t=Object.keys(e).sort()).length&&e.constructor&&e.constructor!==Object)return t=c.get(e)||Math.random().toString(36).slice(2),c.set(e,t),'{"__key":"'+t+'"}';for(u.add(e),n="{",o=0,i=t.length;o<i;o++){var a=t[o],s=r(e[a]);s&&(1<n.length&&(n+=","),n+=r(a)+":"+s)}return u.delete(e),n+"}"}(r)}function f(r,e,t){return{operation:r,data:e.data,error:Array.isArray(e.errors)?new s({graphQLErrors:e.errors,response:t}):void 0,extensions:"object"==typeof e.extensions&&e.extensions||void 0}}function h(r,e,t){return{operation:r,data:void 0,error:new s({networkError:e,response:t}),extensions:void 0}}function l(t){var n=e(t.query);r:{for(var o=t.query,i=0,a=o.definitions.length;i<a;i++){var s=o.definitions[i];if(s.kind===r.OPERATION_DEFINITION&&s.name){o=s.name.value;break r}}o=void 0}return{query:n,operationName:o,variables:t.variables||void 0,extensions:void 0}}function d(r,e){var t=r.context.url;return"query"===r.operationName&&r.context.preferGetMethod&&e?(r=[],e.operationName&&r.push("operationName="+encodeURIComponent(e.operationName)),e.query&&r.push("query="+encodeURIComponent(e.query.replace(/([\s,]|#[^\n\r]+)+/g," ").trim())),e.variables&&r.push("variables="+encodeURIComponent(p(e.variables))),e.extensions&&r.push("extensions="+encodeURIComponent(p(e.extensions))),t+"?"+r.join("&")):t}function m(r,e){var t="query"===r.operationName&&!!r.context.preferGetMethod;return o({},r="function"==typeof r.context.fetchOptions?r.context.fetchOptions():r.context.fetchOptions||{},{body:!t&&e?JSON.stringify(e):void 0,method:t?"GET":"POST",headers:o({},{"content-type":"application/json"},r.headers)})}function g(r,e,t){return n((function(n){var o=n.next,i=n.complete,a="undefined"!=typeof AbortController?new AbortController:null,s=!1;return Promise.resolve().then((function(){if(!s)return a&&(t.signal=a.signal),function(r,e,t){var n,o=!1;return(r.context.fetch||fetch)(e,t).then((function(r){return n=r,o=200>r.status||r.status>=("manual"===t.redirect?400:300),r.json()})).then((function(e){if(!("data"in e)&&!("errors"in e))throw Error("No Content");return f(r,e,n)})).catch((function(e){if("AbortError"!==e.name)return h(r,o?Error(n.statusText):e,n)}))}(r,e,t)})).then((function(r){s||(s=!0,r&&o(r),i())})),function(){s=!0,a&&a.abort()}}))}export{s as C,o as _,h as a,l as b,d as c,m as d,g as e,f as m,p as s};
//# sourceMappingURL=7e8bac92.min.mjs.map
