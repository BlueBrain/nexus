{"version":3,"file":"index.es.esm.js","sources":["../../../../node_modules/react-clientside-effect/lib/index.es.js"],"sourcesContent":["import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { PureComponent } from 'react';\n\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof reducePropsToState !== 'function') {\n      throw new Error('Expected reducePropsToState to be a function.');\n    }\n\n    if (typeof handleStateChangeOnClient !== 'function') {\n      throw new Error('Expected handleStateChangeOnClient to be a function.');\n    }\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof WrappedComponent !== 'function') {\n        throw new Error('Expected WrappedComponent to be a React component.');\n      }\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n      handleStateChangeOnClient(state);\n    }\n\n    var SideEffect =\n    /*#__PURE__*/\n    function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      }\n\n      // Try to use displayName of wrapped component\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.componentDidMount = function componentDidMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return React.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    return SideEffect;\n  };\n}\n\nexport default withSideEffect;\n"],"names":["React"],"mappings":"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"}