{"version":3,"file":"Lock.esm.js","sources":["../../../../../node_modules/react-focus-lock/dist/es2015/Lock.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { node, bool, string, any, arrayOf, oneOfType, object, func } from 'prop-types';\nimport * as constants from 'focus-lock/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { hiddenGuard } from './FocusGuard';\nimport { mediumFocus, mediumBlur, mediumSidecar } from './medium';\nvar emptyArray = [];\nvar FocusLock = React.forwardRef(function (props, parentRef) {\n  var _extends2;\n\n  var _React$useState = React.useState(),\n      realObserved = _React$useState[0],\n      setObserved = _React$useState[1];\n\n  var observed = React.useRef();\n  var isActive = React.useRef(false);\n  var originalFocusedElement = React.useRef(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      crossFrame = props.crossFrame,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _React$useState2 = React.useState({}),\n      id = _React$useState2[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = React.useCallback(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = React.useCallback(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  var returnFocus = React.useCallback(function (allowDefer) {\n    var current = originalFocusedElement.current;\n\n    if (Boolean(shouldReturnFocus) && current && current.focus) {\n      var focusOptions = typeof shouldReturnFocus === 'object' ? shouldReturnFocus : undefined;\n      originalFocusedElement.current = null;\n\n      if (allowDefer) {\n        // React might return focus after update\n        // it's safer to defer the action\n        Promise.resolve().then(function () {\n          return current.focus(focusOptions);\n        });\n      } else {\n        current.focus(focusOptions);\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = React.useCallback(function (event) {\n    if (isActive.current) {\n      mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = React.useCallback(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    React.useEffect(function () {\n      if (!observed.current) {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = _extends((_extends2 = {}, _extends2[constants.FOCUS_DISABLED] = disabled && 'disabled', _extends2[constants.FOCUS_GROUP] = group, _extends2), containerProps);\n\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = useMergeRefs([parentRef, setObserveNode]);\n  return React.createElement(React.Fragment, null, hasLeadingGuards && [React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }), // nearest focus guard\n  React.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: hiddenGuard\n  })], !disabled && React.createElement(SideCar, {\n    id: id,\n    sideCar: mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    crossFrame: crossFrame,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }), React.createElement(Container, _extends({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && React.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }));\n});\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: node,\n  disabled: bool,\n  returnFocus: oneOfType([bool, object]),\n  noFocusGuards: bool,\n  allowTextSelection: bool,\n  autoFocus: bool,\n  persistentFocus: bool,\n  crossFrame: bool,\n  group: string,\n  className: string,\n  whiteList: func,\n  shards: arrayOf(any),\n  as: oneOfType([string, func, object]),\n  lockProps: object,\n  onActivation: func,\n  onDeactivation: func,\n  sideCar: any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  crossFrame: true,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nexport default FocusLock;"],"names":["React.forwardRef","React.useState","React.useRef","React.useCallback","React.useEffect","constants.FOCUS_DISABLED","constants.FOCUS_GROUP","React.createElement","React.Fragment"],"mappings":"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"}