{"version":3,"file":"CopyButton.esm.js","sources":["../../../../src/components/CopyButton/CopyButton.tsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx } from \"@emotion/core\"\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { css } from \"@emotion/core\"\n\nimport copyToClipboard from \"../../utils/helpers/copyToClipboard\"\nimport { ButtonProps, Button } from \"../Button/Button\"\n\nconst baseCss = css`\n  html:not([dir=\"rtl\"]) & {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  html[dir=\"rtl\"] & {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n`\n\nexport type GetLabelFn = (copied: boolean) => string\n\nexport type CopyButtonProps = ButtonProps & {\n  content: string\n  getButtonLabel?: GetLabelFn\n  getButtonTitle?: GetLabelFn\n  delay?: number\n}\n\nfunction CopyButton({\n  onClick,\n  content,\n  getButtonLabel = copied => (copied ? `Copied` : `Copy`),\n  getButtonTitle = copied =>\n    copied ? `Copied to clipboard` : `Copy to clipboard`,\n  delay = 5000,\n  children,\n  ...props\n}: CopyButtonProps) {\n  const timeoutRef = React.useRef<number | undefined>(undefined)\n  const [copied, setCopied] = React.useState<boolean>(false)\n\n  const copyOnClick: React.MouseEventHandler<HTMLButtonElement> = e => {\n    if (onClick) {\n      onClick(e)\n    }\n\n    copyToClipboard(content).then(() => {\n      setCopied(true)\n\n      timeoutRef.current = window.setTimeout(() => {\n        setCopied(false)\n      }, delay)\n    })\n  }\n\n  React.useEffect(\n    () => () => {\n      if (timeoutRef.current) {\n        window.clearTimeout(timeoutRef.current)\n      }\n    },\n    []\n  )\n\n  return (\n    <Button\n      css={baseCss}\n      title={getButtonTitle(copied)}\n      onClick={copyOnClick}\n      size={`S`}\n      type=\"button\"\n      variant={`SECONDARY`}\n      {...props}\n    >\n      {getButtonLabel(copied)}\n      {children}\n    </Button>\n  )\n}\n\nCopyButton.propTypes = {\n  content: PropTypes.string.isRequired,\n  delay: PropTypes.number,\n  onClick: PropTypes.func,\n  getButtonLabel: PropTypes.func,\n  type: PropTypes.oneOf([`button`, `submit`]),\n}\n\nexport default CopyButton\n"],"names":["baseCss","css","CopyButton","onClick","content","getButtonLabel","copied","getButtonTitle","delay","children","props","timeoutRef","React","useRef","undefined","useState","setCopied","copyOnClick","e","copyToClipboard","then","current","window","setTimeout","useEffect","clearTimeout","propTypes","PropTypes","string","isRequired","number","func","type","oneOf"],"mappings":";;;;;;;;;;;;;;;;AASA,IAAMA,OAAO,GAAGC,GAAH,mBAAb;;AAqBA,SAASC,UAAT,OASoB;AAAA,MARlBC,OAQkB,QARlBA,OAQkB;AAAA,MAPlBC,OAOkB,QAPlBA,OAOkB;AAAA,iCANlBC,cAMkB;AAAA,MANlBA,cAMkB,oCAND,UAAAC,MAAM;AAAA,WAAKA,MAAM,oBAAX;AAAA,GAML;AAAA,iCALlBC,cAKkB;AAAA,MALlBA,cAKkB,oCALD,UAAAD,MAAM;AAAA,WACrBA,MAAM,8CADe;AAAA,GAKL;AAAA,wBAHlBE,KAGkB;AAAA,MAHlBA,KAGkB,2BAHV,IAGU;AAAA,MAFlBC,QAEkB,QAFlBA,QAEkB;AAAA,MADfC,KACe;;AAClB,MAAMC,UAAU,GAAGC,cAAK,CAACC,MAAN,CAAiCC,SAAjC,CAAnB;;AADkB,wBAEUF,cAAK,CAACG,QAAN,CAAwB,KAAxB,CAFV;AAAA;AAAA,MAEXT,MAFW;AAAA,MAEHU,SAFG;;AAIlB,MAAMC,WAAuD,GAAG,SAA1DA,WAA0D,CAAAC,CAAC,EAAI;AACnE,QAAIf,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACe,CAAD,CAAP;AACD;;AAEDC,IAAAA,eAAe,CAACf,OAAD,CAAf,CAAyBgB,IAAzB,CAA8B,YAAM;AAClCJ,MAAAA,SAAS,CAAC,IAAD,CAAT;AAEAL,MAAAA,UAAU,CAACU,OAAX,GAAqBC,MAAM,CAACC,UAAP,CAAkB,YAAM;AAC3CP,QAAAA,SAAS,CAAC,KAAD,CAAT;AACD,OAFoB,EAElBR,KAFkB,CAArB;AAGD,KAND;AAOD,GAZD;;AAcAI,EAAAA,cAAK,CAACY,SAAN,CACE;AAAA,WAAM,YAAM;AACV,UAAIb,UAAU,CAACU,OAAf,EAAwB;AACtBC,QAAAA,MAAM,CAACG,YAAP,CAAoBd,UAAU,CAACU,OAA/B;AACD;AACF,KAJD;AAAA,GADF,EAME,EANF;AASA,SACE,IAAC,MAAD;AACE,IAAA,GAAG,EAAErB,OADP;AAEE,IAAA,KAAK,EAAEO,cAAc,CAACD,MAAD,CAFvB;AAGE,IAAA,OAAO,EAAEW,WAHX;AAIE,IAAA,IAAI,KAJN;AAKE,IAAA,IAAI,EAAC,QALP;AAME,IAAA,OAAO;AANT,KAOMP,KAPN,GASGL,cAAc,CAACC,MAAD,CATjB,EAUGG,QAVH,CADF;AAcD;;AAEDP,UAAU,CAACwB,SAAX,GAAuB;AAxDrBnB,EAAAA,cAwDqB;AACrBH,EAAAA,OAAO,EAAEuB,GAAS,CAACC,MAAV,CAAiBC,UADL;AAErBrB,EAAAA,KAAK,EAAEmB,GAAS,CAACG,MAFI;AAGrB3B,EAAAA,OAAO,EAAEwB,GAAS,CAACI,IAHE;AAIrB1B,EAAAA,cAAc,EAAEsB,GAAS,CAACI,IAJL;AAKrBC,EAAAA,IAAI,EAAEL,GAAS,CAACM,KAAV,CAAgB,oBAAhB;AALe,CAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}