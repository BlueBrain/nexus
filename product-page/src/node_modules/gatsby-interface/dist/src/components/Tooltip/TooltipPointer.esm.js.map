{"version":3,"file":"TooltipPointer.esm.js","sources":["../../../../src/components/Tooltip/TooltipPointer.tsx"],"sourcesContent":["/**\n * This component is based on the \"Triangle pointers\" example\n * from Reach UI docs: https://reacttraining.com/reach-ui/tooltip/#triangle-pointers-and-custom-styles\n */\nimport React from \"react\"\nimport Portal from \"../Portal\"\nimport { TooltipPosition } from \"./types\"\n\n// We position the pointer relative to the trigger, not the popup\n// so that collisions don't have the pointer pointing off to nowhere.\n// Using a Portal may seem a little extreme, but we can keep the\n// positioning logic simpler here instead of needing to consider\n// the popup's position relative to the trigger and collisions\ntype PointerPositionFn = (triggerRect: DOMRect) => React.CSSProperties\n\nconst pointerPosition: Record<TooltipPosition, PointerPositionFn> = {\n  top: pointerPositionTop,\n  bottom: pointerPositionBottom,\n}\n\nexport type TooltipPointerProps = {\n  triggerRect: DOMRect\n  position: TooltipPosition\n  style?: React.CSSProperties\n}\n\nexport default function TooltipPointer({\n  position,\n  triggerRect,\n  style = {},\n}: TooltipPointerProps) {\n  const getPointerPosition = pointerPosition[position]\n  const positionStyle = triggerRect ? getPointerPosition(triggerRect) : {}\n\n  return (\n    <Portal>\n      <div\n        style={{\n          ...positionStyle,\n          position: \"absolute\",\n          width: 0,\n          height: 0,\n          ...style,\n        }}\n      />\n    </Portal>\n  )\n}\n\nexport const TOOLTIP_POINTER_SIZE = 6\nexport const TOOLTIP_POINTER_ADJUST = 1\n\nconst pointerBorderTransparent = `${TOOLTIP_POINTER_SIZE}px solid transparent`\nconst pointerBorderFilled = `${TOOLTIP_POINTER_SIZE}px solid black`\n\nfunction pointerPositionBottom(triggerRect: DOMRect) {\n  return {\n    borderLeft: pointerBorderTransparent,\n    borderRight: pointerBorderTransparent,\n    borderBottom: pointerBorderFilled,\n    left: getPositionOffsetLeft(triggerRect),\n    top: triggerRect.bottom + window.scrollY + TOOLTIP_POINTER_ADJUST,\n  }\n}\n\nfunction pointerPositionTop(triggerRect: DOMRect) {\n  return {\n    borderLeft: pointerBorderTransparent,\n    borderRight: pointerBorderTransparent,\n    borderTop: pointerBorderFilled,\n    left: getPositionOffsetLeft(triggerRect),\n    top:\n      triggerRect.top -\n      TOOLTIP_POINTER_SIZE +\n      window.scrollY -\n      TOOLTIP_POINTER_ADJUST,\n  }\n}\n\nfunction getPositionOffsetLeft(triggerRect: DOMRect) {\n  return triggerRect.left + triggerRect.width / 2 - TOOLTIP_POINTER_SIZE\n}\n"],"names":["pointerPosition","top","pointerPositionTop","bottom","pointerPositionBottom","TooltipPointer","position","triggerRect","style","getPointerPosition","positionStyle","React","width","height","TOOLTIP_POINTER_SIZE","TOOLTIP_POINTER_ADJUST","pointerBorderTransparent","pointerBorderFilled","borderLeft","borderRight","borderBottom","left","getPositionOffsetLeft","window","scrollY","borderTop"],"mappings":";;;;;AAeA,IAAMA,eAA2D,GAAG;AAClEC,EAAAA,GAAG,EAAEC,kBAD6D;AAElEC,EAAAA,MAAM,EAAEC;AAF0D,CAApE;AAWe,SAASC,cAAT,OAIS;AAAA,MAHtBC,QAGsB,QAHtBA,QAGsB;AAAA,MAFtBC,WAEsB,QAFtBA,WAEsB;AAAA,wBADtBC,KACsB;AAAA,MADtBA,KACsB,2BADd,EACc;AACtB,MAAMC,kBAAkB,GAAGT,eAAe,CAACM,QAAD,CAA1C;AACA,MAAMI,aAAa,GAAGH,WAAW,GAAGE,kBAAkB,CAACF,WAAD,CAArB,GAAqC,EAAtE;AAEA,sBACEI,6BAAC,MAAD,qBACEA;AACE,IAAA,KAAK,qBACAD,aADA;AAEHJ,MAAAA,QAAQ,EAAE,UAFP;AAGHM,MAAAA,KAAK,EAAE,CAHJ;AAIHC,MAAAA,MAAM,EAAE;AAJL,OAKAL,KALA;AADP,IADF,CADF;AAaD;IAEYM,oBAAoB,GAAG;IACvBC,sBAAsB,GAAG;AAEtC,IAAMC,wBAAwB,aAAMF,oBAAN,yBAA9B;AACA,IAAMG,mBAAmB,aAAMH,oBAAN,mBAAzB;;AAEA,SAASV,qBAAT,CAA+BG,WAA/B,EAAqD;AACnD,SAAO;AACLW,IAAAA,UAAU,EAAEF,wBADP;AAELG,IAAAA,WAAW,EAAEH,wBAFR;AAGLI,IAAAA,YAAY,EAAEH,mBAHT;AAILI,IAAAA,IAAI,EAAEC,qBAAqB,CAACf,WAAD,CAJtB;AAKLN,IAAAA,GAAG,EAAEM,WAAW,CAACJ,MAAZ,GAAqBoB,MAAM,CAACC,OAA5B,GAAsCT;AALtC,GAAP;AAOD;;AAED,SAASb,kBAAT,CAA4BK,WAA5B,EAAkD;AAChD,SAAO;AACLW,IAAAA,UAAU,EAAEF,wBADP;AAELG,IAAAA,WAAW,EAAEH,wBAFR;AAGLS,IAAAA,SAAS,EAAER,mBAHN;AAILI,IAAAA,IAAI,EAAEC,qBAAqB,CAACf,WAAD,CAJtB;AAKLN,IAAAA,GAAG,EACDM,WAAW,CAACN,GAAZ,GACAa,oBADA,GAEAS,MAAM,CAACC,OAFP,GAGAT;AATG,GAAP;AAWD;;AAED,SAASO,qBAAT,CAA+Bf,WAA/B,EAAqD;AACnD,SAAOA,WAAW,CAACc,IAAZ,GAAmBd,WAAW,CAACK,KAAZ,GAAoB,CAAvC,GAA2CE,oBAAlD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}