{"version":3,"file":"FormFieldSkeleton.esm.js","sources":["../../../../../src/components/form-skeletons/components/FormFieldSkeleton.tsx"],"sourcesContent":["import React from \"react\"\nimport { getHintId, getErrorId } from \"../utils\"\n\nexport type FormFieldSkeletonContextValue = {\n  id: string\n  hasHint?: boolean\n  hasError?: boolean\n  meta: {\n    hintId?: string\n    errorId?: string\n    controlDescribedBy?: string\n  }\n}\n\nconst FormFieldSkeletonContext = React.createContext<\n  FormFieldSkeletonContextValue\n>({\n  id: ``,\n  hasHint: undefined,\n  hasError: undefined,\n  meta: {\n    hintId: undefined,\n    errorId: undefined,\n    controlDescribedBy: undefined,\n  },\n})\n\nexport type FormFieldSkeletonProps = {\n  id: string\n  hasHint?: boolean\n  hasError?: boolean\n  children?: React.ReactNode\n}\n\nfunction FormFieldSkeletonProvider({\n  id,\n  hasError,\n  hasHint,\n  children,\n}: FormFieldSkeletonProps) {\n  const fieldContext = React.useMemo<FormFieldSkeletonContextValue>(() => {\n    const hintId = getHintId(id)\n    const errorId = getErrorId(id)\n    const controlDescribedBy =\n      [hasError && errorId, hasHint && hintId]\n        .filter(describedBy => describedBy)\n        .join(` `) || undefined\n\n    return {\n      id,\n      hasError,\n      hasHint,\n      meta: {\n        hintId,\n        errorId,\n        controlDescribedBy,\n      },\n    }\n  }, [id, hasError, hasHint])\n\n  return (\n    <FormFieldSkeletonContext.Provider value={fieldContext}>\n      {children}\n    </FormFieldSkeletonContext.Provider>\n  )\n}\n\nexport type FormFieldSkeletonLabelProps = Omit<\n  JSX.IntrinsicElements[\"label\"],\n  \"ref\" | \"htmlFor\"\n>\n\nexport const FormFieldSkeletonLabel: React.FC<\n  FormFieldSkeletonLabelProps\n> = props => {\n  const { id } = useFormFieldSkeleton()\n\n  return <label htmlFor={id} {...props} />\n}\n\nexport type FormFieldSkeletonHintProps = Omit<\n  JSX.IntrinsicElements[\"div\"],\n  \"ref\" | \"id\"\n>\n\nexport const FormFieldSkeletonHint: React.FC<FormFieldSkeletonHintProps> = ({\n  children,\n  ...rest\n}) => {\n  const { hasHint, meta } = useFormFieldSkeleton()\n\n  return (\n    <div id={meta.hintId} {...rest}>\n      {hasHint ? children : null}\n    </div>\n  )\n}\n\nexport type ErrorValidationMode = \"focus\" | \"change\" | \"submit\"\nexport type FormFieldSkeletonErrorProps = Omit<\n  JSX.IntrinsicElements[\"div\"],\n  \"ref\" | \"id\"\n> & { validationMode?: ErrorValidationMode }\n\nexport const FormFieldSkeletonError: React.FC<FormFieldSkeletonErrorProps> = ({\n  children,\n  validationMode,\n  ...rest\n}) => {\n  const { hasError, meta } = useFormFieldSkeleton()\n\n  return (\n    <div\n      id={meta.errorId}\n      aria-live={getErrorAriaLiveAttribute(validationMode)}\n      {...rest}\n    >\n      {hasError ? children : null}\n    </div>\n  )\n}\n\nexport function FormFieldSkeleton(props: FormFieldSkeletonProps) {\n  return <FormFieldSkeletonProvider {...props} />\n}\n\nexport function useFormFieldSkeleton() {\n  return React.useContext(FormFieldSkeletonContext)\n}\n\nfunction getErrorAriaLiveAttribute(\n  validationMode?: ErrorValidationMode\n): React.HTMLAttributes<HTMLDivElement>[\"aria-live\"] {\n  if (validationMode === `focus`) {\n    return `assertive`\n  }\n  if (validationMode === `change`) {\n    return `polite`\n  }\n  return undefined\n}\n"],"names":["FormFieldSkeletonContext","React","createContext","id","hasHint","undefined","hasError","meta","hintId","errorId","controlDescribedBy","FormFieldSkeletonProvider","children","fieldContext","useMemo","getHintId","getErrorId","filter","describedBy","join","FormFieldSkeletonLabel","props","useFormFieldSkeleton","FormFieldSkeletonHint","rest","FormFieldSkeletonError","validationMode","getErrorAriaLiveAttribute","FormFieldSkeleton","useContext"],"mappings":"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"}