{"version":3,"file":"index.esm.js","sources":["../../../../src/components/Portal/index.ts"],"sourcesContent":["import { useRef, useState, useLayoutEffect } from \"react\"\nimport { createPortal } from \"react-dom\"\n\nexport interface PortalProps {\n  tag?: string\n  target?: string\n}\n\nconst useDOMNode = (tag?: string, isUnique?: boolean) => {\n  const domElRef = useRef<HTMLElement | undefined>(undefined)\n\n  useLayoutEffect(() => {\n    if (tag) {\n      if (isUnique) {\n        domElRef.current = document.querySelector(tag) as HTMLElement\n\n        if (!domElRef.current) {\n          domElRef.current = document.createElement(tag)\n          document.body.appendChild(domElRef.current)\n        }\n      } else {\n        domElRef.current = document.createElement(tag)\n      }\n\n      return () => {\n        if (isUnique) {\n          const domNodeToRemove = document.querySelector(tag)\n          domNodeToRemove && document.body.removeChild(domNodeToRemove)\n        }\n      }\n    }\n  }, [tag, isUnique])\n\n  return domElRef\n}\n\nconst Portal: React.FC<PortalProps> = ({\n  children,\n  tag = `gatsby-portal`,\n  target,\n}) => {\n  const portalNodeRef = useDOMNode(tag)\n  const portalRootRef = useDOMNode(target, true)\n  const [hasInitialized, setHasInitialized] = useState(false)\n\n  useLayoutEffect(() => {\n    if (portalNodeRef.current) {\n      const hostNode = portalRootRef.current || document.body\n\n      hostNode.appendChild(portalNodeRef.current)\n\n      setHasInitialized(true)\n\n      return () => hostNode.removeChild(portalNodeRef.current!)\n    }\n  }, [tag, target])\n\n  return hasInitialized && portalNodeRef.current\n    ? createPortal(children, portalNodeRef.current)\n    : null\n}\n\nexport default Portal\n"],"names":["useDOMNode","tag","isUnique","domElRef","useRef","undefined","useLayoutEffect","current","document","querySelector","createElement","body","appendChild","domNodeToRemove","removeChild","Portal","children","target","portalNodeRef","portalRootRef","useState","hasInitialized","setHasInitialized","hostNode","createPortal"],"mappings":";;;;;AAQA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAeC,QAAf,EAAsC;AACvD,MAAMC,QAAQ,GAAGC,MAAM,CAA0BC,SAA1B,CAAvB;AAEAC,EAAAA,eAAe,CAAC,YAAM;AACpB,QAAIL,GAAJ,EAAS;AACP,UAAIC,QAAJ,EAAc;AACZC,QAAAA,QAAQ,CAACI,OAAT,GAAmBC,QAAQ,CAACC,aAAT,CAAuBR,GAAvB,CAAnB;;AAEA,YAAI,CAACE,QAAQ,CAACI,OAAd,EAAuB;AACrBJ,UAAAA,QAAQ,CAACI,OAAT,GAAmBC,QAAQ,CAACE,aAAT,CAAuBT,GAAvB,CAAnB;AACAO,UAAAA,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BT,QAAQ,CAACI,OAAnC;AACD;AACF,OAPD,MAOO;AACLJ,QAAAA,QAAQ,CAACI,OAAT,GAAmBC,QAAQ,CAACE,aAAT,CAAuBT,GAAvB,CAAnB;AACD;;AAED,aAAO,YAAM;AACX,YAAIC,QAAJ,EAAc;AACZ,cAAMW,eAAe,GAAGL,QAAQ,CAACC,aAAT,CAAuBR,GAAvB,CAAxB;AACAY,UAAAA,eAAe,IAAIL,QAAQ,CAACG,IAAT,CAAcG,WAAd,CAA0BD,eAA1B,CAAnB;AACD;AACF,OALD;AAMD;AACF,GApBc,EAoBZ,CAACZ,GAAD,EAAMC,QAAN,CApBY,CAAf;AAsBA,SAAOC,QAAP;AACD,CA1BD;;AA4BA,IAAMY,MAA6B,GAAG,SAAhCA,MAAgC,OAIhC;AAAA,MAHJC,QAGI,QAHJA,QAGI;AAAA,sBAFJf,GAEI;AAAA,MAFJA,GAEI;AAAA,MADJgB,MACI,QADJA,MACI;AACJ,MAAMC,aAAa,GAAGlB,UAAU,CAACC,GAAD,CAAhC;AACA,MAAMkB,aAAa,GAAGnB,UAAU,CAACiB,MAAD,EAAS,IAAT,CAAhC;;AAFI,kBAGwCG,QAAQ,CAAC,KAAD,CAHhD;AAAA;AAAA,MAGGC,cAHH;AAAA,MAGmBC,iBAHnB;;AAKJhB,EAAAA,eAAe,CAAC,YAAM;AACpB,QAAIY,aAAa,CAACX,OAAlB,EAA2B;AACzB,UAAMgB,QAAQ,GAAGJ,aAAa,CAACZ,OAAd,IAAyBC,QAAQ,CAACG,IAAnD;AAEAY,MAAAA,QAAQ,CAACX,WAAT,CAAqBM,aAAa,CAACX,OAAnC;AAEAe,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AAEA,aAAO;AAAA,eAAMC,QAAQ,CAACT,WAAT,CAAqBI,aAAa,CAACX,OAAnC,CAAN;AAAA,OAAP;AACD;AACF,GAVc,EAUZ,CAACN,GAAD,EAAMgB,MAAN,CAVY,CAAf;AAYA,SAAOI,cAAc,IAAIH,aAAa,CAACX,OAAhC,GACHiB,YAAY,CAACR,QAAD,EAAWE,aAAa,CAACX,OAAzB,CADT,GAEH,IAFJ;AAGD,CAxBD;;;AAhCEN,EAAAA;AACAgB,EAAAA;;;;;"}