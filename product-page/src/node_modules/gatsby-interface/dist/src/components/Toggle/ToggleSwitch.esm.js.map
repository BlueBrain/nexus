{"version":3,"file":"ToggleSwitch.esm.js","sources":["../../../../src/components/Toggle/ToggleSwitch.tsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx } from \"@emotion/core\"\nimport React from \"react\"\nimport { visuallyHiddenCss } from \"../../stylesheets/a11y\"\nimport { AtomTone } from \"../../theme/types\"\nimport { Theme } from \"../../theme\"\nimport ToggleGutter, {\n  ToggleGutterTagName,\n  toggleGutterCheckedCss,\n  toggleGutterFocusCss,\n} from \"./ToggleGutter\"\nimport { toggleLabelCss } from \"./Toggle.styles\"\n\nexport type ToggleSwitchProps = Omit<\n  JSX.IntrinsicElements[\"input\"],\n  \"id\" | \"value\"\n> & {\n  id: string\n  value: string\n  valueOn: string\n  valueOff: string\n  labelOn: React.ReactNode\n  labelOff: React.ReactNode\n  tone?: AtomTone\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default function ToggleSwitch({\n  id,\n  valueOn,\n  valueOff,\n  labelOn,\n  labelOff,\n  value = valueOff,\n  tone,\n  className,\n  style,\n  ...rest\n}: ToggleSwitchProps) {\n  const inputOnRef = React.useRef<HTMLInputElement>(null)\n  const inputOffRef = React.useRef<HTMLInputElement>(null)\n  const optionOnId = `${id}__on`\n  const optionOffId = `${id}__off`\n  const isOn = value === valueOn\n\n  const toggle = () => {\n    const inputOn = inputOnRef.current\n    const inputOff = inputOffRef.current\n\n    if (!inputOn || !inputOff) {\n      return\n    }\n\n    if (isOn) {\n      inputOff.focus()\n      inputOff.click()\n    } else {\n      inputOn.focus()\n      inputOn.click()\n    }\n  }\n\n  return (\n    <div\n      id={id}\n      className={className}\n      style={style}\n      css={theme => [\n        {\n          display: `flex`,\n          alignItems: `center`,\n          // We can rely on \"> ToggleGutterTagName\" here since we have full control over direct children\n          [`&:focus-within > ${ToggleGutterTagName}`]: toggleGutterFocusCss(\n            theme\n          ),\n        },\n        toggleLabelCss(theme),\n      ]}\n      onClick={e => {\n        if (!inputOnRef.current || !inputOffRef.current) {\n          return\n        }\n        const target = e.target as HTMLElement\n\n        if (target.tagName === `LABEL`) {\n          const inputOn = inputOnRef.current\n          const inputOff = inputOffRef.current\n          const labelFor = (target as HTMLLabelElement).htmlFor\n\n          if (labelFor === optionOnId && isOn) {\n            e.preventDefault()\n            inputOff.focus()\n            inputOff.click()\n          }\n          if (labelFor === optionOffId && !isOn) {\n            e.preventDefault()\n            inputOn.focus()\n            inputOn.click()\n          }\n        } else if (target.tagName === ToggleGutterTagName.toUpperCase()) {\n          toggle()\n        }\n      }}\n      onKeyPress={e => {\n        if (e.key !== \" \") {\n          return\n        }\n        toggle()\n      }}\n    >\n      <input\n        type=\"radio\"\n        id={optionOffId}\n        name={id}\n        value={valueOff}\n        checked={!isOn}\n        css={visuallyHiddenCss}\n        ref={inputOffRef}\n        {...rest}\n      />\n      <label htmlFor={optionOffId}>{labelOff}</label>\n      <ToggleGutter\n        css={(theme: Theme) => [\n          { marginLeft: theme.space[3], marginRight: theme.space[3] },\n          isOn && toggleGutterCheckedCss(tone)(theme),\n        ]}\n      />\n      <input\n        type=\"radio\"\n        id={optionOnId}\n        name={id}\n        value={valueOn}\n        checked={isOn}\n        css={visuallyHiddenCss}\n        ref={inputOnRef}\n        {...rest}\n      />\n      <label htmlFor={optionOnId}>{labelOn}</label>\n    </div>\n  )\n}\n"],"names":["ToggleSwitch","id","valueOn","valueOff","labelOn","labelOff","value","tone","className","style","rest","inputOnRef","React","useRef","inputOffRef","optionOnId","optionOffId","isOn","toggle","inputOn","current","inputOff","focus","click","theme","display","alignItems","ToggleGutterTagName","toggleGutterFocusCss","toggleLabelCss","e","target","tagName","labelFor","htmlFor","preventDefault","toUpperCase","key","visuallyHiddenCss","marginLeft","space","marginRight","toggleGutterCheckedCss"],"mappings":"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"}