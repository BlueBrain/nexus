{"version":3,"file":"hooks.esm.js","sources":["../../../../src/components/Toast/hooks.tsx"],"sourcesContent":["import React, { useState, useRef, useCallback } from \"react\"\nimport { useToastContext } from \"./ToastContext\"\nimport { MessageWithLink } from \"./MessageWithLink\"\nimport { DEFAULT_TIMEOUT, DEFAULT_TONE } from \"./constants\"\nimport { ToastTone } from \"./types\"\n\nexport const useShowToast = () => {\n  const { showToast } = useToastContext()\n\n  return showToast\n}\n\nexport const useShowSuccessToast = () => {\n  const showToast = useShowToast()\n\n  return useCallback(\n    (message, options = {}) => {\n      showToast(message, { ...options, tone: `SUCCESS` })\n    },\n    [showToast]\n  )\n}\n\nexport const useShowErrorToast = () => {\n  const showToast = useShowToast()\n\n  return useCallback(\n    (message, options = {}) => {\n      showToast(message, { ...options, tone: `DANGER`, timeout: 0 })\n    },\n    [showToast]\n  )\n}\n\nexport const useShowErrorAlert = () => {\n  const showToast = useShowErrorToast()\n\n  return useCallback(\n    (message, linkProps, options = {}) => {\n      showToast(\n        <MessageWithLink {...linkProps}>{message}</MessageWithLink>,\n        options\n      )\n    },\n    [showToast]\n  )\n}\n\nexport interface Toast {\n  id: symbol\n  message: React.ReactNode\n  tone: ToastTone\n}\n\nexport const useToastActions = () => {\n  const [toasts, setToasts] = useState<Toast[]>([])\n  const timeoutsRef = useRef<Map<symbol, number>>(new Map())\n\n  const removeToast = useCallback((toastId: symbol) => {\n    setToasts(prevToasts => prevToasts.filter(({ id }) => id !== toastId))\n\n    window.clearTimeout(timeoutsRef.current.get(toastId))\n\n    timeoutsRef.current.delete(toastId)\n  }, [])\n\n  const showToast = useCallback(\n    (message, { tone = DEFAULT_TONE, timeout = DEFAULT_TIMEOUT } = {}) => {\n      const toastId = Symbol(`toast`)\n\n      setToasts(prevToasts => [...prevToasts, { id: toastId, message, tone }])\n\n      if (timeout > 0) {\n        const timeOutId = window.setTimeout(() => {\n          removeToast(toastId)\n        }, timeout)\n\n        timeoutsRef.current.set(toastId, timeOutId)\n      }\n    },\n    []\n  )\n\n  return { toasts, showToast, removeToast }\n}\n"],"names":["useShowToast","useToastContext","showToast","useShowSuccessToast","useCallback","message","options","tone","useShowErrorToast","timeout","useShowErrorAlert","linkProps","React","useToastActions","useState","toasts","setToasts","timeoutsRef","useRef","Map","removeToast","toastId","prevToasts","filter","id","window","clearTimeout","current","get","DEFAULT_TONE","DEFAULT_TIMEOUT","Symbol","timeOutId","setTimeout","set"],"mappings":"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"}