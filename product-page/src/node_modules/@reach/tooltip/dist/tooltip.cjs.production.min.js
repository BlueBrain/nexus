"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n,t,o,i,r,a,u=require("react"),E=e(u),l=require("@reach/auto-id"),s=require("@reach/utils"),c=e(require("@reach/portal")),f=e(require("@reach/visually-hidden")),d=require("@reach/rect");function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function S(e,n){if(null==e)return{};var t,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n.indexOf(t=r[o])>=0||(i[t]=e[t]);return i}require("prop-types");var L,I,O={initial:"IDLE",states:(a={},a.IDLE={enter:D,on:(n={},n.MOUSE_ENTER="FOCUSED",n.FOCUS="VISIBLE",n)},a.FOCUSED={enter:function(){window.clearTimeout(L),L=window.setTimeout((function(){return g("REST")}),100)},leave:function(){window.clearTimeout(L)},on:(t={},t.MOUSE_MOVE="FOCUSED",t.MOUSE_LEAVE="IDLE",t.MOUSE_DOWN="DISMISSED",t.BLUR="IDLE",t.REST="VISIBLE",t)},a.VISIBLE={on:(o={},o.FOCUS="FOCUSED",o.MOUSE_ENTER="FOCUSED",o.MOUSE_LEAVE="LEAVING_VISIBLE",o.BLUR="LEAVING_VISIBLE",o.MOUSE_DOWN="DISMISSED",o.SELECT_WITH_KEYBOARD="DISMISSED",o.GLOBAL_MOUSE_MOVE="LEAVING_VISIBLE",o)},a.LEAVING_VISIBLE={enter:function(){window.clearTimeout(I),I=window.setTimeout((function(){return g("TIME_COMPLETE")}),500)},leave:function(){window.clearTimeout(I),D()},on:(i={},i.MOUSE_ENTER="VISIBLE",i.FOCUS="VISIBLE",i.TIME_COMPLETE="IDLE",i)},a.DISMISSED={leave:function(){v.id=null},on:(r={},r.MOUSE_LEAVE="IDLE",r.BLUR="IDLE",r)},a)},v={id:null},M=O.initial,w=[];function D(){v.id=null}function _(e){var n=void 0===e?{}:e,t=n.onMouseEnter,o=n.onMouseMove,i=n.onMouseLeave,r=n.onFocus,a=n.onBlur,E=n.onKeyDown,c=n.onMouseDown,f=n.ref,p=n.DEBUG_STYLE,S=String(l.useId(n.id)),L=u.useState(!!p||null!==S&&v.id===S&&"VISIBLE"===M),I=L[0],O=L[1],D=u.useRef(null),_=s.useForkedRef(f,D),h=d.useRect(D,I);return u.useEffect((function(){return w.push(e=function(){O(v.id===S&&("VISIBLE"===M||"LEAVING_VISIBLE"===M))}),function(){w.splice(w.indexOf(e),1)};var e}),[S]),u.useEffect((function(){return s.checkStyles("tooltip")}),[]),u.useEffect((function(){var e=s.getOwnerDocument(D.current)||document;function n(e){"Escape"!==e.key&&"Esc"!==e.key||"VISIBLE"!==M||g("SELECT_WITH_KEYBOARD")}return e.addEventListener("keydown",n),function(){return e.removeEventListener("keydown",n)}}),[]),[{"aria-describedby":I?s.makeId("tooltip",S):void 0,"data-reach-tooltip-trigger":"",ref:_,onMouseEnter:s.wrapEvent(t,(function(){g("MOUSE_ENTER",{id:S})})),onMouseMove:s.wrapEvent(o,(function(){g("MOUSE_MOVE",{id:S})})),onFocus:s.wrapEvent(r,(function(){window.__REACH_DISABLE_TOOLTIPS||g("FOCUS",{id:S})})),onBlur:s.wrapEvent(a,(function(){v.id===S&&g("BLUR")})),onMouseLeave:s.wrapEvent(i,(function(){g("MOUSE_LEAVE")})),onKeyDown:s.wrapEvent(E,(function(e){"Enter"!==e.key&&" "!==e.key||g("SELECT_WITH_KEYBOARD")})),onMouseDown:s.wrapEvent(c,(function(){v.id===S&&g("MOUSE_DOWN")}))},{id:S,triggerRect:h,isVisible:I},I]}var h=s.forwardRefWithAs((function(e,n){var t=e.children,o=e.label,i=e.ariaLabel,r=e.id,a=e.DEBUG_STYLE,l=S(e,["children","label","ariaLabel","id","DEBUG_STYLE"]),s=u.Children.only(t),c=_({id:r,onMouseEnter:s.props.onMouseEnter,onMouseMove:s.props.onMouseMove,onMouseLeave:s.props.onMouseLeave,onFocus:s.props.onFocus,onBlur:s.props.onBlur,onKeyDown:s.props.onKeyDown,onMouseDown:s.props.onMouseDown,ref:s.ref,DEBUG_STYLE:a}),f=c[1];return E.createElement(u.Fragment,null,u.cloneElement(s,c[0]),E.createElement(b,Object.assign({ref:n,label:o,"aria-label":i},f,l)))})),b=s.forwardRefWithAs((function(e,n){var t=e.label,o=e.ariaLabel,i=e.isVisible,r=e.id,a=S(e,["label","ariaLabel","isVisible","id"]);return i?E.createElement(c,null,E.createElement(T,Object.assign({ref:n,label:t,"aria-label":o,isVisible:i},a,{id:s.makeId("tooltip",String(r))}))):null})),T=s.forwardRefWithAs((function(e,n){var t=e.ariaLabel,o=e["aria-label"],i=e.as,r=void 0===i?"div":i,a=e.id,l=e.isVisible,c=e.label,L=e.position,I=void 0===L?V:L,O=e.style,v=e.triggerRect,M=S(e,["ariaLabel","aria-label","as","id","isVisible","label","position","style","triggerRect"]),w=null!=(o||t),D=u.useRef(null),_=s.useForkedRef(n,D),h=d.useRect(D,l);return E.createElement(u.Fragment,null,E.createElement(r,Object.assign({role:w?void 0:"tooltip"},M,{ref:_,"data-reach-tooltip":"",id:w?void 0:a,style:p(p({},O),U(I,v,h))}),c),w&&E.createElement(f,{role:"tooltip",id:a},o||t))}));function U(e,n,t){return t?e(n,t):{visibility:"hidden"}}var V=function(e,n){var t=s.getDocumentDimensions();return e&&n?{left:t.width<e.left+n.width&&!(e.left-n.width<0)?e.right-n.width+window.pageXOffset+"px":e.left+window.pageXOffset+"px",top:t.height<e.bottom+n.height+8&&!(e.top-n.height<0)?e.top-8-n.height+window.pageYOffset+"px":e.top+8+e.height+window.pageYOffset+"px"}:{}},g=function(e,n){var t=O.states[M],o=t&&t.on&&t.on[e];if(o){t&&t.leave&&t.leave(),n&&(v=n);var i=O.states[o];i&&i.enter&&i.enter(),M=o,w.forEach((function(e){return e(M,v)}))}};exports.LEAVE_TIMEOUT=500,exports.MOUSE_REST_TIMEOUT=100,exports.Tooltip=h,exports.TooltipPopup=b,exports.default=h,exports.useTooltip=_;
//# sourceMappingURL=tooltip.cjs.production.min.js.map
