<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../.././assets/img/favicon-32x32.png">
<title>Archives Â· Blue Brain Nexus</title>
<link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../lib/prettify/prettify.css">
<script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
Archives
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../../docs/versions.html" class="page">Versions</a></li>
  <li><a href="../../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../../docs/getting-started/try-nexus.html" class="page">Try Nexus with Neuroscience Datasets</a></li>
    <li><a href="../../../docs/getting-started/try-nexus-movielens.html" class="page">Try Nexus with the MovieLens Dataset</a></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html" class="page">Running Nexus</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/configuration/index.html" class="page">Nexus configuration</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/search-configuration.html" class="page">Search configuration</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../../docs/releases/v1.8-release-notes.html" class="page">v1.8 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.7-to-v1.8-migration.html" class="page">v1.7 To v1.8 Migration</a></li>
    <li><a href="../../../docs/releases/v1.7-release-notes.html" class="page">v1.7 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.6-to-v1.7-migration.html" class="page">v1.6 To v1.7 Migration</a></li>
    <li><a href="../../../docs/releases/v1.6-release-notes.html" class="page">v1.6 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.5-to-v1.6-migration.html" class="page">v1.5 To v1.6 Migration</a></li>
    <li><a href="../../../docs/releases/v1.5-release-notes.html" class="page">v1.5 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.4-to-v1.5-migration.html" class="page">v1.4 To v1.5 Migration</a></li>
    <li><a href="../../../docs/releases/v1.4-release-notes.html" class="page">v1.4 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.3-to-v1.4-migration.html" class="page">v1.3 To v1.4 Migration</a></li>
    <li><a href="../../../docs/releases/v1.3-release-notes.html" class="page">v1.3 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.2-to-v1.3-migration.html" class="page">v1.2 To v1.3 Migration</a></li>
    <li><a href="../../../docs/releases/v1.2-release-notes.html" class="page">v1.2 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.1-release-notes.html" class="page">v1.1 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.0-to-v1.1-migration.html" class="page">v1.0 To v1.1 Migration</a></li>
    <li><a href="../../../docs/releases/v1.0-release-notes.html" class="page">v1.0 Release Notes</a></li>
  </ul></li>
  <li><a href="../../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../docs/fusion/organizations.html" class="page">Organizations</a></li>
    <li><a href="../../../docs/fusion/projects.html" class="page">Projects</a>
    <ul>
      <li><a href="../../../docs/fusion/project.html" class="page">Project</a></li>
    </ul></li>
    <li><a href="../../../docs/fusion/search.html" class="page">Global Search Types</a></li>
    <li><a href="../../../docs/fusion/studios.html" class="page">Studios</a>
    <ul>
      <li><a href="../../../docs/fusion/studio.html" class="page">Studio</a></li>
    </ul></li>
    <li><a href="../../../docs/fusion/my-data.html" class="page">User data</a></li>
    <li><a href="../../../docs/fusion/plugins.html" class="page">Plugins</a></li>
  </ul></li>
  <li><a href="../../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../docs/delta/api/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../../docs/delta/api/content-negotiation.html" class="page">Content Negotiation</a></li>
      <li><a href="../../../docs/delta/api/error-signaling.html" class="page">Error Signaling</a></li>
      <li><a href="../../../docs/delta/api/version.html" class="page">Version</a></li>
      <li><a href="../../../docs/delta/api/authentication.html" class="page">Authentication &amp; Authorization</a></li>
      <li><a href="../../../docs/delta/api/identities.html" class="page">Identities</a></li>
      <li><a href="../../../docs/delta/api/permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../../docs/delta/api/realms-api.html" class="page">Realms</a></li>
      <li><a href="../../../docs/delta/api/acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../../docs/delta/api/orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../../docs/delta/api/projects-api.html" class="page">Projects</a></li>
      <li><a href="../../../docs/delta/api/quotas.html" class="page">Quotas</a></li>
      <li><a href="../../../docs/delta/api/schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../../docs/delta/api/resources-api.html" class="page">Resources</a></li>
      <li><a href="../../../docs/delta/api/resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../../docs/delta/api/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../../docs/delta/api/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../../docs/delta/api/views/pipes.html" class="page">Elasticsearch Pipes</a></li>
        <li><a href="../../../docs/delta/api/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../../docs/delta/api/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../../docs/delta/api/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
        <li><a href="../../../docs/delta/api/views/composite-view-api.html" class="page">CompositeView</a></li>
      </ul></li>
      <li><a href="../../../docs/delta/api/storages-api.html" class="page">Storages</a></li>
      <li><a href="../../../docs/delta/api/files-api.html" class="page">Files</a></li>
      <li><a href="../../../docs/delta/api/archives-api.html" class="active page">Archives</a></li>
      <li><a href="../../../docs/delta/api/search-api.html" class="page">Global search</a></li>
      <li><a href="../../../docs/delta/api/graph-analytics-api.html" class="page">Graph analytics</a></li>
      <li><a href="../../../docs/delta/api/jira.html" class="page">Jira integration</a></li>
      <li><a href="../../../docs/delta/api/events-api.html" class="page">Global events</a></li>
      <li><a href="../../../docs/delta/api/supervision-api.html" class="page">Supervision</a></li>
    </ul></li>
    <li><a href="../../../docs/delta/plugins/index.html" class="page">Plugins</a></li>
    <li><a href="../../../docs/delta/benchmarks/index.html" class="page">Benchmarks</a>
    <ul>
      <li><a href="../../../docs/delta/benchmarks/v1.4.2.html" class="page">Benchmarks v1.4.2</a></li>
      <li><a href="../../../docs/delta/benchmarks/v1.2.1.html" class="page">Benchmarks v1.2.1</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../docs/utilities/index.html" class="page">Utilities</a></li>
  <li><a href="../../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../docs/delta/api/archives-api.html#archives" class="header">Archives</a>
  <ul>
    <li><a href="../../../docs/delta/api/archives-api.html#lifecycle" class="header">Lifecycle</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#payload" class="header">Payload</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#create-using-post" class="header">Create using POST</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#create-using-put" class="header">Create using PUT</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#fetch" class="header">Fetch</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> v1.8.x
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../docs/delta/api/archives-api.html#archives" class="header">Archives</a>
  <ul>
    <li><a href="../../../docs/delta/api/archives-api.html#lifecycle" class="header">Lifecycle</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#payload" class="header">Payload</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#create-using-post" class="header">Create using POST</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#create-using-put" class="header">Create using PUT</a></li>
    <li><a href="../../../docs/delta/api/archives-api.html#fetch" class="header">Fetch</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="callout note warning admonition" style="visibility: visible; margin-top: 0px">
<div class="callout-title admonition-title">Outdated version</div>
<p>
You are browsing the docs for Nexus v1.8.x,
the latest release is available <a href="" title="here">here</a>
</p>
</div>
<div class="md-content__searchable">
<h1><a href="#archives" name="archives" class="anchor"><span class="anchor-link"></span></a>Archives</h1>
<p>An archive is a collection of resources stored inside an archive file. The archiving format chosen for this purpose is tar (or tarball). Archive resources are rooted in the <code>/v1/archives/{org_label}/{project_label}/</code> collection.</p>
<p>Each archive&hellip; </p>
<ul>
  <li>belongs to a <code>project</code> identifier by the label <code>{project_label}</code></li>
  <li>inside an <code>organization</code> identifier by the label <code>{org_label}</code></li>
</ul><div class="callout note tip"><div class="callout-title">Authorization notes</div>
<p>When modifying archives, the caller must have <code>archives/write</code> permissions on the current path of the project or the ancestor paths.</p>
<p>When reading archives, the caller must have <code>resources/read</code> permissions on the current path of the project or the ancestor paths.</p>
<p>Please visit <a href="authentication.html">Authentication &amp; authorization</a> section to learn more about it.</p></div>
<h2><a href="#lifecycle" name="lifecycle" class="anchor"><span class="anchor-link"></span></a>Lifecycle</h2>
<p>Contrarily to the rest of the platform resources, archives are not persisted resources, given their nature. Therefore there are no update, tag or deprecation operations available on archive resources.</p>
<p>An archive resource will be automatically erased from the system after certain after certain time. This time is configurable (config property <code>plugins.archive.ephemeral.ttl</code>) and it defaults to 5 hours.</p>
<h2><a href="#payload" name="payload" class="anchor"><span class="anchor-link"></span></a>Payload</h2>
<pre><code>{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;{resource_id}&quot;,
            &quot;project&quot;: &quot;{project}&quot;,
            &quot;path&quot;: &quot;{path}&quot;,
            &quot;originalSource&quot;: &quot;{originalSource}&quot;,
            &quot;format&quot;: &quot;{format}&quot;,
            &quot;rev&quot;: &quot;{rev}&quot;,
            &quot;tag&quot;: &quot;{tag}&quot;
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;{resource_id}&quot;,
            &quot;project&quot;: &quot;{project}&quot;,
            &quot;path&quot;: &quot;{path}&quot;,
            &quot;rev&quot;: &quot;{rev}&quot;,
            &quot;tag&quot;: &quot;{tag}&quot;
        },
        {...}       
    ]
}
</code></pre>
<p>where&hellip;</p>
<ul>
  <li><code>{resource_id}</code>: Iri - the @id value of the resource to be added to the archive.</li>
  <li><code>{project}</code>: String - the project (in the format &lsquo;myorg/myproject&rsquo;) where the specified resource belongs. This field  is optional. It defaults to the current project.</li>
  <li><code>{path}</code>: Path - the relative path on the archive where this resource is going to stored
    <ul>
      <li>Optional / defaults to <code>{project}/{resourceId}.json</code> for a Resource type and <code>{project}/{filename}</code> for File type.</li>
      <li>The provided filename should not exceed 99 characters.</li>
    </ul>
  </li>
  <li><code>{originalSource}</code>: Boolean - flag to decide the whether to fetch the original payload or its compacted form.
    <ul>
      <li>Only allowed for Resource type</li>
      <li>Optional and defaults to false</li>
      <li>Can not be present at the same time as <code>format</code> field.</li>
    </ul>
  </li>
  <li><code>{format}</code>: String - the format we expect for the resource in the archive.
    <ul>
      <li>Only allowed for Resource type</li>
      <li>Optional and defaults to compacted</li>
      <li>Accepts the following values: source (to get the original payload), compacted, expanded, n-triples, dot</li>
      <li>Can not be present at the same time as <code>originalSource</code> field.</li>
    </ul>
  </li>
  <li><code>{rev}</code>: Int - the revision of the resource. This field is optional. It defaults to the latest revision.</li>
  <li><code>{tag}</code>: String - the tag of the resource. This field is optional. This field cannot be present at the same time as  <code>rev</code> field.</li>
</ul>
<p>In order to decide whether we want to select a resource or a file, the <code>@type</code> discriminator is used with the following possibilities:</p>
<ul>
  <li><code>Resource</code>: targets a resource</li>
  <li><code>File</code>: targets a file</li>
</ul>
<h2><a href="#create-using-post" name="create-using-post" class="anchor"><span class="anchor-link"></span></a>Create using POST</h2>
<p>This endpoint is used to describe the archive and to subsequently consume it.</p>
<pre><code>POST /v1/archives/{org_label}/{project_label}
</code></pre>
<p>The json payload:</p>
<ul>
  <li>If the <code>@id</code> value is found on the payload, this @id will be used.</li>
  <li>If the <code>@id</code> value is not found on the payload, an @id will be generated as follows: <code>base:{UUID}</code>. The <code>base</code> is  the <code>prefix</code> defined on the resource&rsquo;s project (<code>{project_label}</code>).</li>
</ul>
<p>The response will be an HTTP 303 Location redirect, which will point to the url where to consume the archive (tarball).</p>
<p>The following diagram can help to understand the HTTP exchange <img src="assets/archives/post-redirect-get.png" alt="post-redirect-get" title="Post/Redirect/Get archive" /></p>
<p><strong>Example</strong></p>
<p>The following example shows how to create an archive containing 3 files. 2 of them are resources and the other is a file. As a response, the tarball will be offered.</p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/create.sh" target="_blank" title="Go to snippet source">source</a><code class="language-sh">curl -L \
     -X POST \
     -H &quot;Content-Type: application/json&quot; -H &quot;Accept: */*&quot; \
     &quot;http://localhost:8080/v1/archives/myorg/myproject&quot; \
     -d &#39;{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}
&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/payload.json" target="_blank" title="Go to snippet source">source</a><code class="language-json">{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;format&quot;: &quot;expanded&quot;
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}</code></pre></dd>
</dl>
<h2><a href="#create-using-put" name="create-using-put" class="anchor"><span class="anchor-link"></span></a>Create using PUT</h2>
<p>This alternative endpoint to create an archive is useful in case you want to split the creation of the archive resource and the consumption of it. </p>
<p>It can also be useful in cases where one user wants to create the definition of the archive and share the link with another user who then is going to consume it.</p>
<pre><code>PUT /v1/archives/{org_label}/{project_label}/{archive_id}
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/create-put.sh" target="_blank" title="Go to snippet source">source</a><code class="language-sh">curl -X POST \
     -H &quot;Content-Type: application/json&quot; \
     &quot;http://localhost:8080/v1/archives/myorg/myproject/myarchive&quot; \
     -d &#39;{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;originalSource&quot;: false
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}
&#39;</code></pre></dd>
  <dt>Payload</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/payload.json" target="_blank" title="Go to snippet source">source</a><code class="language-json">{
    &quot;resources&quot; : [
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource1&quot;,
            &quot;rev&quot;: 2
        },
        {
            &quot;@type&quot;: &quot;Resource&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;format&quot;: &quot;expanded&quot;
        },
        {
            &quot;@type&quot;: &quot;File&quot;,
            &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
            &quot;project&quot;: &quot;myorg/myproject2&quot;,
            &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
        }
    ]
}</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/created.json" target="_blank" title="Go to snippet source">source</a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/archives-metadata.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/metadata.json&quot;
  ],
  &quot;@id&quot;: &quot;http://localhost:8080/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;@type&quot;: &quot;Archive&quot;,
  &quot;_self&quot;: &quot;http://localhost:8080/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;_constrainedBy&quot; : &quot;https://bluebrain.github.io/nexus/schemas/archives.json&quot;,
  &quot;_project&quot;: &quot;http://localhost:8080/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 1,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2021-05-17T14:54:42.939Z&quot;,
  &quot;_createdBy&quot;: &quot;http://localhost:8080/v1/realms/myrealm/users/john&quot;,
  &quot;_updatedAt&quot;: &quot;2021-05-17T14:54:42.939Z&quot;,
  &quot;_updatedBy&quot;: &quot;http://localhost:8080/v1/realms/myrealm/users/john&quot;
}</code></pre></dd>
</dl>
<p>Note that if the payload contains an @id different from the <code>{archive_id}</code>, the request will fail.</p>
<h2><a href="#fetch" name="fetch" class="anchor"><span class="anchor-link"></span></a>Fetch</h2>
<p>When fetching an archive, the response format can be chosen through HTTP content negotiation. In order to fetch the archive metadata, the client can use any of the <a href="content-negotiation.html#supported-mime-types">following MIME types</a>. However, in order to fetch the archive content, the HTTP <code>Accept</code> header should be provided:</p>
<ul>
  <li><code>*/*</code> or <code>application/x-tar</code> will return a tar archive (or tarball)</li>
  <li><code>application/zip</code> will return a zip archive</li>
</ul><div class="callout note warning"><div class="callout-title">Note</div>
<p><a href="https://en.wikipedia.org/wiki/Tar_(computing)" title="The limitations of the tar format">The limitations of the tar format</a> makes the usage of archives difficult (among other things, the maximum file name is limited to 100 characters), so its support will be removed in a future release.</p></div>
<p>When downloading the archive, it is possible to ignore resources that does not exist by appending the query parameter <code>ignoreNotFound=true</code> to the fetch link.</p>
<pre><code>GET /v1/archives/{org_label}/{project_label}/{archive_id}
GET /v1/archives/{org_label}/{project_label}/{archive_id}?ignoreNotFound=true
</code></pre>
<p><strong>Example</strong></p>
<dl>
  <dt>Request (tarball)
  </dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/fetch.sh" target="_blank" title="Go to snippet source">source</a><code class="language-sh">curl &quot;http://localhost:8080/v1/archives/myorg/myproject/myarchive&quot; \
     -H &quot;Accept: application/x-tar&quot; \
     -o output.tar</code></pre></dd>
  <dt>Request (metadata)
  </dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/fetchMeta.sh" target="_blank" title="Go to snippet source">source</a><code class="language-sh">curl &quot;http://localhost:8080/v1/archives/myorg/myproject/myarchive&quot; \
     -H &quot;Accept: application/json&quot;</code></pre></dd>
  <dt>Response</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/assets/archives/fetched.json" target="_blank" title="Go to snippet source">source</a><code class="language-json">{
  &quot;@context&quot;: [
    &quot;https://bluebrain.github.io/nexus/contexts/archives.json&quot;,
    &quot;https://bluebrain.github.io/nexus/contexts/metadata.json&quot;
  ],
  &quot;@id&quot;: &quot;http://localhost:8080/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;@type&quot;: &quot;Archive&quot;,
  &quot;resources&quot; : [
    {
      &quot;@type&quot;: &quot;Resource&quot;,
      &quot;resourceId&quot;: &quot;http://localhost:8080/resource1&quot;,
      &quot;rev&quot;: 2
    },
    {
      &quot;@type&quot;: &quot;Resource&quot;,
      &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
      &quot;project&quot;: &quot;myorg/myproject2&quot;,
      &quot;format&quot;: &quot;expanded&quot;
    },
    {
      &quot;@type&quot;: &quot;File&quot;,
      &quot;resourceId&quot;: &quot;http://localhost:8080/resource2&quot;,
      &quot;project&quot;: &quot;myorg/myproject2&quot;,
      &quot;path&quot;: &quot;my/custom/path/resource2.json&quot;
    }
  ],
  &quot;_self&quot;: &quot;http://localhost:8080/v1/archives/myorg/myproj/myarchive&quot;,
  &quot;_constrainedBy&quot;: &quot;https://bluebrain.github.io/nexus/schemas/archives.json&quot;,
  &quot;_project&quot;: &quot;http://localhost:8080/v1/projects/myorg/myproj&quot;,
  &quot;_rev&quot;: 1,
  &quot;_deprecated&quot;: false,
  &quot;_createdAt&quot;: &quot;2021-05-17T14:54:42.939Z&quot;,
  &quot;_createdBy&quot;: &quot;http://localhost:8080/v1/realms/myrealm/users/john&quot;,
  &quot;_updatedAt&quot;: &quot;2021-05-17T14:54:42.939Z&quot;,
  &quot;_updatedBy&quot;: &quot;http://localhost:8080/v1/realms/myrealm/users/john&quot;
  &quot;_expiresInSeconds&quot;: 17530
}</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/delta/api/archives-api.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
v1.8.x
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../docs/delta/api/files-api.html" title="Files" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Files
</span>
</div>
</a>
<a href="../../../docs/delta/api/search-api.html" title="Global search" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Global search
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
Â© 2017-2025 <a href="https://epfl.ch/">EPFL</a>
 <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://github.com/BlueBrain/nexus/discussions" class="md-footer-social__link fa fa-github"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../."}})</script>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../.././public/js/gtm.js"></script>
</body>
</html>
