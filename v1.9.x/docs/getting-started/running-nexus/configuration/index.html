<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../../.././assets/img/favicon-32x32.png">
<title>Nexus configuration Â· Blue Brain Nexus</title>
<link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../../lib/prettify/prettify.css">
<script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../../../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
Nexus configuration
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../../../docs/versions.html" class="page">Versions</a></li>
  <li><a href="../../../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../../../docs/getting-started/try-nexus.html" class="page">Try Nexus with Neuroscience Datasets</a></li>
    <li><a href="../../../../docs/getting-started/try-nexus-movielens.html" class="page">Try Nexus with the MovieLens Dataset</a></li>
    <li><a href="../../../../docs/getting-started/running-nexus/index.html" class="page">Running Nexus</a>
    <ul>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html" class="active page">Nexus configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/search-configuration.html" class="page">Search configuration</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../../../docs/releases/v1.9-release-notes.html" class="page">v1.9 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.8-to-v1.9-migration.html" class="page">v1.8 To v1.9 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.8-release-notes.html" class="page">v1.8 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.7-to-v1.8-migration.html" class="page">v1.7 To v1.8 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.7-release-notes.html" class="page">v1.7 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.6-to-v1.7-migration.html" class="page">v1.6 To v1.7 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.6-release-notes.html" class="page">v1.6 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.5-to-v1.6-migration.html" class="page">v1.5 To v1.6 Migration</a></li>
    <li><a href="../../../../docs/releases/v1.5-release-notes.html" class="page">v1.5 Release Notes</a></li>
    <li><a href="../../../../docs/releases/v1.4-to-v1.5-migration.html" class="page">v1.4 To v1.5 Migration</a></li>
    <li><a href="../../../../docs/releases/older-releases.html" class="page">Older releases</a></li>
  </ul></li>
  <li><a href="../../../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../../docs/fusion/organizations.html" class="page">Organizations</a></li>
    <li><a href="../../../../docs/fusion/projects.html" class="page">Projects</a>
    <ul>
      <li><a href="../../../../docs/fusion/project.html" class="page">Project</a></li>
    </ul></li>
    <li><a href="../../../../docs/fusion/search.html" class="page">Global Search Types</a></li>
    <li><a href="../../../../docs/fusion/studios.html" class="page">Studios</a>
    <ul>
      <li><a href="../../../../docs/fusion/studio.html" class="page">Studio</a></li>
    </ul></li>
    <li><a href="../../../../docs/fusion/my-data.html" class="page">User data</a></li>
    <li><a href="../../../../docs/fusion/plugins.html" class="page">Plugins</a></li>
  </ul></li>
  <li><a href="../../../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../../docs/delta/api/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../../../docs/delta/api/content-negotiation.html" class="page">Content Negotiation</a></li>
      <li><a href="../../../../docs/delta/api/error-signaling.html" class="page">Error Signaling</a></li>
      <li><a href="../../../../docs/delta/api/version.html" class="page">Version</a></li>
      <li><a href="../../../../docs/delta/api/authentication.html" class="page">Authentication &amp; Authorization</a></li>
      <li><a href="../../../../docs/delta/api/identities.html" class="page">Identities</a></li>
      <li><a href="../../../../docs/delta/api/permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../../../docs/delta/api/realms-api.html" class="page">Realms</a></li>
      <li><a href="../../../../docs/delta/api/acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../../../docs/delta/api/user-permissions-api.html" class="page">User Permissions</a></li>
      <li><a href="../../../../docs/delta/api/orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../../../docs/delta/api/projects-api.html" class="page">Projects</a></li>
      <li><a href="../../../../docs/delta/api/quotas.html" class="page">Quotas</a></li>
      <li><a href="../../../../docs/delta/api/schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../../../docs/delta/api/resources-api.html" class="page">Resources</a></li>
      <li><a href="../../../../docs/delta/api/trial.html" class="page">Trial</a></li>
      <li><a href="../../../../docs/delta/api/multi-fetch.html" class="page">Multi fetch</a></li>
      <li><a href="../../../../docs/delta/api/id-resolution.html" class="page">Id Resolution</a></li>
      <li><a href="../../../../docs/delta/api/resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../../../docs/delta/api/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../../../docs/delta/api/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../../../docs/delta/api/views/pipes.html" class="page">Elasticsearch Pipes</a></li>
        <li><a href="../../../../docs/delta/api/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../../../docs/delta/api/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../../../docs/delta/api/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
        <li><a href="../../../../docs/delta/api/views/composite-view-api.html" class="page">CompositeView</a></li>
      </ul></li>
      <li><a href="../../../../docs/delta/api/storages-api.html" class="page">Storages</a></li>
      <li><a href="../../../../docs/delta/api/files-api.html" class="page">Files</a></li>
      <li><a href="../../../../docs/delta/api/archives-api.html" class="page">Archives</a></li>
      <li><a href="../../../../docs/delta/api/search-api.html" class="page">Global search</a></li>
      <li><a href="../../../../docs/delta/api/graph-analytics-api.html" class="page">Graph analytics</a></li>
      <li><a href="../../../../docs/delta/api/jira.html" class="page">Jira integration</a></li>
      <li><a href="../../../../docs/delta/api/events-api.html" class="page">Global events</a></li>
      <li><a href="../../../../docs/delta/api/supervision-api.html" class="page">Supervision</a></li>
    </ul></li>
    <li><a href="../../../../docs/delta/metadata.html" class="page">Nexus Metadata</a></li>
    <li><a href="../../../../docs/delta/plugins/index.html" class="page">Plugins</a></li>
    <li><a href="../../../../docs/delta/benchmarks/index.html" class="page">Benchmarks</a>
    <ul>
      <li><a href="../../../../docs/delta/benchmarks/v1.4.2.html" class="page">Benchmarks v1.4.2</a></li>
      <li><a href="../../../../docs/delta/benchmarks/v1.2.1.html" class="page">Benchmarks v1.2.1</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../../docs/utilities/index.html" class="page">Utilities</a></li>
  <li><a href="../../../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#nexus-configuration" class="header">Nexus configuration</a>
  <ul>
    <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#http-configuration" class="header">Http configuration</a>
    <ul>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#postgres-configuration" class="header">Postgres configuration</a></li>
    </ul></li>
    <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#rdf-parser" class="header">RDF parser</a>
    <ul>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#service-account-configuration" class="header">Service account configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#automatic-project-provisioning" class="header">Automatic project provisioning</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#fusion-configuration" class="header">Fusion configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#projections-configuration" class="header">Projections configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#plugins-configuration" class="header">Plugins configuration</a>
      <ul>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#elasticsearch-views-plugin-configuration" class="header">Elasticsearch views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#blazegraph-views-plugin-configuration" class="header">Blazegraph views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#composite-views-plugin-configuration" class="header">Composite views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#storage-plugin-configuration" class="header">Storage plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#archive-plugin-configuration" class="header">Archive plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#jira-plugin-configuration" class="header">Jira plugin configuration</a></li>
      </ul></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#monitoring" class="header">Monitoring</a>
      <ul>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#instrumentation" class="header">Instrumentation</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#reporters" class="header">Reporters</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> v1.9.x
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#nexus-configuration" class="header">Nexus configuration</a>
  <ul>
    <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#http-configuration" class="header">Http configuration</a>
    <ul>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#postgres-configuration" class="header">Postgres configuration</a></li>
    </ul></li>
    <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#rdf-parser" class="header">RDF parser</a>
    <ul>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#service-account-configuration" class="header">Service account configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#automatic-project-provisioning" class="header">Automatic project provisioning</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#fusion-configuration" class="header">Fusion configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#projections-configuration" class="header">Projections configuration</a></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#plugins-configuration" class="header">Plugins configuration</a>
      <ul>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#elasticsearch-views-plugin-configuration" class="header">Elasticsearch views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#blazegraph-views-plugin-configuration" class="header">Blazegraph views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#composite-views-plugin-configuration" class="header">Composite views plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#storage-plugin-configuration" class="header">Storage plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#archive-plugin-configuration" class="header">Archive plugin configuration</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#jira-plugin-configuration" class="header">Jira plugin configuration</a></li>
      </ul></li>
      <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#monitoring" class="header">Monitoring</a>
      <ul>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#instrumentation" class="header">Instrumentation</a></li>
        <li><a href="../../../../docs/getting-started/running-nexus/configuration/index.html#reporters" class="header">Reporters</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#nexus-configuration" name="nexus-configuration" class="anchor"><span class="anchor-link"></span></a>Nexus configuration</h1>
<p>Nexus Delta service can be highly customized using <a href="https://github.com/BlueBrain/nexus/tree/v1.9.x/delta/app/src/main/resources" title="configuration file(s)" target="_blank" rel="noopener noreferrer">configuration file(s)</a>. Many things can be adapted to your deployment needs: port where the service is running, timeouts, pagination defaults, etc. </p>
<p>There are 3 ways to modify the default configuration:</p>
<ul>
  <li>Setting the env variable <code>DELTA_EXTERNAL_CONF</code> which defines the path to a HOCON file. The configuration keys that are defined here can be overridden by the other methods.</li>
  <li>Using JVM properties as arguments when running the service: -D<code>{property}</code>. For example: <code>-Dapp.http.interface=&quot;127.0.0.1&quot;</code>.</li>
  <li>Using <a href="https://github.com/lightbend/config#user-content-optional-system-or-env-variable-overrides" title="FORCE_CONFIG_{property}" target="_blank" rel="noopener noreferrer">FORCE_CONFIG_{property}</a>  environment variables. In order to enable this style of configuration, the JVM property  <code>-Dconfig.override_with_env_vars=true</code> needs to be set. Once set, a configuration flag can be overridden. For example: <code>CONFIG_FORCE_app_http_interface=&quot;127.0.0.1&quot;</code>.</li>
</ul>
<p>In terms of JVM pool memory allocation, we recommend setting the following values to the <code>JAVA_OPTS</code> environment variable: <code>-Xms4g -Xmx4g</code>. The recommended values should be changed accordingly with the usage of Nexus Delta, the number of projects and the resources/schemas size.</p>
<p>In order to successfully run Nexus Delta there is a minimum set of configuration flags that need to be specified</p>
<h2><a href="#http-configuration" name="http-configuration" class="anchor"><span class="anchor-link"></span></a>Http configuration</h2>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L11" title="The `http` section" target="_blank" rel="noopener noreferrer">The <code>http</code> section</a> of the configuration defines the binding address and port where the service will be listening.</p>
<p>The configuration flag <code>akka.http.server.parsing.max-content-length</code> can be used to control the maximum payload size allowed for Nexus Delta resources. This value applies to all posted resources except for files.</p>
<h3><a href="#postgres-configuration" name="postgres-configuration" class="anchor"><span class="anchor-link"></span></a>Postgres configuration</h3>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L23" title="The `database` section" target="_blank" rel="noopener noreferrer">The <code>database</code> section</a> of the configuration defines the postgres specific configuration. As Nexus Delta uses three separate pools (&lsquo;read&rsquo;, &lsquo;write&rsquo;, &lsquo;streaming&rsquo;), it is recommended to set the host, port, database name, username, and password via the <code>app.defaults.database</code> field, as it will apply to all pools. It is however possible to accommodate more advanced setups by configuring each pool separately by changing its respective <code>app.database.{read|write|streaming}</code> fields. </p>
<p>The pool size can be set using the <code>app.defaults.database.access.pool-size</code> setting for all pools, or individually for each pool (<code>app.database.{read|write|streaming}.access.pool-size</code>).</p><div class="callout note warning"><div class="callout-title">Note</div>
<p>A default Postgres deployment will limit the number of connections to 100, unless configured otherwise. See the <a href="https://www.postgresql.org/docs/current/runtime-config-connection.html" title="Postgres Connection and Authentication documentation" target="_blank" rel="noopener noreferrer">Postgres Connection and Authentication documentation</a>.</p></div>
<p>Before running Nexus Delta, the <a href="https://github.com/BlueBrain/nexus/tree/v1.9.x/delta/sourcing-psql/src/main/resources/scripts/postgres/init" title="init scripts" target="_blank" rel="noopener noreferrer">init scripts</a> should be run in the lexicographical order.</p>
<p>It is possible to let Nexus Delta automatically create them using the following configuration parameters: <code>app.database.tables-autocreate=true</code>.</p><div class="callout note warning"><div class="callout-title">Note</div>
<p>Auto creation of tables is included as a development convenience and should be avoided in production.</p></div>
<h1><a href="#rdf-parser" name="rdf-parser" class="anchor"><span class="anchor-link"></span></a>RDF parser</h1>
<p>The underlying <a href="https://jena.apache.org/" title="Apache Jena">Apache Jena</a> parser used to validate incoming data is <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L49" title="configurable using the `json-ld-api` field">configurable using the <code>json-ld-api</code> field</a> to enable different levels of strictness.</p>
<h2><a href="#service-account-configuration" name="service-account-configuration" class="anchor"><span class="anchor-link"></span></a>Service account configuration</h2>
<p>Nexus Delta uses a service account to perform automatic tasks under the hood. Examples of it are:</p>
<ul>
  <li>Granting default ACLs to the user creating a project.</li>
  <li>Creating default views on project creation.</li>
</ul>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L427" title="The `service-account` section" target="_blank" rel="noopener noreferrer">The <code>service-account</code> section</a> of the configuration defines the service account configuration.</p>
<h2><a href="#automatic-project-provisioning" name="automatic-project-provisioning" class="anchor"><span class="anchor-link"></span></a>Automatic project provisioning</h2>
<p>Automatic project provisioning allows to create a dedicated project for users the first time they connect to Delta that is to say the first time, they query the project listing endpoints.</p>
<p>The generated project label will be:</p>
<ul>
  <li>The current username where only non-diacritic alphabetic characters (<code>[a-zA-Z]</code>), numbers, dashes and underscores will be preserved.</li>
  <li>This resulting string is then truncated to 64 characters if needed.</li>
</ul>
<p>This feature can be turned on via the flag <code>app.automatic-provisioning.enabled</code>.</p>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L197" title="The `automatic-provisioning` section" target="_blank" rel="noopener noreferrer">The <code>automatic-provisioning</code> section</a> of the configuration defines the project provisioning configuration.</p>
<h2><a href="#fusion-configuration" name="fusion-configuration" class="anchor"><span class="anchor-link"></span></a>Fusion configuration</h2>
<p>When fetching a resource, Nexus Delta allows to return a redirection to its representation in Fusion by providing <code>text/html</code> in the <code>Accept</code> header.</p>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L40" title="The `fusion` section" target="_blank" rel="noopener noreferrer">The <code>fusion</code> section</a> of the configuration defines the fusion configuration.</p>
<h2><a href="#projections-configuration" name="projections-configuration" class="anchor"><span class="anchor-link"></span></a>Projections configuration</h2>
<p>Projections in Nexus Delta are asynchronous processes that can replay the event log and process this information. For more information on projections, please refer to the <a href="../../../delta/architecture.html">Architecture page</a>.</p>
<p><a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L281" title="The `projections` section">The <code>projections</code> section</a> of the configuration allows to configure the projections.</p>
<p>In case of failure in a projection, Nexus Delta records the failure information inside the <code>public.failed_elem_logs</code> PostgreSQL table, which can be used for analysis, and ultimately resolution of the failures. The configuration allows to set how long the failure information is stored for (<code>app.projections.failed-elem-ttl</code>), and how often the projection deleting the expired failures is awoken (<code>app.projections.delete-expired-every</code>).</p>
<h2><a href="#plugins-configuration" name="plugins-configuration" class="anchor"><span class="anchor-link"></span></a>Plugins configuration</h2>
<p>Since 1.5.0, Nexus Delta supports plugins. Jar files present inside the local directory defined by the <code>DELTA_PLUGINS</code> environment variable are loaded as plugins into the Delta service. </p>
<p>Each plugin configuration is rooted under <code>plugins.{plugin_name}</code>. All plugins have a <code>plugins.{plugin_name}.priority</code> configuration flag used to determine the order in which the routes are handled in case of collisions. </p>
<p>For more information about plugins, please refer to the <a href="../../../delta/plugins/index.html">Plugins page</a>.</p>
<h3><a href="#elasticsearch-views-plugin-configuration" name="elasticsearch-views-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Elasticsearch views plugin configuration</h3>
<p>The elasticsearch plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/elasticsearch/src/main/resources/elasticsearch.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>The most important flags are: * <code>plugins.elasticsearch.base</code> which defines the endpoint where the Elasticsearch service is running. * <code>plugins.elasticsearch.credentials.username</code> and <code>plugins.elasticsearch.credentials.password</code> to allow to access to a secured Elasticsearch cluster. The user provided should have the privileges to create/delete indices and read/index from them.</p>
<p>Please refer to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-cluster.html" title="Elasticsearch configuration">Elasticsearch configuration</a> which describes the different steps to achieve this.</p>
<h3><a href="#blazegraph-views-plugin-configuration" name="blazegraph-views-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Blazegraph views plugin configuration</h3>
<p>The blazegraph plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/blazegraph/src/main/resources/blazegraph.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>. </p>
<p>The most important flag is <code>plugins.blazegraph.base</code> which defines the endpoint where the Blazegraph service is running.</p>
<p>The <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/blazegraph/src/main/resources/blazegraph.conf#L23" title="`plugins.blazegraph.slow-queries` section"><code>plugins.blazegraph.slow-queries</code> section</a> of the Blazegraph configuration defines what is considered a slow Blazegraph query, which will get logged in the <code>public.blazegraph_queries</code> PostgreSQL table. This can be used to understand which Blazegraph queries can be improved.</p>
<h3><a href="#composite-views-plugin-configuration" name="composite-views-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Composite views plugin configuration</h3>
<p>The composite views plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/composite-views/src/main/resources/composite-views.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>. </p>
<p>There are several configuration flags related to tweaking the range of values allowed for sources, projections and rebuild interval.</p>
<p>Authentication for remote sources can be specified in three different ways. The value of <code>plugins.composite-views.remote-source-credentials</code> should be speficied in the same way as remote storages, as shown <a href="index.html#remote-storage-configuration">here</a></p>
<h3><a href="#storage-plugin-configuration" name="storage-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Storage plugin configuration</h3>
<p>The storage plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/storage/src/main/resources/storage.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>. </p>
<p>Nexus Delta supports 3 types of storages: &lsquo;disk&rsquo;, &lsquo;amazon&rsquo; (s3 compatible) and &lsquo;remote&rsquo;.</p>
<ul>
  <li>For disk storages the most relevant configuration flag is <code>plugins.storage.storages.disk.default-volume</code>, which defines the default location in the Nexus Delta filesystem where the files using that storage are going to be saved.</li>
  <li>For S3 compatible storages the most relevant configuration flags are the ones related to the S3 settings: <code>plugins.storage.storages.amazon.default-endpoint</code>, <code>plugins.storage.storages.amazon.default-access-key</code> and <code>plugins.storage.storages.amazon.default-secret-key</code>.</li>
  <li>For remote disk storages the most relevant configuration flags are <code>plugins.storage.storages.remote-disk.default-endpoint</code> (the endpoint where the remote storage service is running) and <code>plugins.storage.storages.remote-disk.credentials</code> (the method to authenticate to the remote storage service).</li>
</ul>
<h4><a href="#file-configuration" name="file-configuration" class="anchor"><span class="anchor-link"></span></a>File configuration</h4>
<p>When the media type is not provided by the user, Delta relies on automatic detection based on the file extension in order to provide one.</p>
<p>From 1.9, it is possible to provide a list of extensions with an associated media type to compute the media type.</p>
<p>This list can be defined at <code>files.media-type-detector.extensions</code>:</p>
<pre class="prettyprint"><code class="language-hocon">files {
  # Allows to define default media types for the given file extensions
  media-type-detector {
    extensions {
      custom = &quot;application/custom&quot;
      ntriples = &quot;application/n-triples&quot;
    }
  }
}
</code></pre>
<p>The media type resolution process follow this order stopping at the first successful step:</p>
<ul>
  <li>Select the <code>Content-Type</code> header from the file creation/update request</li>
  <li>Compare the extension to the custom list provided in the configuratio</li>
  <li>Fallback on akka automatic detection</li>
  <li>Fallback to the default value <code>application/octet-stream</code></li>
</ul>
<h4><a href="#remote-storage-configuration" name="remote-storage-configuration" class="anchor"><span class="anchor-link"></span></a>Remote storage configuration</h4>
<p>Authentication for remote storage can be specified in three different ways. The value of <code>plugins.storage.storages.remote-disk.credentials</code> can be:</p>
<h5><a href="#recommended-client-credentials-openid-authentication-" name="recommended-client-credentials-openid-authentication-" class="anchor"><span class="anchor-link"></span></a>Recommended: client credentials (OpenId authentication)</h5>
<pre class="prettyprint"><code class="language-hocon">{
  type: &quot;client-credentials&quot;
  user: &quot;username&quot;
  password: &quot;password&quot;
  realm: &quot;internal&quot;
}
</code></pre>
<p>This configuration tells Delta to log into the <code>internal</code> realm (which should have already been defined) with the <code>user</code> and <code>password</code> credentials, which will give Delta an access token to use when making requests to remote storage</p>
<h5><a href="#anonymous" name="anonymous" class="anchor"><span class="anchor-link"></span></a>Anonymous</h5>
<pre class="prettyprint"><code class="language-hocon">{
  type: &quot;anonymous&quot;
}
</code></pre>
<h5><a href="#long-living-auth-token-legacy-" name="long-living-auth-token-legacy-" class="anchor"><span class="anchor-link"></span></a>Long-living auth token (legacy)</h5>
<pre class="prettyprint"><code class="language-hocon">{
  type: &quot;jwt-token&quot;
  token: &quot;long-living-auth-token&quot;
}
</code></pre>
<h3><a href="#archive-plugin-configuration" name="archive-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Archive plugin configuration</h3>
<p>The archive plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/archive/src/main/resources/archive.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3><a href="#jira-plugin-configuration" name="jira-plugin-configuration" class="anchor"><span class="anchor-link"></span></a>Jira plugin configuration</h3>
<p>The Jira plugin configuration can be found <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/plugins/jira/src/main/resources/jira.conf" title="here" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Setting up the Jira plugin needs to set up the endpoint of the Jira instance but also the consumer key, the consumer secret and the private key required to interact with Jira (more details including the configuration steps in Jira <a href="https://developer.atlassian.com/server/jira/platform/oauth/#step-1--configure-jira" title="here">here</a>).</p>
<h2><a href="#monitoring" name="monitoring" class="anchor"><span class="anchor-link"></span></a>Monitoring</h2>
<p>For monitoring, Nexus Delta relies on <a href="https://kamon.io/" title="Kamon" target="_blank" rel="noopener noreferrer">Kamon</a>.</p>
<p>Kamon can be disabled by passing the environment variable <code>KAMON_ENABLED</code> set to <code>false</code>.</p>
<p>Delta configuration for Kamon is provided <a href="https://github.com/BlueBrain/nexus/blob/v1.9.x/delta/app/src/main/resources/app.conf#L391" title="in the `monitoring` section" target="_blank" rel="noopener noreferrer">in the <code>monitoring</code> section</a>. For a more complete description on the different options available, please look at the Kamon website.</p>
<h3><a href="#instrumentation" name="instrumentation" class="anchor"><span class="anchor-link"></span></a>Instrumentation</h3>
<p>Delta provides the Kamon instrumentation for:</p>
<ul>
  <li><a href="https://kamon.io/docs/v1/instrumentation/executors/" title="Executors" target="_blank" rel="noopener noreferrer">Executors</a></li>
  <li><a href="https://kamon.io/docs/v1/instrumentation/futures/" title="Scala futures" target="_blank" rel="noopener noreferrer">Scala futures</a></li>
  <li><a href="https://kamon.io/docs/v1/instrumentation/logback/" title="Logback" target="_blank" rel="noopener noreferrer">Logback</a></li>
  <li><a href="https://kamon.io/docs/v1/instrumentation/system-metrics/" title="System metrics" target="_blank" rel="noopener noreferrer">System metrics</a></li>
</ul>
<h3><a href="#reporters" name="reporters" class="anchor"><span class="anchor-link"></span></a>Reporters</h3>
<p>Kamon reporters are also available for:</p>
<ul>
  <li><a href="https://kamon.io/docs/v1/reporters/jaeger/" title="Jaeger" target="_blank" rel="noopener noreferrer">Jaeger</a></li>
  <li><a href="https://kamon.io/docs/v1/reporters/prometheus/" title="Prometheus" target="_blank" rel="noopener noreferrer">Prometheus</a></li>
</ul>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/getting-started/running-nexus/configuration/index.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
v1.9.x
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../../docs/getting-started/running-nexus/index.html" title="Running Nexus" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Running Nexus
</span>
</div>
</a>
<a href="../../../../docs/getting-started/running-nexus/search-configuration.html" title="Search configuration" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Search configuration
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
Â© 2017-2024 <a href="https://epfl.ch/">EPFL</a>
 <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://github.com/BlueBrain/nexus/discussions" class="md-footer-social__link fa fa-github"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../../."}})</script>
<script type="text/javascript" src="../../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../../.././public/js/gtm.js"></script>
</body>
</html>
