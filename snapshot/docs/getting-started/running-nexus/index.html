<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../.././assets/img/favicon-32x32.png">
<title>Running Nexus · Blue Brain Nexus</title>
<link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#03a9f4" />
<link rel="stylesheet" href="../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../lib/prettify/prettify.css">
<script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../../.././assets/css/docs.css">
</head>
<body
data-md-color-primary="light-blue"
data-md-color-accent="cyan"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../docs/index.html" title="Blue Brain Nexus" class="md-header-nav__button md-logo">
<img src="../../.././assets/img/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Blue Brain Nexus
</span>
<span class="md-header-nav__topic">
Running Nexus
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../docs/index.html" title="Blue Brain Nexus" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../.././assets/img/logo.png" width="24" height="24">
</a>
<a href="../../../docs/index.html" title="Blue Brain Nexus">
Blue Brain Nexus
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/BlueBrain/nexus"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
BlueBrain/nexus
</div>
</a>

</div>
<ul>
  <li><a href="../../../docs/versions.html" class="page">Versions</a></li>
  <li><a href="../../../docs/getting-started/index.html" class="page">Getting Started</a>
  <ul>
    <li><a href="../../../docs/getting-started/understanding-knowledge-graphs.html" class="page">Understanding Knowledge Graphs</a></li>
    <li><a href="../../../docs/getting-started/try-nexus.html" class="page">Try Nexus with Neuroscience Datasets</a></li>
    <li><a href="../../../docs/getting-started/try-nexus-movielens.html" class="page">Try Nexus with the MovieLens Dataset</a></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html" class="active page">Running Nexus</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/configuration/index.html" class="page">Nexus configuration</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/search-configuration.html" class="page">Search configuration</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../docs/releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../../docs/releases/v1.10-release-notes.html" class="page">v1.10 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.9-release-notes.html" class="page">v1.9 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.8-to-v1.9-migration.html" class="page">v1.8 To v1.9 Migration</a></li>
    <li><a href="../../../docs/releases/v1.8-release-notes.html" class="page">v1.8 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.7-to-v1.8-migration.html" class="page">v1.7 To v1.8 Migration</a></li>
    <li><a href="../../../docs/releases/v1.7-release-notes.html" class="page">v1.7 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.6-to-v1.7-migration.html" class="page">v1.6 To v1.7 Migration</a></li>
    <li><a href="../../../docs/releases/v1.6-release-notes.html" class="page">v1.6 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.5-to-v1.6-migration.html" class="page">v1.5 To v1.6 Migration</a></li>
    <li><a href="../../../docs/releases/v1.5-release-notes.html" class="page">v1.5 Release Notes</a></li>
    <li><a href="../../../docs/releases/v1.4-to-v1.5-migration.html" class="page">v1.4 To v1.5 Migration</a></li>
    <li><a href="../../../docs/releases/older-releases.html" class="page">Older releases</a></li>
  </ul></li>
  <li><a href="../../../docs/roadmap.html" class="page">Roadmap</a></li>
  <li><a href="../../../docs/fusion/index.html" class="page">Nexus Fusion</a>
  <ul>
    <li><a href="../../../docs/fusion/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../docs/fusion/organizations.html" class="page">Organizations</a></li>
    <li><a href="../../../docs/fusion/projects.html" class="page">Projects</a>
    <ul>
      <li><a href="../../../docs/fusion/project.html" class="page">Project</a></li>
    </ul></li>
    <li><a href="../../../docs/fusion/search.html" class="page">Global Search Types</a></li>
    <li><a href="../../../docs/fusion/studios.html" class="page">Studios</a>
    <ul>
      <li><a href="../../../docs/fusion/studio.html" class="page">Studio</a></li>
    </ul></li>
    <li><a href="../../../docs/fusion/my-data.html" class="page">User data</a></li>
    <li><a href="../../../docs/fusion/plugins.html" class="page">Plugins</a></li>
  </ul></li>
  <li><a href="../../../docs/forge.html" class="page">Nexus Forge</a></li>
  <li><a href="../../../docs/delta/index.html" class="page">Nexus Delta</a>
  <ul>
    <li><a href="../../../docs/delta/architecture.html" class="page">Architecture</a></li>
    <li><a href="../../../docs/delta/api/index.html" class="page">API Reference</a>
    <ul>
      <li><a href="../../../docs/delta/api/content-negotiation.html" class="page">Content Negotiation</a></li>
      <li><a href="../../../docs/delta/api/error-signaling.html" class="page">Error Signaling</a></li>
      <li><a href="../../../docs/delta/api/version.html" class="page">Version</a></li>
      <li><a href="../../../docs/delta/api/authentication.html" class="page">Authentication &amp; Authorization</a></li>
      <li><a href="../../../docs/delta/api/identities.html" class="page">Identities</a></li>
      <li><a href="../../../docs/delta/api/permissions-api.html" class="page">Permissions</a></li>
      <li><a href="../../../docs/delta/api/realms-api.html" class="page">Realms</a></li>
      <li><a href="../../../docs/delta/api/acls-api.html" class="page">Access Control Lists</a></li>
      <li><a href="../../../docs/delta/api/user-permissions-api.html" class="page">User Permissions</a></li>
      <li><a href="../../../docs/delta/api/orgs-api.html" class="page">Organizations</a></li>
      <li><a href="../../../docs/delta/api/projects-api.html" class="page">Projects</a></li>
      <li><a href="../../../docs/delta/api/quotas.html" class="page">Quotas</a></li>
      <li><a href="../../../docs/delta/api/schemas-api.html" class="page">Schemas</a></li>
      <li><a href="../../../docs/delta/api/resources-api.html" class="page">Resources</a></li>
      <li><a href="../../../docs/delta/api/trial.html" class="page">Trial</a></li>
      <li><a href="../../../docs/delta/api/multi-fetch.html" class="page">Multi fetch</a></li>
      <li><a href="../../../docs/delta/api/id-resolution.html" class="page">Id Resolution</a></li>
      <li><a href="../../../docs/delta/api/resolvers-api.html" class="page">Resolvers</a></li>
      <li><a href="../../../docs/delta/api/views/index.html" class="page">Views</a>
      <ul>
        <li><a href="../../../docs/delta/api/views/elasticsearch-view-api.html" class="page">ElasticSearchView</a></li>
        <li><a href="../../../docs/delta/api/views/pipes.html" class="page">Elasticsearch Pipes</a></li>
        <li><a href="../../../docs/delta/api/views/aggregated-es-view-api.html" class="page">AggregateElasticSearchView</a></li>
        <li><a href="../../../docs/delta/api/views/sparql-view-api.html" class="page">SparqlView</a></li>
        <li><a href="../../../docs/delta/api/views/aggregated-sparql-view-api.html" class="page">AggregateSparqlView</a></li>
        <li><a href="../../../docs/delta/api/views/composite-view-api.html" class="page">CompositeView</a></li>
      </ul></li>
      <li><a href="../../../docs/delta/api/storages-api.html" class="page">Storages</a></li>
      <li><a href="../../../docs/delta/api/files-api.html" class="page">Files</a></li>
      <li><a href="../../../docs/delta/api/archives-api.html" class="page">Archives</a></li>
      <li><a href="../../../docs/delta/api/search-api.html" class="page">Global search</a></li>
      <li><a href="../../../docs/delta/api/graph-analytics-api.html" class="page">Graph analytics</a></li>
      <li><a href="../../../docs/delta/api/jira.html" class="page">Jira integration</a></li>
      <li><a href="../../../docs/delta/api/supervision-api.html" class="page">Supervision</a></li>
      <li><a href="../../../docs/delta/api/type-hierarchy-api.html" class="page">Type hierarchy</a></li>
    </ul></li>
    <li><a href="../../../docs/delta/metadata.html" class="page">Nexus Metadata</a></li>
    <li><a href="../../../docs/delta/plugins/index.html" class="page">Plugins</a></li>
    <li><a href="../../../docs/delta/benchmarks/index.html" class="page">Benchmarks</a>
    <ul>
      <li><a href="../../../docs/delta/benchmarks/v1.4.2.html" class="page">Benchmarks v1.4.2</a></li>
      <li><a href="../../../docs/delta/benchmarks/v1.2.1.html" class="page">Benchmarks v1.2.1</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../docs/utilities/index.html" class="page">Utilities</a></li>
  <li><a href="../../../docs/faq.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../docs/getting-started/running-nexus/index.html#running-nexus" class="header">Running Nexus</a>
  <ul>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#using-the-public-sandbox" class="header">Using the public sandbox</a></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#run-nexus-locally-with-docker" class="header">Run Nexus locally with Docker</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#requirements" class="header">Requirements</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#docker" class="header">Docker</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#memory-and-cpu-limits" class="header">Memory and CPU limits</a></li>
      </ul></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#docker-compose" class="header">Docker Compose</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#set-up" class="header">Set-up</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#starting-nexus" class="header">Starting Nexus</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#using-fusion" class="header">Using Fusion</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#administration" class="header">Administration</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#stopping-nexus" class="header">Stopping Nexus</a></li>
      </ul></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#endpoints" class="header">Endpoints</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#postgresql-partitioning" class="header">PostgreSQL partitioning</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#advanced-subpartitioning" class="header">Advanced subpartitioning</a></li>
      </ul></li>
    </ul></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#on-premise-cloud-deployment" class="header">On premise / cloud deployment</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#choice-of-hardware" class="header">Choice of hardware</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#postgresql" class="header">PostgreSQL</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#elasticsearch" class="header">Elasticsearch</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#blazegraph" class="header">Blazegraph</a></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> Snapshot
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../docs/getting-started/running-nexus/index.html#running-nexus" class="header">Running Nexus</a>
  <ul>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#using-the-public-sandbox" class="header">Using the public sandbox</a></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#run-nexus-locally-with-docker" class="header">Run Nexus locally with Docker</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#requirements" class="header">Requirements</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#docker" class="header">Docker</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#memory-and-cpu-limits" class="header">Memory and CPU limits</a></li>
      </ul></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#docker-compose" class="header">Docker Compose</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#set-up" class="header">Set-up</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#starting-nexus" class="header">Starting Nexus</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#using-fusion" class="header">Using Fusion</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#administration" class="header">Administration</a></li>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#stopping-nexus" class="header">Stopping Nexus</a></li>
      </ul></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#endpoints" class="header">Endpoints</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#postgresql-partitioning" class="header">PostgreSQL partitioning</a>
      <ul>
        <li><a href="../../../docs/getting-started/running-nexus/index.html#advanced-subpartitioning" class="header">Advanced subpartitioning</a></li>
      </ul></li>
    </ul></li>
    <li><a href="../../../docs/getting-started/running-nexus/index.html#on-premise-cloud-deployment" class="header">On premise / cloud deployment</a>
    <ul>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#choice-of-hardware" class="header">Choice of hardware</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#postgresql" class="header">PostgreSQL</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#elasticsearch" class="header">Elasticsearch</a></li>
      <li><a href="../../../docs/getting-started/running-nexus/index.html#blazegraph" class="header">Blazegraph</a></li>
    </ul></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="callout note warning admonition" style="visibility: visible; margin-top: 0px">
<div class="callout-title admonition-title">Snapshot version</div>
<p>
You are browsing the docs for the snapshot version of Nexus,
the latest release is available <a href="https://bluebrainnexus.io/docs/" title="here">here</a>
</p>
</div>
<div class="md-content__searchable">
<h1><a href="#running-nexus" name="running-nexus" class="anchor"><span class="anchor-link"></span></a>Running Nexus</h1>
<p>If you wish to quickly try out Nexus, we provide a <a href="index.html#using-the-public-sandbox">public sandbox</a>. For a more in-depth test-drive of Nexus on your machine, we recommend the <a href="index.html#docker-compose">Docker Compose approach</a>. For a production deployment on your in-house or cloud infrastructure, please refer to our <a href="index.html#on-premise-cloud-deployment">deployment guide</a>.</p>
<h2><a href="#using-the-public-sandbox" name="using-the-public-sandbox" class="anchor"><span class="anchor-link"></span></a>Using the public sandbox</h2>
<p>A public instance of Nexus is running at <a href="https://sandbox.bluebrainnexus.io" title="https://sandbox.bluebrainnexus.io" target="_blank" rel="noopener noreferrer">https://sandbox.bluebrainnexus.io</a>. You can log in with a GitHub account. It&rsquo;s provided for evaluation purposes only, without any guarantees.</p>
<p>The API root is <a href="https://sandbox.bluebrainnexus.io/v1" title="https://sandbox.bluebrainnexus.io/v1" target="_blank" rel="noopener noreferrer">https://sandbox.bluebrainnexus.io/v1</a>.</p><div class="callout note warning"><div class="callout-title">Note</div>
<p>Do not ingest any proprietary or sensitive data. The environment will be wiped regularly, your data and credentials can disappear anytime.</p></div>
<h2><a href="#run-nexus-locally-with-docker" name="run-nexus-locally-with-docker" class="anchor"><span class="anchor-link"></span></a>Run Nexus locally with Docker</h2>
<h3><a href="#requirements" name="requirements" class="anchor"><span class="anchor-link"></span></a>Requirements</h3>
<h4><a href="#docker" name="docker" class="anchor"><span class="anchor-link"></span></a>Docker</h4>
<p>Regardless of your OS, make sure to run a recent version of the Docker Engine. This was tested with version <strong>20.10.23</strong>. The Docker Engine, along the Docker CLI, come with an installation of Docker Desktop. Visit the <a href="https://docs.docker.com/desktop/" title="official Docker Desktop documentation">official Docker Desktop documentation</a> for detailed installation steps.</p>
<p>Command :</p>
<pre class="prettyprint"><code class="language-shell">docker --version
</code></pre>
<p>Example :</p>
<pre class="prettyprint"><code class="language-shell">$ docker --version
Docker version 20.10.23, build 7155243
</code></pre>
<h4><a href="#memory-and-cpu-limits" name="memory-and-cpu-limits" class="anchor"><span class="anchor-link"></span></a>Memory and CPU limits</h4>
<p>On macOS and Windows, Docker effectively runs containers inside a VM created by the system hypervisor. Nexus requires at least <strong>2 CPUs</strong> and <strong>8 GiB</strong> of memory in total. You can increase the limits in Docker settings in the menu <em>Settings</em> &gt; <em>Resources</em>.</p>
<p>For a proper evaluation using Docker, we recommend allocating at least <strong>16GiB</strong> of RAM to run the provided templates. Feel free to tweak memory limits in order to fit your hardware constraints. At the cost of a slower startup and a decreased overall performance, you should be able to go as low as:</p>
<table>
  <thead>
    <tr>
      <th align="center">Service </th>
      <th align="center">Memory [MiB] </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">PostgreSQL </td>
      <td align="center">512 </td>
    </tr>
    <tr>
      <td align="center">Elasticsearch </td>
      <td align="center">512 </td>
    </tr>
    <tr>
      <td align="center">Blazegraph </td>
      <td align="center">1024 </td>
    </tr>
    <tr>
      <td align="center">Delta </td>
      <td align="center">1024 </td>
    </tr>
  </tbody>
</table>
<h3><a href="#docker-compose" name="docker-compose" class="anchor"><span class="anchor-link"></span></a>Docker Compose</h3>
<h4><a href="#set-up" name="set-up" class="anchor"><span class="anchor-link"></span></a>Set-up</h4>
<ul>
  <li>Download the <a href="docker/docker-compose.yaml" title="Docker Compose template" target="_blank" rel="noopener noreferrer">Docker Compose template</a> into a directory of your choice, for instance <code>~/docker/nexus/</code>.</li>
  <li>Download the <a href="docker/delta.conf" title="Delta configuration" target="_blank" rel="noopener noreferrer">Delta configuration</a> to the same directory.</li>
  <li>Download the <a href="docker/nginx.conf" title="http proxy configuration" target="_blank" rel="noopener noreferrer">http proxy configuration</a> to the same directory.</li>
</ul>
<h4><a href="#starting-nexus" name="starting-nexus" class="anchor"><span class="anchor-link"></span></a>Starting Nexus</h4>
<p>From within the directory that contains the <code>docker-compose.yaml</code> you downloaded, run the containers using Docker Compose:</p>
<p>Command :</p>
<pre class="prettyprint"><code class="language-shell">docker compose --project-name nexus --file=docker-compose.yaml up --detach
</code></pre>
<p>Example :</p>
<pre class="prettyprint"><code class="language-shell">$ cd ~/docker/nexus
$ docker compose --project-name nexus --file=docker-compose.yaml up --detach
...
⠿ Network nexus_default             Created 0.0s
⠿ Container nexus-elasticsearch-1   Started 1.2s
⠿ Container nexus-postgres-1        Started 1.2s
⠿ Container nexus-blazegraph-1      Started 1.1s
⠿ Container nexus-delta-1           Started 1.6s
⠿ Container nexus-web-1             Started 1.8s
⠿ Container nexus-router-1          Started 2.1s
</code></pre>
<p>When running the command for the first time, Docker will pull all necessary images from Dockerhub if they are not available locally. Once all containers are running, wait one or two minutes and you should be able to access Nexus locally, on the port 80:</p>
<p>Command :</p>
<pre class="prettyprint"><code class="language-shell">curl http://localhost/v1/version
</code></pre>
<p>Example :</p>
<pre class="prettyprint"><code class="language-shell">$ curl http://localhost/v1/version | jq
{
  &quot;@context&quot;: &quot;https://bluebrain.github.io/nexus/contexts/version.json&quot;,
  &quot;delta&quot;: &quot;1.10.0&quot;,
  &quot;dependencies&quot;: {
    &quot;blazegraph&quot;: &quot;2.1.6-SNAPSHOT&quot;,
    &quot;elasticsearch&quot;: &quot;8.13.3&quot;,
    &quot;postgres&quot;: &quot;15.7&quot;
  },
  &quot;environment&quot;: &quot;dev&quot;,
  &quot;plugins&quot;: {
    &quot;archive&quot;: &quot;1.10.0&quot;,
    &quot;blazegraph&quot;: &quot;1.10.0&quot;,
    &quot;composite-views&quot;: &quot;1.10.0&quot;,
    &quot;elasticsearch&quot;: &quot;1.10.0&quot;,
    &quot;storage&quot;: &quot;1.10.0&quot;
  }
}
</code></pre>
<h4><a href="#using-fusion" name="using-fusion" class="anchor"><span class="anchor-link"></span></a>Using Fusion</h4>
<p>Fusion can be accessed by opening <code>http://localhost</code> in your web browser. You can start by creating an organization from the <code>http://localhost/admin</code> page.</p><div class="callout note warning"><div class="callout-title">Note</div>
<p>This setup runs the Nexus ecosystem without an identity provider, and the anonymous user is given all default permissions; do not publicly expose the endpoints of such a deployment.</p></div>
<h4><a href="#administration" name="administration" class="anchor"><span class="anchor-link"></span></a>Administration</h4>
<p>To list running services or access logs, please refer to the official Docker <a href="https://docs.docker.com/engine/reference/commandline/stack/" title="documentation" target="_blank" rel="noopener noreferrer">documentation</a>.</p>
<h4><a href="#stopping-nexus" name="stopping-nexus" class="anchor"><span class="anchor-link"></span></a>Stopping Nexus</h4>
<p>You can stop and delete the entire deployment with:</p>
<p>Command :</p>
<pre class="prettyprint"><code class="language-shell">docker compose --project-name nexus down --volumes
</code></pre>
<p>Example :</p>
<pre class="prettyprint"><code class="language-shell">$ docker compose --project-name nexus down --volumes
[+] Running 7/7
⠿ Container nexus-router-1         Removed  0.2s
⠿ Container nexus-web-1            Removed  0.3s
⠿ Container nexus-delta-1          Removed  0.5s
⠿ Container nexus-postgres-1       Removed  0.3s
⠿ Container nexus-blazegraph-1     Removed  10.3s
⠿ Container nexus-elasticsearch-1  Removed  1.0s
⠿ Network nexus_default            Removed  0.1s
</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>As no data is persisted outside the containers, <strong>everything will be lost</strong> once you shut down the Nexus deployment. If you&rsquo;d like help with creating persistent volumes, feel free to contact us on <a href="https://github.com/BlueBrain/nexus/discussions" title="Github Discussions" target="_blank" rel="noopener noreferrer">Github Discussions</a>.</p></div>
<h3><a href="#endpoints" name="endpoints" class="anchor"><span class="anchor-link"></span></a>Endpoints</h3>
<p>The provided reverse proxy (the <code>nginx</code> image) exposes several endpoints:</p>
<ul>
  <li><a href="http://localhost">root</a>: Nexus Fusion</li>
  <li><a href="http://localhost/v1">v1</a>: Nexus Delta</li>
  <li><a href="http://localhost/elasticsearch">elasticsearch</a>: Elasticsearch endpoint</li>
  <li><a href="http://localhost/blazegraph">blazegraph</a>: Blazegraph web interface</li>
</ul>
<p>If you&rsquo;d like to customize the listening port or remove unnecessary endpoints, you can simply modify the <code>nginx.conf</code> file.</p>
<h3><a href="#postgresql-partitioning" name="postgresql-partitioning" class="anchor"><span class="anchor-link"></span></a>PostgreSQL partitioning</h3>
<p>Nexus Delta takes advantage of PostgreSQL&rsquo;s <a href="https://www.postgresql.org/docs/current/ddl-partitioning.html" title="Table Partitioning">Table Partitioning</a> feature. This allows for improved query performance, and facilitates loading, deleting, or transferring data.</p>
<p>The <code>public.scoped_events</code> and <code>public.scoped_states</code> are partitioned by organization, which is itself partitioned by the projects it contains; this follows the natural hierarchy that can be found in Nexus Delta.</p>
<p>Nexus Delta takes care of handling the creation and deletion of the partitions.</p>
<ul>
  <li>If the created project is the first one of a given organization, both the organization partition and the project subpartition will be created.</li>
  <li>If the organization partition already exist, then only the project subpartition will be created upon project creation.</li>
</ul>
<p>The naming scheme of the (sub)partitions is as follows:</p>
<p><code>{table_name}_{MD5_org_hash}</code> for organization partitions</p>
<p><code>{table_name}_{MD5_project_hash}</code> for project partition</p>
<p>where</p>
<ul>
  <li><code>{table_name}</code> is either <code>scoped_events</code> or <code>scoped_states</code></li>
  <li><code>{MD5_org_hash}</code> is the MD5 hash of the organization name</li>
  <li><code>{MD5_project_has}</code> is the MD5 hash of the project reference (i.e. has the form <code>{org_name}/{project_name}</code>)</li>
</ul>
<p>MD5 hashing is used in order to guarantee a constant partition name length (PostgreSQL table names are limited to 63 character by default), as well as to avoid any special characters that might be allowed in project names but not in PostgreSQL table names (such as <code>-</code>).</p>
<p>Example:</p>
<p>You create the organization called <code>myorg</code>, inside of which you create the <code>myproject</code> project. When the project is created, Nexus Delta will have created the following partitions:</p>
<ul>
  <li><code>scoped_events_B665280652D01C4679777AFD9861170C</code>, the partition of events from the <code>myorg</code> organization
    <ul>
      <li><code>scoped_events_7922DA7049D5E38C83053EE145B27596</code>, the subpartition of the events from the <code>myorg/myproject</code> project</li>
    </ul>
  </li>
  <li><code>scoped_states_B665280652D01C4679777AFD9861170C</code>, the partition of states from the <code>myorg</code> organization
    <ul>
      <li><code>scoped_states_7922DA7049D5E38C83053EE145B27596</code>, the subpartition of the states from the <code>myorg/myproject</code> project</li>
    </ul>
  </li>
</ul>
<h4><a href="#advanced-subpartitioning" name="advanced-subpartitioning" class="anchor"><span class="anchor-link"></span></a>Advanced subpartitioning</h4>
<p>While Nexus Delta provides table partitioning out-of-the-box, it is primarily addressing the case where the data is more or less uniformly spread out across multiple projects. If however there is one or more project that are very large, it is possible to add further subpartitions according to a custom rule. This custom subpartitioning must be decided on a case-by-case basis using your knowledge of the given project; the idea is to create uniform partitions of your project. Please refer to the <a href="https://www.postgresql.org/docs/current/ddl-partitioning.html" title="PostgreSQL Table Partitioning documentation">PostgreSQL Table Partitioning documentation</a>.</p>
<h2><a href="#on-premise-cloud-deployment" name="on-premise-cloud-deployment" class="anchor"><span class="anchor-link"></span></a>On premise / cloud deployment</h2>
<p>There are several things to consider when preparing to deploy Nexus &ldquo;on premise&rdquo; because the setup depends a lot on the various usage profiles, but the most important categories would be:</p>
<ul>
  <li>Availability</li>
  <li>Latency &amp; throughput</li>
  <li>Capacity</li>
  <li>Efficient use of hardware resources</li>
  <li>Backup and restore</li>
  <li>Monitoring &amp; alerting</li>
</ul>
<p>Each of the Nexus services and &ldquo;off the shelf&rdquo; products can be deployed as a single instance or as a cluster (with one exception at this point being Blazegraph which doesn&rsquo;t come with a clustering option). The advantages for deploying clusters are generally higher availability, capacity and throughput at the cost of higher latency, consistency and having to potentially deal with network instability.</p>
<p>The decision to go with single node deployments or clustered deployments can be revisited later on and mixed setups (some services single node while others clustered) are also possible.</p>
<p>The Nexus distribution is made up of Docker images which can be run on any host operating system and each of the &ldquo;off the shelf&rdquo; products that also offer Docker as a deployment option. We would generally recommend using a container orchestration solution like <a href="https://kubernetes.io/" title="Kubernetes" target="_blank" rel="noopener noreferrer">Kubernetes</a> as it offers good management capabilities, discovery, load balancing and self-healing. They also accommodate changes in hardware allocations for the deployments, changes that can occur due to evolving usage patterns, software updates etc. Currently, the largest Nexus deployment is at EPFL and runs on Kubernetes.</p>
<h3><a href="#choice-of-hardware" name="choice-of-hardware" class="anchor"><span class="anchor-link"></span></a>Choice of hardware</h3>
<p>Depending on the target throughput, usage profiles and data volume the hardware specification can vary greatly; please take a look at the <a href="../../delta/benchmarks/v1.4.2.html">benchmarks section</a> to get an idea of what you should expect in terms of throughput with various hardware configurations. When the usage profiles are unknown a couple of rules of thumb should narrow the scope:</p>
<ol>
  <li>Nexus uses a collection of data stores (<a href="https://www.postgresql.org/" title="PostgreSQL" target="_blank" rel="noopener noreferrer">PostgreSQL</a>, <a href="https://www.elastic.co/elasticsearch" title="Elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a>, <a href="https://blazegraph.com/" title="Blazegraph" target="_blank" rel="noopener noreferrer">Blazegraph</a>) which depend performance wise to the underlying disk access, so:
    <ul>
      <li>prefer local storage over network storage for lower latency when doing IO,</li>
      <li>prefer SSD over HDDs because random access speed is more important than sequential access,</li>
      <li>one exception is the file storage (<a href="../../delta/api/files-api.html">file resources</a> which are stored as binary blobs on the filesystem) where the network disks should not be a cause for concern, nor random access speed; this assumes that accessing attachments is not the at the top in the usage profile</li>
    </ul>
  </li>
  <li>All of Nexus services and most of the &ldquo;off the shelf&rdquo; products are built to run on top of the JVM which usually require more memory over computing power. A rough ratio of 2 CPU cores per 8GB of RAM is probably a good one (this of course depends on the CPU specification).</li>
  <li>Due to the design for scalability of Nexus services and &ldquo;off the shelf&rdquo; products the network is a very important characteristic of the deployment as frequent dropped packets or <a href="https://en.wikipedia.org/wiki/Network_partition" title="network partitions" target="_blank" rel="noopener noreferrer">network partitions</a> can seriously affect the availability of the system. Clustered / distributed systems generally use some form of <a href="https://en.wikipedia.org/wiki/Consensus_%28computer_science%29" title="consensus">consensus</a>){ open=new } which is significantly affected by the reliability of the network. If the reliability of the network is a concern within the target deployment then vertical scalability is desirable over horizontal scalability: fewer host nodes with better specifications is better over more commodity hardware host nodes.</li>
</ol>
<h3><a href="#postgresql" name="postgresql" class="anchor"><span class="anchor-link"></span></a>PostgreSQL</h3>
<p>Nexus uses <a href="https://www.postgresql.org/" title="PostgreSQL" target="_blank" rel="noopener noreferrer">PostgreSQL</a> as its <em>primary store</em> as for its strong reputation for performance, reliability and flexibility. It can also be run in different contexts from integration to </p>
<p>Since this is the <em>primary store</em> it is the most important system to be <a href="https://www.postgresql.org/docs/current/backup.html" title="backed up" target="_blank" rel="noopener noreferrer">backed up</a>. All of the data that Nexus uses in other stores can be recomputed from the one stored in PostgreSQL as the other stores are used as mere indexing systems.</p>
<p>// TODO capacity planning + recommendations</p>
<p>As described in the <a href="../../delta/architecture.html">architecture section</a> the generally adopted persistence model is an EventSourced model in which the data store is used as an <em>append only</em> store. This has implications to the total amount of disk used by the primary store.</p>
<p>// TODO formula computing disk space</p>
<h3><a href="#elasticsearch" name="elasticsearch" class="anchor"><span class="anchor-link"></span></a>Elasticsearch</h3>
<p>Nexus uses <a href="https://www.elastic.co/elasticsearch" title="Elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> to host several <em>system</em> indices and <em>user defined</em> ones. It offers sharding and replication out of the box. Deciding whether this system requires backup depends on the tolerated time for a restore. Nexus can be instructed to rebuild all indices using the data from the <em>primary store</em>, but being an incremental indexing process it can take longer than restoring from a backup. Since it can be configured to host a number of replicas for each shard it can tolerate a number of node failures.</p>
<p>The Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html" title="setup documentation" target="_blank" rel="noopener noreferrer">setup documentation</a> contains the necessary information on how to install and configure it, but recommendations on sizing the nodes and cluster are scarce because it depends on usage.</p>
<p>A formula for computing the required disk space:</p>
<pre class="prettyprint"><code class="nocode">total = (resource_size * count * documents + lucene_index) * replication_factor
</code></pre>
<p>&hellip; where the <code>lucene_index</code> while it can vary should be less than twice the size of the original documents.</p>
<p>An example, assuming:</p>
<ul>
  <li>10KB per resource</li>
  <li>1.000.000 distinct resources</li>
  <li>3 documents per resource (the number of documents depends on the configured <a href="../../delta/api/views/index.html">views</a> in the system)</li>
  <li>2 additional shard replicas (replication factor of 3)</li>
</ul>
<p>&hellip; the total required disk size would be:</p>
<pre class="prettyprint"><code class="nocode">(10KB * 1.000.000 * 3 + 2 * (10KB * 1.000.000 * 3)) * 3 = 270.000.000KB ~= 260GB
</code></pre>
<p>The resulting size represents the total disk space of the data nodes in the cluster; a 5 data node cluster with the data volume in the example above would have to be configured with 60GB disks per node.</p>
<h3><a href="#blazegraph" name="blazegraph" class="anchor"><span class="anchor-link"></span></a>Blazegraph</h3>
<p>Nexus uses <a href="https://blazegraph.com/" title="Blazegraph" target="_blank" rel="noopener noreferrer">Blazegraph</a> as an RDF (triple) store to provide a advanced querying capabilities on the hosted data. This store is treated as a specialized index on the data so as with Kafka and Elasticsearch in case of failures, the system can be fully restored from the primary store. While the technology is advertised to support <a href="https://github.com/blazegraph/database/wiki/HAJournalServer" title="High Availability" target="_blank" rel="noopener noreferrer">High Availability</a> and <a href="https://github.com/blazegraph/database/wiki/ClusterGuide" title="Scaleout" target="_blank" rel="noopener noreferrer">Scaleout</a> deployment configurations, we have yet to be able to setup a deployment in this fashion.</p>
<p>We currently recommend deploying Blazegraph using the prepackaged <em>tar.gz</em> distribution available to download from <a href="https://github.com/blazegraph/database/releases/tag/BLAZEGRAPH_2_1_6_RC" title="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><div class="callout note "><div class="callout-title">Note</div>
<p>We&rsquo;re looking at alternative technologies and possible application level (within Nexus) sharding and replicas.</p></div>
<p>The <a href="https://github.com/blazegraph/database/wiki/Hardware_Configuration" title="Hardware Configuration" target="_blank" rel="noopener noreferrer">Hardware Configuration</a> section in the documentation gives a couple of hints about the requirements to operate Blazegraph and there are additional sections for optimizations in terms of <a href="https://github.com/blazegraph/database/wiki/PerformanceOptimization" title="Performance" target="_blank" rel="noopener noreferrer">Performance</a>, <a href="https://github.com/blazegraph/database/wiki/IOOptimization" title="IO" target="_blank" rel="noopener noreferrer">IO</a> and <a href="https://github.com/blazegraph/database/wiki/QueryOptimization" title="Query" target="_blank" rel="noopener noreferrer">Query</a>.</p>
<p>Blazegraph stores data in an append only journal which means updates will use additional disk space.</p>
<p>A formula for computing the required disk space:</p>
<pre class="prettyprint"><code class="nocode">total = (resource_triples + nexus_triples) * count * number_updates * triple_size + lucene_index
</code></pre>
<p>&hellip; where the <code>lucene_index</code> while it can vary should be less than twice the size of the original documents.</p>
<p>An example, assuming:</p>
<ul>
  <li>100 triples (rough estimate for a 10KB json-ld resource representation)</li>
  <li>20 additional nexus triples on average</li>
  <li>1.000.000 distinct resources</li>
  <li>10 updates per resource</li>
  <li>200 bytes triple size (using quads mode)</li>
</ul>
<p>&hellip; the total required disk size would be:</p>
<pre class="prettyprint"><code class="nocode">(100 + 20) * 1.000.000 * 10 * 200 / 1024 * 3 ~= 700.000.000KB ~= 670GB
</code></pre>
<p>Compactions can be applied to the journal using the <a href="https://github.com/blazegraph/database/blob/master/bigdata-core/bigdata/src/java/com/bigdata/journal/CompactJournalUtility.java" title="CompactJournalUtility" target="_blank" rel="noopener noreferrer">CompactJournalUtility</a> to reduce the disk usage, but it takes quite a bit a time and requires taking the software offline during the process.</p>
</div>
<div>
<a href="https://github.com/BlueBrain/nexus/tree/master/docs/src/main/paradox/docs/getting-started/running-nexus/index.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
Snapshot
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../docs/getting-started/try-nexus-movielens.html" title="Try Nexus with the MovieLens Dataset" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Try Nexus with the MovieLens Dataset
</span>
</div>
</a>
<a href="../../../docs/getting-started/running-nexus/configuration/index.html" title="Nexus configuration" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Nexus configuration
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Nexus is Open Source and available under the Apache 2 License.<br/>
© 2017-2024 <a href="https://epfl.ch/">EPFL</a>
 <a href="https://bluebrain.epfl.ch/">The Blue Brain Project</a>

</div>
</div>
<div class="md-footer-social">
<a href="https://github.com/BlueBrain" class="md-footer-social__link fa fa-github"></a><a href="https://github.com/BlueBrain/nexus/discussions" class="md-footer-social__link fa fa-github"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../."}})</script>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../.././public/js/gtm.js"></script>
</body>
</html>
